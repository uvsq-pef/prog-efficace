<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="StÃ©phane Lopes &lt;stephane.lopes@uvsq.fr&gt;, Pablo de Oliveira Castro &lt;pablo.oliveira@uvsq.fr&gt;">
<title>Programmation efficace</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Programmation efficace</h1>
<div class="details">
<span id="author" class="author">StÃ©phane Lopes &lt;stephane.lopes@uvsq.fr&gt;, Pablo de Oliveira Castro &lt;pablo.oliveira@uvsq.fr&gt;</span><br>
<span id="revnumber">version 2025-2026</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Sommaire</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_programmation_efficace">1.1. Programmation efficace</a></li>
<li><a href="#_caractÃ©ristiques_des_langages_de_programmation">1.2. CaractÃ©ristiques des langages de programmation</a></li>
<li><a href="#_rust_refcard">1.3. Rust RefCard</a></li>
</ul>
</li>
<li><a href="#_outils_de_dÃ©veloppement">2. Outils de dÃ©veloppement</a>
<ul class="sectlevel2">
<li><a href="#_au_delÃ _de_lÃ©diteur_et_du_compilateur">2.1. Au delÃ  de l&#8217;Ã©diteur et du compilateur</a></li>
<li><a href="#_au_niveau_du_systÃ¨me_dexploitation">2.2. Au niveau du systÃ¨me d&#8217;exploitation</a></li>
<li><a href="#_Ã©crire_du_code_et_collaborer">2.3. Ãcrire du code et collaborer</a></li>
<li><a href="#_dÃ©bogage_tests_et_profilage">2.4. DÃ©bogage, tests et profilage</a></li>
<li><a href="#_qualitÃ©_du_code_et_documentation">2.5. QualitÃ© du code et documentation</a></li>
<li><a href="#_construction_dun_projet">2.6. Construction dâun projet</a></li>
<li><a href="#_vers_la_livraison_continue">2.7. Vers la livraison continue</a></li>
</ul>
</li>
<li><a href="#_rust">3. Rust</a>
<ul class="sectlevel2">
<li><a href="#_rust_types_composites_et_constructions_spÃ©cifiques">3.1. Rust: Types composites et constructions spÃ©cifiques</a></li>
<li><a href="#_concepts_objet_en_rust">3.2. Concepts objet en Rust</a></li>
</ul>
</li>
<li><a href="#_modÃ¨les_mÃ©moire">4. ModÃ¨les MÃ©moire</a>
<ul class="sectlevel2">
<li><a href="#_gestion_de_la_mÃ©moire_2">4.1. Gestion de la mÃ©moire</a></li>
<li><a href="#_modÃ¨le_mÃ©moire_rust_propriÃ©tÃ©_et_emprunts">4.2. ModÃ¨le mÃ©moire Rust: propriÃ©tÃ© et emprunts</a></li>
</ul>
</li>
<li><a href="#_consommation_Ã©nergÃ©tique">5. Consommation ÃnergÃ©tique</a>
<ul class="sectlevel2">
<li><a href="#_consommation_Ã©nergÃ©tique_des_ordinateurs">5.1. Consommation Ã©nergÃ©tique des ordinateurs</a></li>
<li><a href="#_optimisations_de_code">5.2. Optimisations de code</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a><a class="link" href="#_introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_programmation_efficace"><a class="anchor" href="#_programmation_efficace"></a><a class="link" href="#_programmation_efficace">1.1. Programmation efficace</a></h3>
<div class="sect3">
<h4 id="_objectifs_du_cours_programmation_efficace"><a class="anchor" href="#_objectifs_du_cours_programmation_efficace"></a><a class="link" href="#_objectifs_du_cours_programmation_efficace">1.1.1. Objectifs du cours Â« Programmation efficace Â»</a></h4>
<div class="ulist">
<ul>
<li>
<p>Comprendre les mÃ©canismes utilisÃ©s dans les langages de programmation et leur impact sur l&#8217;efficacitÃ© des applications</p>
</li>
<li>
<p>DÃ©couvrir les caractÃ©ristiques d&#8217;un langage statiquement typÃ© et compilÃ©</p>
</li>
<li>
<p>PrÃ©senter les outils de dÃ©veloppement associÃ©s (compilateur, build, tests)</p>
</li>
<li>
<p>Sensibiliser aux difficultÃ©s liÃ©es Ã  la gestion de la mÃ©moire, Ã  la gestion d&#8217;erreurs, aux I/O, au multi-threading</p>
</li>
<li>
<p>Mettre en Ã©vidence les diffÃ©rences d&#8217;efficacitÃ© liÃ©es aux points prÃ©cÃ©dents</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_quentend_on_par_efficacitÃ©"><a class="anchor" href="#_quentend_on_par_efficacitÃ©"></a><a class="link" href="#_quentend_on_par_efficacitÃ©">1.1.2. Qu&#8217;entend-on par efficacitÃ© ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>La notion d&#8217;efficacitÃ© couvre un large spectre de critÃ¨res</p>
<div class="ulist">
<ul>
<li>
<p>performances Ã  l&#8217;exÃ©cution (temps d&#8217;exÃ©cution, cycles CPU, consommation mÃ©moire)</p>
</li>
<li>
<p>performances Ã©nergÃ©tiques (consommation d&#8217;Ã©nergie, impact environnemental)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Certains de ces critÃ¨res peuvent Ãªtre antagonistes</p>
</li>
<li>
<p>Les choix finaux relÃ¨vent souvent d&#8217;un compromis</p>
</li>
<li>
<p>La question de l&#8217;efficacitÃ© peut aussi se poser pour le cycle de dÃ©veloppement lui-mÃªme</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©fÃ©rences"><a class="anchor" href="#_rÃ©fÃ©rences"></a><a class="link" href="#_rÃ©fÃ©rences">1.1.3. RÃ©fÃ©rences</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://reberhardt.com/cs110l/">CS 110L: Safety in Systems Programming</a> (<a href="https://reberhardt.com/blog/2020/10/05/designing-a-new-class-at-stanford-safety-in-systems-programming.html">blog</a>)</p>
</li>
<li>
<p><em>Portegies Zwart, S.</em> <a href="https://arxiv.org/pdf/2009.11295.pdf">The Ecological Impact of High-performance Computing in Astrophysics</a>. Nat Astron 4, 819â822 (2020) : article dans Nature qui compare l&#8217;impact carbone de diffÃ©rents langages de programmation pour des codes d&#8217;astrophysique</p>
</li>
<li>
<p><em>Rui Pereira, and al.</em> <a href="https://greenlab.di.uminho.pt/wp-content/uploads/2017/09/paperSLE.pdf">Energy efficiency across Programming Languages</a>: how do energy, time, and memory relate? In Proceedings of the 10th ACM SIGPLAN International Conference on Software Language Engineering (SLE 2017). Association for Computing Machinery, New York, NY, USA, 256â267 : article dans SLE qui mesure l&#8217;efficacitÃ© Ã©nergÃ©tique de plusieurs langages de programmation</p>
</li>
<li>
<p><em>Cyrille Bonamy</em>, et al.. <a href="https://hal.archives-ouvertes.fr/hal-03009741/">Je code : les bonnes pratiques en Ã©co-conception de service numÃ©rique Ã  destination des dÃ©veloppeurs de logiciels</a>. 2022, pp.1-19. â¨hal-03009741v4â©</p>
</li>
<li>
<p><em>Kheira Bettayeb</em>. <a href="https://lejournal.cnrs.fr/articles/comment-rendre-les-applications-moins-energivores">Comment rendre les applications moins Ã©nergivores ?</a>. CNRS Le journal, 2022.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_caractÃ©ristiques_des_langages_de_programmation"><a class="anchor" href="#_caractÃ©ristiques_des_langages_de_programmation"></a><a class="link" href="#_caractÃ©ristiques_des_langages_de_programmation">1.2. CaractÃ©ristiques des langages de programmation</a></h3>
<div class="sect3">
<h4 id="_implÃ©mentation_des_langages"><a class="anchor" href="#_implÃ©mentation_des_langages"></a><a class="link" href="#_implÃ©mentation_des_langages">1.2.1. ImplÃ©mentation des langages</a></h4>
<div class="ulist">
<ul>
<li>
<p>Avec un <em>langage compilÃ©</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Compiled_language"><i class="fa fa-wikipedia-w"></i></a></span></sup>, le <em>code source</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Code_source"><i class="fa fa-wikipedia-w"></i></a></span></sup> du programme est transformÃ© en <em>code machine</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Code_objet"><i class="fa fa-wikipedia-w"></i></a></span></sup> par le <em>compilateur</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Compilateur"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>Dans un <em>langage interprÃ©tÃ©</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Interpreted_language"><i class="fa fa-wikipedia-w"></i></a></span></sup>, le code source du programme est exÃ©cutÃ© Â« Ã  la volÃ©e Â» par l'<em>interprÃ©teur</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interpr%C3%A8te_(informatique)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>Certains langages sont Ã  la fois compilÃ©s et interprÃ©tÃ©s</p>
</li>
<li>
<p>Il existe des approches intermÃ©diaires (compilation <em>Just In Time</em> (JIT)<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Compilation_%C3%A0_la_vol%C3%A9e"><i class="fa fa-wikipedia-w"></i></a></span></sup>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_c_est_compilÃ©"><a class="anchor" href="#_c_est_compilÃ©"></a><a class="link" href="#_c_est_compilÃ©">C est compilÃ©</a></h5>
<div class="listingblock">
<div class="title">Compilation sÃ©parÃ©e (produit <code>util.o</code> et <code>main.o</code>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gcc -c util.c
$ gcc -c main.c</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Ãdition de liens (produit <code>monprog</code>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gcc -o monprog main.o util.o</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>monprog</code> est exÃ©cutable</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./monprog</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_python_est_interprÃ©tÃ©"><a class="anchor" href="#_python_est_interprÃ©tÃ©"></a><a class="link" href="#_python_est_interprÃ©tÃ©">Python est interprÃ©tÃ©</a></h5>
<div class="listingblock">
<div class="title">ExÃ©cution d&#8217;un programme Python</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ python3 monprog.py</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_java_est_compilÃ©_puis_interprÃ©tÃ©_jit"><a class="anchor" href="#_java_est_compilÃ©_puis_interprÃ©tÃ©_jit"></a><a class="link" href="#_java_est_compilÃ©_puis_interprÃ©tÃ©_jit">Java est compilÃ© puis interprÃ©tÃ© (JIT)</a></h5>
<div class="listingblock">
<div class="title">Compilation en <em>bytecode</em> (produit <code>Main.class</code>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ javac Main.java</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ExÃ©cution avec la JVM (<em>Java Virtual Machine</em>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java Main</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_langage_de_scripts"><a class="anchor" href="#_langage_de_scripts"></a><a class="link" href="#_langage_de_scripts">1.2.2. Langage de scripts</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>script</em> est un programme destinÃ© Ã  automatiser l&#8217;enchaÃ®nement de tÃ¢ches dans un environnement particulier</p>
</li>
<li>
<p>Un <em>langage de scripts</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Langage_de_script"><i class="fa fa-wikipedia-w"></i></a></span></sup> est un langage de programmation permettant de dÃ©velopper des scripts</p>
</li>
<li>
<p>Il permet d&#8217;invoquer les primitives du systÃ¨me sous-jacent</p>
</li>
<li>
<p>Il dispose en gÃ©nÃ©ral d&#8217;un <em>REPL</em> (<em>Read-Eval-Print Loop</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop"><i class="fa fa-wikipedia-w"></i></a></span></sup>)</p>
</li>
<li>
<p>Quelques exemples</p>
<div class="ulist">
<ul>
<li>
<p>shells<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interpr%C3%A9teur_de_commandes"><i class="fa fa-wikipedia-w"></i></a></span></sup> pour les OS : <a href="https://www.gnu.org/software/bash/">Bash</a>, <a href="https://www.zsh.org/">Zsh</a>, <a href="https://www.tcsh.org/">tcsh</a></p>
</li>
<li>
<p><a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-262/">ECMAScript</a> (Javascript) pour les navigateurs web</p>
</li>
<li>
<p><a href="https://www.lua.org/">Lua</a> embarquÃ© dans une application (<a href="https://wiki.videolan.org/Documentation:Building_Lua_Playlist_Scripts/"><em>VLC Media Player</em></a>, jeu <a href="https://wiki.wesnoth.org/LuaWML"><em>Battle for Wesnoth</em></a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_systÃ¨me_de_typage"><a class="anchor" href="#_systÃ¨me_de_typage"></a><a class="link" href="#_systÃ¨me_de_typage">1.2.3. SystÃ¨me de typage</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>systÃ¨me de typage</em> attribue des types aux Ã©lÃ©ments du langage</p>
</li>
<li>
<p>Attribuer un type Ã  une expression permet de limiter les erreurs de programmation</p>
<div class="ulist">
<ul>
<li>
<p>en dÃ©finissant ce qu&#8217;il est possible de faire avec une expression</p>
</li>
<li>
<p>en dÃ©finissant les rÃ¨gles de compatibilitÃ© entre expressions</p>
</li>
<li>
<p>en vÃ©rifiant ces contraintes</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_typage_explicite_vs_implicite"><a class="anchor" href="#_typage_explicite_vs_implicite"></a><a class="link" href="#_typage_explicite_vs_implicite">Typage explicite vs. implicite</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le typage est <em>explicite</em> si les annotations de type sont visibles dans le code source</p>
<div class="listingblock">
<div class="title">En C, chaque dÃ©claration de variable prÃ©cise son type</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">int nombre = 1;
double pi = 3.141592;</code></pre>
</div>
</div>
</li>
<li>
<p>Le typage est <em>implicite</em> si les types ne sont pas prÃ©cisÃ©s dans le code source</p>
<div class="listingblock">
<div class="title">En Python, la premiÃ¨re affectation crÃ©e la variable</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">nombre = 1
pi = 3.141592</code></pre>
</div>
</div>
</li>
<li>
<p>Des langages Ã  typage explicite peuvent faire appel Ã  l'<em>infÃ©rence de types</em> dans certaines situations</p>
<div class="ulist">
<ul>
<li>
<p>permet la dÃ©duction automatique des types</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_typage_statique_vs_dynamique"><a class="anchor" href="#_typage_statique_vs_dynamique"></a><a class="link" href="#_typage_statique_vs_dynamique">Typage statique vs. dynamique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le typage est <em>statique</em> si l&#8217;information de type est associÃ©e Ã  l&#8217;identificateur</p>
<div class="ulist">
<ul>
<li>
<p>&#8658; la vÃ©rification des types peut Ãªtre rÃ©alisÃ©e lors de la compilation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le typage est <em>dynamique</em> si l&#8217;information de type est portÃ©e par l&#8217;objet lui-mÃªme</p>
<div class="ulist">
<ul>
<li>
<p>&#8658; la vÃ©rification se fait durant l&#8217;exÃ©cution</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_typage_statique"><a class="anchor" href="#_typage_statique"></a><a class="link" href="#_typage_statique">Typage statique</a></h5>
<div class="ulist">
<ul>
<li>
<p>AmÃ©liore la fiabilitÃ© du programme (plus de vÃ©rifications plus prÃ©coces)</p>
</li>
<li>
<p>Meilleur support des outils (IDE)</p>
</li>
<li>
<p>Meilleures performances</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En C, les erreurs de type sont identifiÃ©es par le compilateur</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">double a = "une chaine";
// error: incompatible types when initializing type âdoubleâ using type âchar *â</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_typage_dynamique"><a class="anchor" href="#_typage_dynamique"></a><a class="link" href="#_typage_dynamique">Typage dynamique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Offre plus de souplesse dans l&#8217;Ã©criture du code source</p>
<div class="ulist">
<ul>
<li>
<p><em>duck typing</em>, <em>data as code</em>, mÃ©taprogrammation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Permet le prototypage rapide</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En Python, les erreurs de type peuvent passer inaperÃ§ues</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">pi = 3.14_15_92
pi = 'Ï'
print(pi * 2) // affiche ÏÏ</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_typage_fort_vs_faible"><a class="anchor" href="#_typage_fort_vs_faible"></a><a class="link" href="#_typage_fort_vs_faible">Typage fort vs. faible</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le typage est <em>fort</em> si les manipulations entre donnÃ©es de types diffÃ©rents sont limitÃ©es et contrÃ´lÃ©es</p>
</li>
<li>
<p>Le typage est <em>faible</em> si les possibilitÃ©s de transtypage sont nombreuses et implicites</p>
</li>
<li>
<p>Ces notions sont relativement floues</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Le C est Ã  typage fort maisâ¦</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">int a = "une chaine";
printf("%d\n", a); // 443215...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_support_des_paradigmes_de_programmation"><a class="anchor" href="#_support_des_paradigmes_de_programmation"></a><a class="link" href="#_support_des_paradigmes_de_programmation">1.2.4. Support des paradigmes de programmation</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <strong>paradigme de programmation</strong> reprÃ©sente la faÃ§on d&#8217;aborder un problÃ¨me et d&#8217;en concevoir la solution.</p>
</li>
<li>
<p>Quelques paradigmes</p>
<div class="ulist">
<ul>
<li>
<p>Programmation impÃ©rative</p>
<div class="ulist">
<ul>
<li>
<p>Programmation structurÃ©e</p>
</li>
<li>
<p>Programmation modulaire</p>
</li>
<li>
<p>Programmation par abstraction de donnÃ©es</p>
</li>
<li>
<p>Programmation objet</p>
</li>
</ul>
</div>
</li>
<li>
<p>Programmation fonctionnelle</p>
</li>
<li>
<p>Programmation logique</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un langage <strong>supporte un paradigme</strong> quand il fournit les fonctionnalitÃ©s pour utiliser ce style (de faÃ§on simple, sÃ©curisÃ©e et efficace)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_programmation_logique_avec_prolog"><a class="anchor" href="#_exemple_programmation_logique_avec_prolog"></a><a class="link" href="#_exemple_programmation_logique_avec_prolog">Exemple - Programmation logique avec Prolog</a></h5>
<div class="paragraph">
<p>Prolog est un langage dÃ©claratif qui permet de dÃ©finir et d&#8217;interroger une <em>base de faits</em></p>
</div>
<div class="listingblock">
<div class="title">Un <em>fait</em> est une assertion simple</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- IdÃ©fix est un chien
chien(idefix).</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Une <em>rÃ¨gle</em> dÃ©crit une infÃ©rence Ã  partir des faits</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- Les chiens aiment les arbres
aimeLesArbres(X):- chien(X).</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Une <em>requÃªte</em> est une question sur la <em>base de connaissance</em></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- IdÃ©fix aime-t'il les arbres ?
?- aimeLesArbres(idefix)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_requÃªte"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_requÃªte"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_requÃªte">Solveur de Sudoku \(4 xx 4\) en Prolog - RequÃªte</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- requÃªte

| ?- sudoku([_, _, 2, 3,
             _, _, _, _,
             _, _, _, _,
             3, 4, _, _],
             Solution).</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_13"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_13"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_13">Solveur de Sudoku \(4 xx 4\) en Prolog - RÃ©solution 1/3</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- la solution doit Ãªtre unifiÃ©e avec le problÃ¨me
- le problÃ¨me comporte 16 chiffres
- chaque chiffre est compris entre 1 et 4 (fd_domain)

sudoku(Puzzle, Solution) :-
  Solution = Puzzle,
  Puzzle = [A1, A2, A3, A4,
            B1, B2, B3, B4,
            C1, C2, C3, C4,
            D1, D2, D3, D4],
  fd_domain(Puzzle, 1, 4),</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_23"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_23"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_23">Solveur de Sudoku \(4 xx 4\) en Prolog - RÃ©solution 2/3</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- les blocs (lignes, colonnes et carrÃ©s) sont dÃ©finis

  Row1 = [A1, A2, A3, A4],
  Row2 = [B1, B2, B3, B4],
  Row3 = [C1, C2, C3, C4],
  Row4 = [D1, D2, D3, D4],

  Col1 = [A1, B1, C1, D1],
  Col2 = [A2, B2, C2, D2],
  Col3 = [A3, B3, C3, D3],
  Col4 = [A4, B4, C4, D4],

  Square1 = [A1, A2, B1, B2],
  Square2 = [A3, A4, B3, B4],
  Square3 = [C1, C2, D1, D2],
  Square4 = [C3, C4, D3, D4],</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_33"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_33"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_rÃ©solution_33">Solveur de Sudoku \(4 xx 4\) en Prolog - RÃ©solution 3/3</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- le prÃ©dicat valid reÃ§oit une liste de 12 blocs
- la liste vide est valide
- la tÃªte de la liste ne comporte pas de doublons (fd_all_different)
- le reste de la liste doit Ãªtre valide

valid([]).
valid([Head|Tail]) :-
  fd_all_different(Head),
  valid(Tail).

- une solution possÃ¨de des blocs valides

  valid([Row1, Row2, Row3, Row4,
         Col1, Col2, Col3, Col4,
         Square1, Square2, Square3, Square4]).</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_programmation_fonctionnelle_avec_haskell"><a class="anchor" href="#_exemple_programmation_fonctionnelle_avec_haskell"></a><a class="link" href="#_exemple_programmation_fonctionnelle_avec_haskell">Exemple - Programmation fonctionnelle avec Haskell</a></h5>
<div class="ulist">
<ul>
<li>
<p>Haskell est un langage fonctionnel</p>
</li>
<li>
<p>PossÃ¨de un systÃ¨me de typage statique, fort et principalement implicite (infÃ©rence de types)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_haskell_12"><a class="anchor" href="#_haskell_12"></a><a class="link" href="#_haskell_12">Haskell 1/2</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-haskell hljs" data-lang="haskell">-- Calcul de la fonction factorielle

-- RÃ©cursive
fact x = if x == 0 then 1 else fact (x - 1) * x

-- Pattern matching
fact 0 = 1
fact x = x * fact (x - 1)

-- Gardes
fact x
   | x &gt; 1 = x * fact (x - 1)
   | otherwise = 1

-- Liste et intervalle
fac x = product [1..x]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_haskell_22"><a class="anchor" href="#_haskell_22"></a><a class="link" href="#_haskell_22">Haskell 2/2</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-haskell hljs" data-lang="haskell">-- Fonctions d'ordre supÃ©rieure
mapList f [] = []
mapList f (x:xs) = f x : mapList f xs

-- Listes en comprÃ©hension et Ã©valuation paresseuse
take 10 [ (i,j) | i &lt;- [1..], j &lt;- [1..], i &lt; j ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_langage_impÃ©ratif"><a class="anchor" href="#_langage_impÃ©ratif"></a><a class="link" href="#_langage_impÃ©ratif">1.2.5. Langage impÃ©ratif</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>langage impÃ©ratif</em> reprÃ©sente un programme comme une sÃ©quence d&#8217;instructions qui modifient son Ã©tat au cours de son exÃ©cution</p>
</li>
<li>
<p>Un programme dÃ©crit <strong>comment</strong> aboutir Ã  la solution du problÃ¨me</p>
</li>
<li>
<p>Proche de l&#8217;architecture matÃ©rielle des ordinateurs (<em>architecture de von Neumann</em>)</p>
</li>
<li>
<p>De nombreux langages populaires sont de ce type (C, Java, Python)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_langage_dÃ©claratif"><a class="anchor" href="#_langage_dÃ©claratif"></a><a class="link" href="#_langage_dÃ©claratif">1.2.6. Langage dÃ©claratif</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>langage dÃ©claratif</em> permet de dÃ©crire ce que le programme doit faire (le <strong>quoi</strong>) et non pas comment il doit le faire (le <strong>comment</strong>)</p>
</li>
<li>
<p>Un programme respectant ce style dÃ©crit le problÃ¨me Ã  traiter</p>
</li>
<li>
<p>Quelques exemples : Prolog, SQL</p>
</li>
<li>
<p>Certains langages impÃ©ratifs embarquent des constructions dÃ©claratives</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_de_la_mÃ©moire"><a class="anchor" href="#_gestion_de_la_mÃ©moire"></a><a class="link" href="#_gestion_de_la_mÃ©moire">1.2.7. Gestion de la mÃ©moire</a></h4>
<div class="ulist">
<ul>
<li>
<p>La gestion de la mÃ©moire dans un langage de programmation dÃ©crit comment les objets inutilisÃ©s sont identifiÃ©s et dÃ©sallouÃ©s</p>
<div class="ulist">
<ul>
<li>
<p>nÃ©cessaire pour Ã©viter les <em>fuites de mÃ©moire</em> (<em>memory leaks</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>La plupart des langages ont une gestion automatique de la mÃ©moire et s&#8217;appuient sur un <em>ramasse-miettes</em> (<em>garbage collector</em>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En Java, le ramasse-miettes est chargÃ© de libÃ©rer la mÃ©moire allouÃ©e dynamiquement</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">int[] tableau = new int[10]; // allocation d'un tableau de 10 cases
// la dÃ©sallocation est automatique</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Les langages C et C++ ont une gestion manuelle de la mÃ©moire</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">int[] tableau = malloc(10 * sizeof(int)); // allocation d'un tableau de 10 cases
// ...
free(tableau); // libÃ©ration de la mÃ©moire</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_caractÃ©ristiques_de_quelques_langages"><a class="anchor" href="#_caractÃ©ristiques_de_quelques_langages"></a><a class="link" href="#_caractÃ©ristiques_de_quelques_langages">1.2.8. CaractÃ©ristiques de quelques langages</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Langage</th>
<th class="tableblock halign-left valign-top">ImplÃ©mentation</th>
<th class="tableblock halign-left valign-top">Scripts</th>
<th class="tableblock halign-left valign-top">Typage</th>
<th class="tableblock halign-left valign-top">Paradigme</th>
<th class="tableblock halign-left valign-top">MÃ©moire</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CompilÃ©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">explicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">procÃ©dural</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">manuelle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CompilÃ©, interprÃ©tÃ©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">explicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OO, fonc., gÃ©nÃ©rique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PHP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">InterprÃ©tÃ©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, dynamique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proc., OO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CompilÃ©, InterprÃ©tÃ©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, dynamique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proc., OO, fonc.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rust</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CompilÃ©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proc., fonc., gÃ©nÃ©rique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">manuelle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scala</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CompilÃ©, interprÃ©tÃ©</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OO, fonc., gÃ©nÃ©rique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_rust_refcard"><a class="anchor" href="#_rust_refcard"></a><a class="link" href="#_rust_refcard">1.3. Rust RefCard</a></h3>
<div class="sect3">
<h4 id="_le_langage_rust"><a class="anchor" href="#_le_langage_rust"></a><a class="link" href="#_le_langage_rust">1.3.1. Le langage Rust</a></h4>
<div class="sect4">
<h5 id="_historique"><a class="anchor" href="#_historique"></a><a class="link" href="#_historique">Historique</a></h5>
<div class="ulist">
<ul>
<li>
<p>ConÃ§u et dÃ©veloppÃ© initialement par Graydon Hoare (Mozilla Research) en 2010</p>
</li>
<li>
<p>PremiÃ¨re version stable en 2015</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_caractÃ©ristiques_du_langage"><a class="anchor" href="#_caractÃ©ristiques_du_langage"></a><a class="link" href="#_caractÃ©ristiques_du_langage">CaractÃ©ristiques du langage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Langage compilÃ© Ã  typage statique fort</p>
</li>
<li>
<p>Supporte les paradigmes impÃ©ratif, fonctionnel et concurrent</p>
</li>
<li>
<p>Gestion manuelle de la mÃ©moire (pas de <em>garbage collector</em>)</p>
</li>
<li>
<p>AccÃ¨s mÃ©moire validÃ©s statiquement par le compilateur (<em>borrow checker</em>)</p>
</li>
<li>
<p>Est accompagnÃ© de <em>cargo</em> pour la gestion de la compilation et des bibliothÃ¨ques</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_quelques_domaines_dapplication"><a class="anchor" href="#_quelques_domaines_dapplication"></a><a class="link" href="#_quelques_domaines_dapplication">1.3.2. Quelques domaines d&#8217;application</a></h4>
<div class="ulist">
<div class="title">Parfois vu comme un possible successeur de C/C++</div>
<ul>
<li>
<p>Programmation systÃ¨me</p>
</li>
<li>
<p>Applications en ligne de commande</p>
</li>
<li>
<p>Applications Web (via WebAssembly)</p>
</li>
<li>
<p>Services rÃ©seaux</p>
</li>
<li>
<p>SystÃ¨mes embarquÃ©s.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_quelques_outils_de_dÃ©veloppement"><a class="anchor" href="#_quelques_outils_de_dÃ©veloppement"></a><a class="link" href="#_quelques_outils_de_dÃ©veloppement">1.3.3. Quelques outils de dÃ©veloppement</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le compilateur <a href="https://doc.rust-lang.org/rustc/index.html"><code>rustc</code></a> ainsi que l&#8217;environnement de dÃ©veloppement est prÃ©fÃ©rentiellement installÃ© avec l&#8217;outil de distribution <a href="https://github.com/rust-lang/rustup"><code>rustup</code></a></p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/cargo/index.html"><code>cargo</code></a> est le gestionnaire de compilation et de dÃ©pendance</p>
</li>
<li>
<p><a href="https://crates.io/"><code>crates.io</code></a> est le dÃ©pÃ´t central des bibliothÃ¨ques du langage</p>
</li>
<li>
<p><a href="https://github.com/rust-lang/rustfmt"><code>rustfmt</code></a> formate les fichiers sources</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/rustdoc/index.html"><code>rustdoc</code></a> gÃ©nÃ¨re la documentation de l&#8217;API d&#8217;une application</p>
</li>
<li>
<p><a href="https://github.com/rust-lang/rust-clippy"><code>clippy</code></a> est un <em>linter</em> pour le code Rust</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_hello_world_en_rust"><a class="anchor" href="#_hello_world_en_rust"></a><a class="link" href="#_hello_world_en_rust">1.3.4. Â« Hello World Â» en Rust</a></h4>
<div class="listingblock">
<div class="title">src/intro/exemples/hello.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() { <i class="conum" data-value="1"></i><b>(1)</b>
    println!("Hello world!"); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Le programme principal est reprÃ©sentÃ© par la fonction <code>main</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La macro <code>println!</code> affiche un texte sur la sortie standard</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_compilation"><a class="anchor" href="#_compilation"></a><a class="link" href="#_compilation">1.3.5. Compilation</a></h4>
<div class="sect4">
<h5 id="_compilateur"><a class="anchor" href="#_compilateur"></a><a class="link" href="#_compilateur">Compilateur</a></h5>
<div class="listingblock">
<div class="title">Le compilateur Rust se nomme <a href="https://doc.rust-lang.org/rustc/index.html"><code>rustc</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ rustc hello.rs</code></pre>
</div>
</div>
<div class="hdlist">
<div class="title">Quelques options</div>
<table>
<tr>
<td class="hdlist1">
<code>-L</code>
</td>
<td class="hdlist2">
<p>ajoute un rÃ©pertoire au chemin de recherche des bibliothÃ¨ques</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--edition</code>
</td>
<td class="hdlist2">
<p>prÃ©cise l&#8217;<a href="https://doc.rust-lang.org/edition-guide/introduction.html">Ã©dition</a> de Rust Ã  utiliser (2015|2018|2021)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--emit</code>
</td>
<td class="hdlist2">
<p>spÃ©cifie le type de fichiers de sortie Ã  gÃ©nÃ©rer</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>-g</code>
</td>
<td class="hdlist2">
<p>inclut les informations de dÃ©bogage</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>-O</code>
</td>
<td class="hdlist2">
<p>optimise le code</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--explain</code>
</td>
<td class="hdlist2">
<p>donne des dÃ©tails sur un message d&#8217;erreur</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--test</code>
</td>
<td class="hdlist2">
<p>gÃ©nÃ¨re un programme pour exÃ©cuter les tests Ã  la place du <code>main</code></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exÃ©cuter_le_programme"><a class="anchor" href="#_exÃ©cuter_le_programme"></a><a class="link" href="#_exÃ©cuter_le_programme">ExÃ©cuter le programme</a></h5>
<div class="listingblock">
<div class="title">Le programme gÃ©nÃ©rÃ© est un exÃ©cutable natif du systÃ¨me cible</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./hello</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dÃ©buter_un_projet_rust"><a class="anchor" href="#_dÃ©buter_un_projet_rust"></a><a class="link" href="#_dÃ©buter_un_projet_rust">1.3.6. DÃ©buter un projet Rust</a></h4>
<div class="listingblock">
<div class="title">L&#8217;initialisation d&#8217;un projet Rust s&#8217;appuie sur <a href="https://doc.rust-lang.org/cargo/index.html"><code>cargo</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cargo new hello
$ tree hello
hello
âââ Cargo.toml
âââ src
 Â Â  âââ main.rs</code></pre>
</div>
</div>
<div class="ulist">
<div class="title"><code>cargo</code> initialise un projet Rust avec</div>
<ul>
<li>
<p>un nouveau rÃ©pertoire du nom du projet,</p>
</li>
<li>
<p>un dÃ©pÃ´t <code>git</code>,</p>
</li>
<li>
<p>un fichier <code>Cargo.toml</code> dÃ©crivant le projet,</p>
</li>
<li>
<p>un sous-rÃ©pertoire pour le code source,</p>
</li>
<li>
<p>un fichier <code>main.rs</code> contenant le <code>main</code> du <em>crate</em></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_systÃ¨me_de_build"><a class="anchor" href="#_systÃ¨me_de_build"></a><a class="link" href="#_systÃ¨me_de_build">SystÃ¨me de build</a></h5>
<div class="listingblock">
<div class="title">Le systÃ¨me de build intÃ©grÃ© avec Rust se nomme <a href="https://doc.rust-lang.org/cargo/index.html"><code>cargo</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd src/intro/exemples/hello
$ cargo build
   Compiling hello v0.1.0 (src/intro/exemples/hello)
    Finished dev [unoptimized + debuginfo] target(s) in 0.42s
$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.01s
     Running `target/debug/hello`
Hello, world!</code></pre>
</div>
</div>
<div class="hdlist">
<div class="title">Quelques commandes et options</div>
<table>
<tr>
<td class="hdlist1">
<code>build</code>
</td>
<td class="hdlist2">
<p>construit le <em>crate</em> en mode dÃ©bogage</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>--release</code></dt>
<dd>
<p>optimise le code et gÃ©nÃ¨re en mode distribution</p>
</dd>
</dl>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>check</code>
</td>
<td class="hdlist2">
<p>vÃ©rifie le <em>crate</em> sans gÃ©nÃ©rer d&#8217;exÃ©cutable</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>run</code>
</td>
<td class="hdlist2">
<p>exÃ©cute le <em>crate</em></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>test</code>
</td>
<td class="hdlist2">
<p>compile et exÃ©cute les tests</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_notions_de_base"><a class="anchor" href="#_notions_de_base"></a><a class="link" href="#_notions_de_base">1.3.7. Notions de base</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un code source Rust est une sÃ©quence de caractÃ¨res Unicode UTF-8</p>
</li>
<li>
<p>Une unitÃ© de compilation Rust est dÃ©nommÃ©e un <a href="https://doc.rust-lang.org/reference/crates-and-source-files.html"><em>crate</em></a> (<em>caisse</em>)</p>
</li>
<li>
<p>Un <em>crate</em> contient des <a href="https://doc.rust-lang.org/reference/items/modules.html"><em>modules</em></a> imbriquÃ©s</p>
</li>
<li>
<p>Un fichier source (extension <code>.rs</code>) est un module</p>
</li>
<li>
<p>La plupart des instructions se terminent par un <code>;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_commentaires"><a class="anchor" href="#_commentaires"></a><a class="link" href="#_commentaires">1.3.8. Commentaires</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/reference/comments.html">Commentaires</a></p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>/* &#8230;&#8203; */</code>
</td>
<td class="hdlist2">
<p>le texte entre <code>/*</code> et <code>*/</code> est ignorÃ© (peuvent Ãªtre imbriquÃ©s)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/** &#8230;&#8203; */</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation (Ã©quiv. Ã  l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/*! &#8230;&#8203; */</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation interne (Ã©quiv. Ã  l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>// &#8230;&#8203;</code>
</td>
<td class="hdlist2">
<p>le texte jusqu&#8217;Ã  la fin de la ligne est ignorÃ©</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/// &#8230;&#8203;</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation (Ã©quiv. Ã  l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>//! &#8230;&#8203;</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation interne (Ã©quiv. Ã  l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_systÃ¨me_de_typage_2"><a class="anchor" href="#_systÃ¨me_de_typage_2"></a><a class="link" href="#_systÃ¨me_de_typage_2">1.3.9. SystÃ¨me de typage</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <a href="https://doc.rust-lang.org/reference/types.html">type</a> d&#8217;une valeur dÃ©finit l&#8217;interprÃ©tation de l&#8217;emplacement mÃ©moire la contenant ainsi que les opÃ©rations qu&#8217;on peut lui appliquer</p>
</li>
<li>
<p>Chaque variable ou expression possÃ¨de un type</p>
</li>
<li>
<p>Rust est un langage Ã  <em>typage statique</em></p>
</li>
<li>
<p>Le compilateur peut en gÃ©nÃ©ral infÃ©rer le type d&#8217;une variable Ã  partir de son contenu</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_types_primitifs"><a class="anchor" href="#_types_primitifs"></a><a class="link" href="#_types_primitifs">1.3.10. Types primitifs</a></h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.bool.html"><code>bool</code></a>
</td>
<td class="hdlist2">
<p>BoolÃ©en (<code>true</code> ou <code>false</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.i8.html"><code>i8</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i16.html"><code>i16</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i32.html"><code>i32</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i64.html"><code>i64</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i128.html"><code>i128</code></a>, <a href="https://doc.rust-lang.org/std/primitive.isize.html"><code>isize</code></a>
</td>
<td class="hdlist2">
<p>Entier signÃ© (8, 16, 32, 64, 128 bits ou dÃ©pendant de l&#8217;architecture)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.u8.html"><code>u8</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u16.html"><code>u16</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u32.html"><code>u32</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u64.html"><code>u64</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u128.html"><code>u128</code></a>, <a href="https://doc.rust-lang.org/std/primitive.usize.html"><code>usize</code></a>
</td>
<td class="hdlist2">
<p>Entier non signÃ© (8, 16, 32, 64, 128 bits ou dÃ©pendant de l&#8217;architecture)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.f32.html"><code>f32</code></a>, <a href="https://doc.rust-lang.org/std/primitive.f64.html"><code>f64</code></a>
</td>
<td class="hdlist2">
<p>Nombre en virgule flottante (simple ou double prÃ©cision)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.char.html"><code>char</code></a>
</td>
<td class="hdlist2">
<p>CaractÃ¨re Unicode (32 bits)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.str.html"><code>str</code></a>
</td>
<td class="hdlist2">
<p>ChaÃ®ne de caractÃ¨res UTF-8</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.array.html"><code>array</code></a>
</td>
<td class="hdlist2">
<p>Tableau de taille fixe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.tuple.html"><code>tuple</code></a>
</td>
<td class="hdlist2">
<p>SÃ©quence d&#8217;Ã©lÃ©ments hÃ©tÃ©rogÃ¨nes</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/04_primitive_types">rustlings</a>, <a href="https://practice.course.rs//basic-types/numbers.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_littÃ©raux"><a class="anchor" href="#_littÃ©raux"></a><a class="link" href="#_littÃ©raux">1.3.11. LittÃ©raux</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/reference/tokens.html#literals">littÃ©ral</a> reprÃ©sente la valeur d&#8217;un type</p>
</li>
<li>
<p>Quelques littÃ©raux</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>'C'</code>
</td>
<td class="hdlist2">
<p>CaractÃ¨re Unicode (<code>b&#8217;C'</code> pour un caractÃ¨re ASCII)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>"chaÃ®ne"</code>
</td>
<td class="hdlist2">
<p>ChaÃ®ne de caractÃ¨res Unicode (<code>b"chaÃ®ne"</code> pour une chaÃ®ne ASCII)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>12345</code>
</td>
<td class="hdlist2">
<p>Entier (<code>0xFF</code> en hexa, <code>0o77</code> en octal, <code>0b1111</code> en binaire)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>123.0E+77</code>
</td>
<td class="hdlist2">
<p>Nombre Ã  virgule flottante</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Le caractÃ¨re <code>_</code> peut Ãªtre utilisÃ© pour rendre les nombres plus lisibles</p>
</li>
<li>
<p>Un suffixe de type sur un nombre permet de prÃ©ciser le type souhaitÃ© (<code>123u64</code>, <code>12E+99_f64</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_variables"><a class="anchor" href="#_variables"></a><a class="link" href="#_variables">1.3.12. Variables</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les variables en Rust sont par dÃ©faut immuables</p>
<div class="ulist">
<ul>
<li>
<p>quand une valeur est attachÃ©e Ã  une variable, elle ne peut plus Ãªtre modifiÃ©e</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le mot-clÃ© <code>let</code> permet de dÃ©clarer une variable</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x = 5;</code></pre>
</div>
</div>
</li>
<li>
<p>Une variable peut Ãªtre rendue modifiable avec le mot-clÃ© <code>mut</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut x = 5;</code></pre>
</div>
</div>
</li>
<li>
<p>Le nom d&#8217;une variable peut Ãªtre rÃ©utilisÃ© (<a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#shadowing"><em>Shadowing</em></a>)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x = 5;
let x = x * 2;</code></pre>
</div>
</div>
</li>
<li>
<p>Chaque variable possÃ¨de un type qui est infÃ©rÃ© la plupart du temps</p>
</li>
<li>
<p>Le type d&#8217;une variable peut aussi Ãªtre prÃ©cisÃ©</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x: u32 = 5;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/01_variables">rustlings</a>, <a href="https://practice.course.rs//variables.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/variable_bindings.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_constantes"><a class="anchor" href="#_constantes"></a><a class="link" href="#_constantes">1.3.13. Constantes</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <a href="https://doc.rust-lang.org/reference/items/constant-items.html">constante</a> est introduite par le mot-clÃ© <code>const</code> et doit Ãªtre annotÃ©e par son type</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">const MAX_POINTS: u32 = 100_000;</code></pre>
</div>
</div>
</li>
<li>
<p>Une constante peut Ãªtre dÃ©clarÃ©e dans n&#8217;importe quelle portÃ©e et doit Ãªtre initialisÃ©e par une expression constante</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://doc.rust-lang.org/stable/rust-by-example/custom_types/constants.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©fÃ©rence"><a class="anchor" href="#_rÃ©fÃ©rence"></a><a class="link" href="#_rÃ©fÃ©rence">1.3.14. RÃ©fÃ©rence</a></h4>
<div class="ulist">
<ul>
<li>
<p>En Rust, toute valeur <em>appartient</em> Ã  une variable (<a href="https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html"><em>ownership</em></a>)</p>
<div class="ulist">
<ul>
<li>
<p>Ã  un instant donnÃ©, il ne peut y avoir qu&#8217;un unique propriÃ©taire</p>
</li>
<li>
<p>quand le propriÃ©taire sort de sa portÃ©e, la valeur est dÃ©truite</p>
</li>
</ul>
</div>
</li>
<li>
<p>Il est possible d'<em>emprunter</em> (<em>borrow</em>) la valeur d&#8217;une variable avec une rÃ©fÃ©rence (<code>&amp;</code>)</p>
<div class="ulist">
<ul>
<li>
<p>la propriÃ©tÃ© n&#8217;est alors pas transfÃ©rÃ©e</p>
</li>
<li>
<p>pour pouvoir modifier une valeur par l&#8217;intermÃ©diaire d&#8217;une rÃ©fÃ©rence, il faut que cette derniÃ¨re soit modifiable (<code>&amp;mut</code>)</p>
</li>
<li>
<p>quand il existe une rÃ©fÃ©rence mutable pour une valeur, aucune autre rÃ©fÃ©rence ne peut pointer sur la valeur</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pour dÃ©rÃ©fÃ©rencer une rÃ©fÃ©rence, on utilise l&#8217;opÃ©rateur <code>*</code></p>
<div class="ulist">
<ul>
<li>
<p>la plupart du temps, le dÃ©rÃ©fÃ©rencement se fait implicitement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Voir l&#8217;exemple sur les chaÃ®nes de caractÃ¨res</p>
</li>
<li>
<p>ExpÃ©rimentez (<a href="https://practice.course.rs//ownership/borrowing.html">Rust By Practice</a>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_slice"><a class="anchor" href="#_slice"></a><a class="link" href="#_slice">1.3.15. Slice</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/book/ch04-03-slices.html"><em>slice</em></a> (<code>[T]</code>) est un type primitif permettant de rÃ©fÃ©rencer une portion d&#8217;une sÃ©quence contiguÃ«e d&#8217;Ã©lÃ©ments</p>
<div class="ulist">
<ul>
<li>
<p>c&#8217;est une vue sur un bloc de mÃ©moire reprÃ©sentÃ©e par un pointeur et une taille</p>
</li>
<li>
<p>cf. le type primitif <a href="https://doc.rust-lang.org/std/primitive.slice.html">slice</a></p>
</li>
<li>
<p>cf. le module <a href="https://doc.rust-lang.org/std/slice/index.html"><code>std::slice</code></a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Un slice est une sorte de rÃ©fÃ©rence (donc n&#8217;est pas propriÃ©taire)</p>
</li>
<li>
<p>Un slice peut Ãªtre immuable (<code>&amp;[T]</code>) ou modifiable (<code>&amp;mut [T]</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Voir l&#8217;exemple sur les chaÃ®nes de caractÃ¨res</p>
</li>
<li>
<p>ExpÃ©rimentez (<a href="https://practice.course.rs//compound-types/slice.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives/array.html">Rust by Example</a>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointers"><a class="anchor" href="#_smart_pointers"></a><a class="link" href="#_smart_pointers">1.3.16. <em>Smart pointers</em></a></h4>
<div class="hdlist">
<div class="title">En plus des rÃ©fÃ©rences, la bibliothÃ¨que standard propose diffÃ©rents types de <em>smart pointers</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Smart_pointer"><i class="fa fa-wikipedia-w"></i></a></span></sup></div>
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/boxed/index.html"><code>Box&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour allouer des valeurs sur le tas</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/rc/index.html"><code>Rc&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>un type de comptage de rÃ©fÃ©rences pour gÃ©rer les propriÃ©taires multiples</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/index.html"><code>Ref&lt;T&gt;</code>, <code>RefMut&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>accÃ©dÃ© par <code>RefCell&lt;T&gt;</code>, un type pour gÃ©rer les emprunts lors de l&#8217;exÃ©cution au lieu de la compilation</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://doc.rust-lang.org/stable/rust-by-example/std/box.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_chaÃ®nes_de_caractÃ¨res"><a class="anchor" href="#_chaÃ®nes_de_caractÃ¨res"></a><a class="link" href="#_chaÃ®nes_de_caractÃ¨res">1.3.17. ChaÃ®nes de caractÃ¨res</a></h4>
<div class="sect4">
<h5 id="_type_primitif_str"><a class="anchor" href="#_type_primitif_str"></a><a class="link" href="#_type_primitif_str">Type primitif <a href="https://doc.rust-lang.org/1.54.0/std/primitive.str.html"><code>str</code></a></a></h5>
<div class="ulist">
<ul>
<li>
<p>Le type primitif <a href="https://doc.rust-lang.org/1.54.0/std/primitive.str.html"><code>str</code></a> est un slice de type <code>[u8]</code> (sÃ©quence d&#8217;octet)</p>
<div class="ulist">
<ul>
<li>
<p>la plupart des fonctions suppose qu&#8217;une valeur de type <code>str</code> contient une chaÃ®ne UTF-8</p>
</li>
</ul>
</div>
</li>
<li>
<p>GÃ©nÃ©ralement manipulÃ© sous la forme empruntÃ©e <code>&amp;str</code></p>
</li>
<li>
<p>Un littÃ©ral est de type <code>&amp;'static str</code></p>
</li>
<li>
<p>Le module <a href="https://doc.rust-lang.org/std/str/index.html">std::str</a> permet la manipulation des variables de ce type</p>
</li>
<li>
<p>Quelques opÃ©rations :
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.chars"><code>chars</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.contains"><code>contains</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.find"><code>find</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.get"><code>get</code></a>
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.is_empty"><code>is_empty</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.len"><code>len</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.replace"><code>replace</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.split"><code>split</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.trim"><code>trim</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple"><a class="anchor" href="#_exemple"></a><a class="link" href="#_exemple">Exemple</a></h5>
<div class="listingblock">
<div class="title">src/intro/exemples/strings.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let hello = "Hello, world!"; <i class="conum" data-value="1"></i><b>(1)</b>
assert!(!hello.is_empty());
assert_eq!(13, hello.len());

assert_eq!("Hello", &amp;hello[0..5]); <i class="conum" data-value="2"></i><b>(2)</b>
assert_eq!(Some("world"), hello.get(7..12));

println!("{}", hello); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>hello</code> est de type <code>&amp;'static str</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Extraction d&#8217;un sous-slice</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>La macro <code>println!</code> formate et affiche une chaÃ®ne sur la sortie standard</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_type_stdstringstring"><a class="anchor" href="#_type_stdstringstring"></a><a class="link" href="#_type_stdstringstring">Type <a href="https://doc.rust-lang.org/std/string/struct.String.html">std::string::String</a></a></h5>
<div class="ulist">
<ul>
<li>
<p>Le type <a href="https://doc.rust-lang.org/std/string/struct.String.html">std::string::String</a> est le type chaÃ®ne de caractÃ¨res proposÃ© par la bibliothÃ¨que standard</p>
</li>
<li>
<p>Une instance de ce type possÃ¨de la propriÃ©tÃ© du contenu de la chaÃ®ne</p>
</li>
<li>
<p>Quelques opÃ©rations :
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.new"><code>new</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.with_capacity"><code>with_capacity</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#impl-From%3C%26str%3E"><code>from</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.capacity"><code>capacity</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.clear"><code>clear</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.insert"><code>insert</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.is_empty"><code>is_empty</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.len"><code>len</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.push_str"><code>push_str</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#impl-Add%3C%26str%3E"><code>+</code></a> (concatÃ©nation),
<a href="https://doc.rust-lang.org/std/macro.format.html"><code>format!</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_2"><a class="anchor" href="#_exemple_2"></a><a class="link" href="#_exemple_2">Exemple</a></h5>
<div class="listingblock">
<div class="title">src/intro/exemples/strings.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let hello = "Hello".to_string(); <i class="conum" data-value="1"></i><b>(1)</b>
assert!(!hello.is_empty());
assert_eq!(5, hello.len());

let mut world = String::from("world");
assert_eq!(5, world.len());

let msg = hello + &amp;world;  <i class="conum" data-value="2"></i><b>(2)</b>
assert_eq!("Helloworld", msg);

world.insert_str(0, "Hello");
assert_eq!("Helloworld", world);

world.insert_str(5, ", ");
assert_eq!("Hello, world", world);

world.push_str(" !");
assert_eq!("Hello, world !", world);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>hello</code> et <code>world</code> sont de type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ConcatÃ¨ne les deux variables (<code>hello</code> est dÃ©placÃ©, <code>world</code> est empruntÃ©)</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/09_strings">rustlings</a>, <a href="https://practice.course.rs//compound-types/string.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/str.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_structures_de_contrÃ´le"><a class="anchor" href="#_structures_de_contrÃ´le"></a><a class="link" href="#_structures_de_contrÃ´le">1.3.18. Structures de contrÃ´le</a></h4>
<div class="sect4">
<h5 id="_conditionnelle"><a class="anchor" href="#_conditionnelle"></a><a class="link" href="#_conditionnelle">Conditionnelle</a></h5>
<div class="sect5">
<h6 id="_expression_if"><a class="anchor" href="#_expression_if"></a><a class="link" href="#_expression_if">Expression <a href="https://doc.rust-lang.org/reference/expressions/if-expr.html"><code>if</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let celsius = true; // false -&gt; Fahrenheit

let freeze_temp = if celsius { 0 } else { 32 }; <i class="conum" data-value="1"></i><b>(1)</b>
assert_eq!(0, freeze_temp);

let temperature = 12;
assert!(temperature &gt; freeze_temp);

if temperature &lt; freeze_temp { <i class="conum" data-value="2"></i><b>(2)</b>
    println!("Freezing");
} else {
    println!("Not freezing");
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>if</code> est une expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>if</code> peut Ãªtre utilisÃ©e comme une instruction</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_expression_match"><a class="anchor" href="#_expression_match"></a><a class="link" href="#_expression_match">Expression <a href="https://doc.rust-lang.org/reference/expressions/match-expr.html"><code>match</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let message = match temperature {
    -20 ..= -1 =&gt; "Froid", <i class="conum" data-value="1"></i><b>(1)</b>
    0 =&gt; "Limite", <i class="conum" data-value="2"></i><b>(2)</b>
    1 ..= 10 =&gt; "Frais",
    11 ..= 25 =&gt; "IdÃ©al",
    _ =&gt; "Insupportable", <i class="conum" data-value="3"></i><b>(3)</b>
};
assert_eq!("IdÃ©al", message);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/reference/expressions/range-expr.html">Intervalle</a> [-20, -1]</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La valeur 0</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Toutes les autres valeurs</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_boucles"><a class="anchor" href="#_boucles"></a><a class="link" href="#_boucles">Boucles</a></h5>
<div class="sect5">
<h6 id="_expression_loop"><a class="anchor" href="#_expression_loop"></a><a class="link" href="#_expression_loop">Expression <a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#infinite-loops"><code>loop</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut counter = 0;
let result = loop { <i class="conum" data-value="1"></i><b>(1)</b>
    counter += 1;
    if counter == 10 {
        break counter * 2; <i class="conum" data-value="2"></i><b>(2)</b>
    }
};
assert_eq!(20, result);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>la boucle se poursuit tant que le mot-clÃ© <code>break</code> n&#8217;est pas utilisÃ©</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>une expression <code>loop</code> terminÃ©e par <code>break</code> accepte une valeur de retour</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_expression_while"><a class="anchor" href="#_expression_while"></a><a class="link" href="#_expression_while">Expression <a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#predicate-loops"><code>while</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut number = 5;
while number != 0 { <i class="conum" data-value="1"></i><b>(1)</b>
    println!("{}", number);
    number -= 1;
}
assert_eq!(0, number);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>la boucle se poursuit tant que la condition est vraie</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_expression_for"><a class="anchor" href="#_expression_for"></a><a class="link" href="#_expression_for">Expression <a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#iterator-loops"><code>for</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let elements = [10, 20, 30, 40, 50];

for element in elements.iter() { <i class="conum" data-value="1"></i><b>(1)</b>
    println!("the value is: {}", element);
}

for number in (1..4).rev() { <i class="conum" data-value="2"></i><b>(2)</b>
    println!("{}!", number);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>for</code> permet d&#8217;itÃ©rer sur les Ã©lÃ©ments d&#8217;une collection</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>en utilisant le type <a href="https://doc.rust-lang.org/std/ops/struct.Range.html"><code>Range</code></a>, on peut manipuler des indices</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/03_if">rustlings</a>, <a href="https://practice.course.rs//flow-control.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fonction"><a class="anchor" href="#_fonction"></a><a class="link" href="#_fonction">1.3.19. Fonction</a></h4>
<div class="ulist">
<ul>
<li>
<p>La dÃ©finition d&#8217;une <a href="https://doc.rust-lang.org/book/ch03-03-how-functions-work.html">fonction</a> est introduite par le mot-clÃ© <code>fn</code></p>
</li>
<li>
<p>Par convention, le nom de la fonction est Ã©crit en <em>snake case</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Snake_case"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>Les paramÃ¨tres sont entre parenthÃ¨ses et leurs types doivent Ãªtre prÃ©cisÃ©s</p>
</li>
<li>
<p>Le corps de la fonction est entre accolades <code>{ }</code></p>
<div class="listingblock">
<div class="title">src/intro/exemples/function.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn another_function(x: i32) {
    println!("The value of x is: {}", x);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Une fonction retourne la valeur de la derniÃ¨re expression ou l&#8217;argument de <code>return</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn five() -&gt; i32 { <i class="conum" data-value="1"></i><b>(1)</b>
    5
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>l&#8217;annotation de type aprÃ¨s <code>&#8594;</code> prÃ©cise le type de retour
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
pour pouvoir Ãªtre retournÃ©e, la derniÃ¨re ligne d&#8217;une fonction <strong>doit Ãªtre une expression</strong> (pas de <code>;</code>). Une instruction (terminÃ©e par un <code>;</code>) provoquerait une erreur de compilation.
</td>
</tr>
</table>
</div></td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/02_functions">rustlings</a>, <a href="https://practice.course.rs//basic-types/functions.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/fn.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_systÃ¨me_de_modules"><a class="anchor" href="#_systÃ¨me_de_modules"></a><a class="link" href="#_systÃ¨me_de_modules">1.3.20. SystÃ¨me de modules</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust supporte diffÃ©rents moyens pour organiser un projet</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Package
</td>
<td class="hdlist2">
<p>permet de construire, tester et partager des crates avec Cargo</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Crate
</td>
<td class="hdlist2">
<p>est un arbre de modules produisant une bibliothÃ¨que ou un exÃ©cutable</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Module
</td>
<td class="hdlist2">
<p>permet de contrÃ´ler l&#8217;organisation, l&#8217;encapsulation et la portÃ©e des <em>paths</em> (avec <code>use</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Path
</td>
<td class="hdlist2">
<p>est un moyen de nommer un item (fonction, module, â¦)</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Le mot-clÃ© <code>use</code> importe un <em>path</em> dans la portÃ©e courante</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use std::fmt::Result;
use std::io::Result as IoResult;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
ExpÃ©rimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/10_modules">rustlings</a>, <a href="https://practice.course.rs//crate-module/intro.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/mod.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_bibliothÃ¨ques"><a class="anchor" href="#_bibliothÃ¨ques"></a><a class="link" href="#_bibliothÃ¨ques">1.3.21. BibliothÃ¨ques</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust est distribuÃ© avec une riche <a href="https://doc.rust-lang.org/std/index.html">bibliothÃ¨que standard</a></p>
<div class="ulist">
<ul>
<li>
<p>accessible par le <em>path</em> <code>std</code></p>
</li>
<li>
<p>le module <a href="https://doc.rust-lang.org/std/prelude/index.html"><code>std::prelude</code></a> est automatiquement importÃ© dans chaque programme</p>
</li>
<li>
<p>contient entre autre des types importants comme <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> et <a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>Option&lt;T&gt;</code></a>, des <a href="https://doc.rust-lang.org/std/index.html#primitives">opÃ©rations</a> sur les types primitifs, des <a href="https://doc.rust-lang.org/std/index.html#macros">macros</a> et des abstractions pour les <a href="https://doc.rust-lang.org/std/io/index.html">I/O</a> et le <a href="https://doc.rust-lang.org/std/thread/index.html">multithreading</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>BibliothÃ¨ques externes avec Cargo et <a href="https://crates.io/">crates.io</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_quelques_types_et_modules_importants"><a class="anchor" href="#_quelques_types_et_modules_importants"></a><a class="link" href="#_quelques_types_et_modules_importants">1.3.22. Quelques types et modules importants</a></h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/ops/struct.Range.html"><code>Range</code></a>
</td>
<td class="hdlist2">
<p>reprÃ©sente un intervalle (littÃ©ral <code>start..end</code>) (<a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control/for.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.tuple.html"><code>Tuple</code></a>
</td>
<td class="hdlist2">
<p>une sÃ©quence finie et hÃ©tÃ©rogÃ¨ne d&#8217;Ã©lÃ©ments (littÃ©ral <code>("hello", 5, 'c')</code>) (<a href="https://practice.course.rs//compound-types/tuple.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives/tuples.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/1.54.0/std/primitive.array.html"><code>Tableau</code></a>
</td>
<td class="hdlist2">
<p>un tableau de taille fixe d&#8217;Ã©lÃ©ments de mÃªme type (littÃ©ral <code>[x, y, z]</code> ou <code>[x; N]</code>) (<a href="https://practice.course.rs//compound-types/array.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives/array.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>un tableau de taille variable (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/05_vecs">rustlings</a>, <a href="https://practice.course.rs//collections/vector.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/vec.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/result/index.html"><code>Result&lt;T, E&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour retourner et propager une erreur (<a href="https://practice.course.rs//result-panic/result.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/result.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/option/index.html"><code>Option&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour reprÃ©senter une valeur optionnel (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/12_options">rustlings</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/option.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/collections/index.html">std::collections</a>
</td>
<td class="hdlist2">
<p>manipulation de collections</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/fmt/index.html">std::fmt</a>
</td>
<td class="hdlist2">
<p>formatage de chaÃ®nes de caractÃ¨res (<a href="https://practice.course.rs//formatted-output/formatting.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/hello/print.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/io/index.html">std::io</a>
</td>
<td class="hdlist2">
<p>gestion des I/O (<a href="https://doc.rust-lang.org/stable/rust-by-example/std_misc/file.html">Rust by Example</a>)</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©fÃ©rences_2"><a class="anchor" href="#_rÃ©fÃ©rences_2"></a><a class="link" href="#_rÃ©fÃ©rences_2">1.3.23. RÃ©fÃ©rences</a></h4>
<div class="sect4">
<h5 id="_documentation_officielle"><a class="anchor" href="#_documentation_officielle"></a><a class="link" href="#_documentation_officielle">Documentation officielle</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.rust-lang.org/fr/">Site officiel</a></p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/book/">The Rust Programming Language</a>, <em>Steve Klabnik and Carol Nichols</em></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://rust-book.cs.brown.edu/">version avec quizz</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://doc.rust-lang.org/std/index.html">Documentation</a> de la bibliothÃ¨que standard</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/reference/index.html">RÃ©fÃ©rence</a> du langage</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/nomicon/intro.html">The Rustonomicon</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_autres_documents"><a class="anchor" href="#_autres_documents"></a><a class="link" href="#_autres_documents">Autres documents</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://google.github.io/comprehensive-rust/">Comprehensive Rust</a>, Google</p>
</li>
<li>
<p><a href="https://stevedonovan.github.io/rust-gentle-intro/">A Gentle Introduction To Rust</a>, <em>Steve Donovan</em></p>
</li>
<li>
<p><a href="https://blog.guillaume-gomez.fr/Rust/">Tutoriel Rust</a>, <em>Guillaume Gomez</em></p>
</li>
<li>
<p><a href="https://www.lurklurk.org/effective-rust/title-page.html">Effective Rust</a>, <em>David Drysdale</em>, 2024</p>
</li>
<li>
<p><a href="https://cliffle.com/p/dangerust/">Learn Rust the Dangerous Way</a>, <em>Cliff L. Biffle</em>, 2024</p>
</li>
<li>
<p><a href="https://cheats.rs/">Rust Language Cheat Sheet</a>, <em>Ralf Biedert</em></p>
</li>
<li>
<p><a href="https://serokell.io/blog/learn-rust">17 Resources to Help You Learn Rust in 2022</a>, <em>Gints Dreimanis</em>, 2022</p>
</li>
<li>
<p><a href="https://grasland.pages.in2p3.fr/rust-cpp-intro/">Rust vu du C++</a>, <em>Hadrien Grasland</em>, 2023</p>
</li>
<li>
<p><a href="https://blog.jetbrains.com/fr/rust/2024/11/22/comment-se-former-a-rust-en-2024-un-guide-complet-pour-aider-les-debutants-a-maitriser-la-programmation-rust/">Comment se former Ã  Rust en 2024</a>, <em>JetBrains</em>, 2024</p>
</li>
<li>
<p><a href="https://discord.com/blog/why-discord-is-switching-from-go-to-rust">Pourquoi Discord passe de Go Ã  Rust</a>, <em>Jesse Howarth</em>, 2020</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_apprendre_en_codant"><a class="anchor" href="#_apprendre_en_codant"></a><a class="link" href="#_apprendre_en_codant">Apprendre en codant</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://play.rust-lang.org/">Playground</a> (coder dans le navigateur)</p>
</li>
<li>
<p><a href="https://github.com/rust-lang/rustlings/">rustlings</a> (ensemble d&#8217;exercices pour apprendre le langage)</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/stable/rust-by-example/">Rust by Example</a> (exemples exÃ©cutables dans le navigateur)</p>
</li>
<li>
<p><a href="https://practice.course.rs//why-exercise.html">Rust by practice</a></p>
</li>
<li>
<p><a href="https://rust-unofficial.github.io/too-many-lists/">Learn Rust With Entirely Too Many Linked Lists</a></p>
</li>
<li>
<p><a href="https://jrdngr.github.io/pngme_book/">PNGme: An Intermediate Rust Project</a>, 2024</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sujets_spÃ©cifiques"><a class="anchor" href="#_sujets_spÃ©cifiques"></a><a class="link" href="#_sujets_spÃ©cifiques">Sujets spÃ©cifiques</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://corrode.dev/blog/prototyping/">Prototyping in Rust</a>, <em>Matthias Endler</em>, 2025</p>
</li>
<li>
<p><a href="https://www.howtocodeit.com/articles/ultimate-guide-rust-newtypes#what-are-newtype-wrappers-in-rust">The ultimate guide to Rust newtypes</a>, <em>How To Code It</em>, 2023</p>
</li>
<li>
<p><a href="https://www.howtocodeit.com/articles/the-definitive-guide-to-rust-error-handling">The definitive guide to error handling in Rust</a>, <em>How To Code It</em>, 2024</p>
</li>
<li>
<p><a href="https://sabrinajewson.org/blog/errors">Modular Errors in Rust</a>, <em>Sabrina Jewson</em>, 2023</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_outils_de_dÃ©veloppement"><a class="anchor" href="#_outils_de_dÃ©veloppement"></a><a class="link" href="#_outils_de_dÃ©veloppement">2. Outils de dÃ©veloppement</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_au_delÃ _de_lÃ©diteur_et_du_compilateur"><a class="anchor" href="#_au_delÃ _de_lÃ©diteur_et_du_compilateur"></a><a class="link" href="#_au_delÃ _de_lÃ©diteur_et_du_compilateur">2.1. Au delÃ  de l&#8217;Ã©diteur et du compilateur</a></h3>
<div class="ulist">
<ul>
<li>
<p>Les outils Ã  la disposition d&#8217;un dÃ©veloppeur de logiciels ne se limite pas Ã  un Ã©diteur de texte et un compilateur/interprÃ©teur</p>
</li>
<li>
<p>De nombreux outils existent pour assister le dÃ©veloppeur dans ses multiples tÃ¢ches:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Ãcrire du code et collaborer
</td>
<td class="hdlist2">
<p>Ã©diteurs de texte, environnements de dÃ©veloppement intÃ©grÃ©s, gestion de versions</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ExÃ©cution contrÃ´lÃ©e d&#8217;un programme
</td>
<td class="hdlist2">
<p>dÃ©bogage, tests et profilage</p>
</td>
</tr>
<tr>
<td class="hdlist1">
QualitÃ© du code et documentation
</td>
<td class="hdlist2">
<p>styles de codage, gÃ©nÃ©ration de documentation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Construction dâun projet
</td>
<td class="hdlist2">
<p>automatisation de la gestion de la compilation et des dÃ©pendances</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Livraison et dÃ©ploiement
</td>
<td class="hdlist2">
<p>automatisations et livraison continue</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_au_niveau_du_systÃ¨me_dexploitation"><a class="anchor" href="#_au_niveau_du_systÃ¨me_dexploitation"></a><a class="link" href="#_au_niveau_du_systÃ¨me_dexploitation">2.2. Au niveau du systÃ¨me d&#8217;exploitation</a></h3>
<div class="sect3">
<h4 id="_introduction_2"><a class="anchor" href="#_introduction_2"></a><a class="link" href="#_introduction_2">2.2.1. Introduction</a></h4>
<div class="ulist">
<ul>
<li>
<p>De nombreux outils gÃ©nÃ©ralistes peuvent Ãªtre d&#8217;une grande aide pour le dÃ©veloppeur</p>
</li>
<li>
<p>Certains sont directement intÃ©grÃ©s Ã  l&#8217;OS</p>
</li>
<li>
<p>D&#8217;autres peuvent y Ãªtre avantageusement ajoutÃ©s</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shells"><a class="anchor" href="#_shells"></a><a class="link" href="#_shells">2.2.2. Shells</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>Shell</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interface_syst%C3%A8me"><i class="fa fa-wikipedia-w"></i></a></span></sup> (ou <em>interprÃ©teur de commandes</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interpr%C3%A9teur_de_commandes"><i class="fa fa-wikipedia-w"></i></a></span></sup>) est l&#8217;interface en ligne de commande<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interface_en_ligne_de_commande"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Command Line Interface</em> ou <em>CLI</em>) permettant d&#8217;interagir avec le systÃ¨me d&#8217;exploitation</p>
</li>
<li>
<p>C&#8217;est un outil important que doit maÃ®triser un dÃ©veloppeur</p>
</li>
<li>
<p>Ã l&#8217;aide du langage de script qu&#8217;il intÃ¨gre, le shell fournit un puissant moyen pour l&#8217;automatisation de tÃ¢ches rÃ©currentes</p>
</li>
<li>
<p>Il peut Ãªtre largement personnalisÃ© et adaptÃ© grÃ¢ce aux fichiers d&#8217;initialisation (<em>dot files</em> sous Unix)</p>
</li>
</ul>
</div>
<div class="hdlist">
<div class="title">Quelques shells</div>
<table>
<tr>
<td class="hdlist1">
Unix/Linux/Mac OS
</td>
<td class="hdlist2">
<p><a href="http://www.gnu.org/software/bash/">bash</a> <sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Bourne-Again_shell"><i class="fa fa-wikipedia-w"></i></a></span></sup>, <a href="https://www.zsh.or/">zsh</a> <sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Z_Shell"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Windows
</td>
<td class="hdlist2">
<p><a href="https://docs.microsoft.com/en-us/powershell/">PowerShell</a> <sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Windows_PowerShell"><i class="fa fa-wikipedia-w"></i></a></span></sup>, cmd<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Cmd"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Shell
</td>
<td class="hdlist2">
<p><a href="https://github.com/alebcay/awesome-shell">Awesome Shell</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
bash
</td>
<td class="hdlist2">
<p><a href="https://opensource.com/article/19/12/bash-resources">10 resources to become a better Bash user</a>,
<a href="https://github.com/awesome-lists/awesome-bash">Awesome Bash</a>,
<a href="https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html">Bash Guide for Beginners</a>,
<a href="https://tldp.org/LDP/abs/html/">Advanced Bash-Scripting Guide</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
zsh
</td>
<td class="hdlist2">
<p><a href="https://ohmyz.sh/">Oh My Zsh</a>,
<a href="https://github.com/unixorn/awesome-zsh-plugins">awesome-zsh-plugins</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Dotfiles
</td>
<td class="hdlist2">
<p><a href="https://medium.com/@webprolific/getting-started-with-dotfiles-43c3602fd789">Getting Started With Dotfiles</a>,
<a href="https://github.com/webpro/awesome-dotfiles">Awesome dotfiles</a>,
<a href="https://dotfiles.github.io/">Unofficial guide to dotfiles on GitHub</a>,
<a href="https://wiki.archlinux.org/index.php/Dotfiles">Dotfiles</a> (ArchWiki)</p>
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_outils_en_ligne_de_commande"><a class="anchor" href="#_outils_en_ligne_de_commande"></a><a class="link" href="#_outils_en_ligne_de_commande">2.2.3. Outils en ligne de commande</a></h4>
<div class="sect4">
<h5 id="_manipulation_de_fichiers"><a class="anchor" href="#_manipulation_de_fichiers"></a><a class="link" href="#_manipulation_de_fichiers">Manipulation de fichiers</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://the.exa.website/">exa</a> / ls<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Ls"><i class="fa fa-wikipedia-w"></i></a></span></sup> / tree<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Tree_(command)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>bat<sup><span class="icon"><a class="image" href="https://github.com/sharkdp/bat"><i class="fa fa-github"></i></a></span></sup> / cat<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Cat_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>fzf<sup><span class="icon"><a class="image" href="https://github.com/junegunn/fzf"><i class="fa fa-github"></i></a></span></sup></p>
</li>
<li>
<p>fd<sup><span class="icon"><a class="image" href="https://github.com/sharkdp/fd"><i class="fa fa-github"></i></a></span></sup> / <a href="https://www.gnu.org/software/findutils/">find</a></p>
</li>
<li>
<p>rg<sup><span class="icon"><a class="image" href="https://github.com/BurntSushi/ripgrep"><i class="fa fa-github"></i></a></span></sup> / skim<sup><span class="icon"><a class="image" href="https://github.com/lotabout/skim"><i class="fa fa-github"></i></a></span></sup> / <a href="https://www.gnu.org/software/grep/">grep</a></p>
</li>
<li>
<p>dust<sup><span class="icon"><a class="image" href="https://github.com/bootandy/dust"><i class="fa fa-github"></i></a></span></sup> / <a href="https://dev.yorhel.nl/ncdu">ncdu</a> / du<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Du_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>duf<sup><span class="icon"><a class="image" href="https://github.com/muesli/duf"><i class="fa fa-github"></i></a></span></sup> / df<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Df_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>sd<sup><span class="icon"><a class="image" href="https://github.com/chmln/sd"><i class="fa fa-github"></i></a></span></sup> / sed<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Stream_Editor"><i class="fa fa-wikipedia-w"></i></a></span></sup> / awk<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Awk"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>tokei<sup><span class="icon"><a class="image" href="https://github.com/XAMPPRocky/tokei"><i class="fa fa-github"></i></a></span></sup></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_gestion_de_processusmÃ©moire"><a class="anchor" href="#_gestion_de_processusmÃ©moire"></a><a class="link" href="#_gestion_de_processusmÃ©moire">Gestion de processus/mÃ©moire</a></h5>
<div class="ulist">
<ul>
<li>
<p>hyperfine<sup><span class="icon"><a class="image" href="https://github.com/sharkdp/hyperfine"><i class="fa fa-github"></i></a></span></sup> / time<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Time_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>procs<sup><span class="icon"><a class="image" href="https://github.com/dalance/procs"><i class="fa fa-github"></i></a></span></sup> / ps<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Ps_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p><a href="https://htop.dev/">htop</a> / bottom<sup><span class="icon"><a class="image" href="https://github.com/ClementTsang/bottom"><i class="fa fa-github"></i></a></span></sup> / top<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Top_(software)"><i class="fa fa-wikipedia-w"></i></a></span></sup> / free<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Free_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_outils_rÃ©seaux"><a class="anchor" href="#_outils_rÃ©seaux"></a><a class="link" href="#_outils_rÃ©seaux">Outils rÃ©seaux</a></h5>
<div class="ulist">
<ul>
<li>
<p>ssh<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Secure_Shell"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>tmux<sup><span class="icon"><a class="image" href="https://github.com/tmux/tmux/wiki"><i class="fa fa-github"></i></a></span></sup> / tmuxinator<sup><span class="icon"><a class="image" href="https://github.com/tmuxinator/tmuxinator"><i class="fa fa-github"></i></a></span></sup> / Oh my tmux!<sup><span class="icon"><a class="image" href="https://github.com/gpakosz/.tmux"><i class="fa fa-github"></i></a></span></sup> / <a href="https://www.byobu.org/">byobu</a> / <a href="https://www.gnu.org/software/screen/">screen</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©fÃ©rences_3"><a class="anchor" href="#_rÃ©fÃ©rences_3"></a><a class="link" href="#_rÃ©fÃ©rences_3">2.2.4. RÃ©fÃ©rences</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://zaiste.net/posts/shell-commands-rust/">Rewritten in Rust: Modern Alternatives of Command-Line Tools</a></p>
</li>
<li>
<p><a href="https://www.wezm.net/technical/2019/10/useful-command-line-tools/">An Illustrated Guide to Some Useful Command Line Tools</a></p>
</li>
<li>
<p><a href="https://bios-blog.com/handy-shell-tools/">Handy Shell Tools</a></p>
</li>
<li>
<p><a href="https://ivergara.github.io/Supercharging-shell.html">Supercharging the shell</a></p>
</li>
<li>
<p><a href="https://missing.csail.mit.edu/2020/shell-tools/">Shell Tools and Scripting</a></p>
</li>
<li>
<p><a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html">Command-line Tools can be 235x Faster than your Hadoop Cluster</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_Ã©crire_du_code_et_collaborer"><a class="anchor" href="#_Ã©crire_du_code_et_collaborer"></a><a class="link" href="#_Ã©crire_du_code_et_collaborer">2.3. Ãcrire du code et collaborer</a></h3>
<div class="sect3">
<h4 id="_Ã©diteur_de_texte"><a class="anchor" href="#_Ã©diteur_de_texte"></a><a class="link" href="#_Ã©diteur_de_texte">2.3.1. Ãditeur de texte</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>Ã©diteur de texte</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Text_editor"><i class="fa fa-wikipedia-w"></i></a></span></sup> permet l&#8217;Ã©dition de fichiers en texte brut (par opposition aux traitements de texte).</p>
</li>
<li>
<p>C&#8217;est un outil indispensable pour rÃ©diger le code source d&#8217;un programme.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">FonctionnalitÃ©s d&#8217;un Ã©diteur de texte pour dÃ©velopper</div>
<ul>
<li>
<p>Support des jeux de caractÃ¨res Ã©tendus<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res"><i class="fa fa-wikipedia-w"></i></a></span></sup> (UTF-8<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/UTF-8"><i class="fa fa-wikipedia-w"></i></a></span></sup>, Latin-1<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/ISO/CEI_8859-1"><i class="fa fa-wikipedia-w"></i></a></span></sup>, â¦)</p>
</li>
<li>
<p>DÃ©faire/refaire, couper/copier/coller, rechercher/remplacer, â¦</p>
</li>
<li>
<p>Support des expressions rationnelles<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Expression_r%C3%A9guli%C3%A8re"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>regex</em>)</p>
</li>
<li>
<p>Aides Ã  la saisie (coloration syntaxique, indentation automatique, reformatage, â¦)</p>
</li>
<li>
<p>Pliage (<em>folding</em>)/dÃ©pliage (<em>unfolding</em>) de texte</p>
</li>
<li>
<p><em>Snippet</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Snippet_(programming)"><i class="fa fa-wikipedia-w"></i></a></span></sup> (insertion de texte type)</p>
</li>
<li>
<p>Index des fonctions (<em>ctags</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Ctags"><i class="fa fa-wikipedia-w"></i></a></span></sup>, â¦)</p>
</li>
<li>
<p>Appel de programmes externes (compilateur, â¦)</p>
</li>
<li>
<p>Support de projets (ensemble de fichiers avec une configuration)</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Quelques Ã©diteurs de texte</div>
<ul>
<li>
<p><a href="https://code.visualstudio.com/">Visual Studio Code</a></p>
</li>
<li>
<p><a href="https://www.vim.org/">Vim</a>, <a href="http://en.wikipedia.org/wiki/Vi">Vi</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Emacs">Emacs</a></p>
</li>
<li>
<p><a href="http://notepad-plus.sourceforge.net">Notepad++</a></p>
</li>
<li>
<p><a href="https://www.sublimetext.com/">Sublime Text</a></p>
</li>
<li>
<p><a href="https://atom.io/">Atom</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_environnement_de_dÃ©veloppement_intÃ©grÃ©"><a class="anchor" href="#_environnement_de_dÃ©veloppement_intÃ©grÃ©"></a><a class="link" href="#_environnement_de_dÃ©veloppement_intÃ©grÃ©">2.3.2. Environnement de dÃ©veloppement intÃ©grÃ©</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>environnement de dÃ©veloppement intÃ©grÃ©</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Integrated_development_environment"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Integrated Development Environment</em> ou <em>IDE</em>) regroupe et intÃ¨gre un ensemble d&#8217;outils de dÃ©veloppement</p>
<div class="ulist">
<ul>
<li>
<p>Ã©diteur de code source,</p>
</li>
<li>
<p>compilateur/interprÃ©teur,</p>
</li>
<li>
<p>dÃ©bogueur,</p>
</li>
<li>
<p>un navigateur de classes,</p>
</li>
<li>
<p>un ou plusieurs systÃ¨mes de gestion de versions</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Principales fonctionnalitÃ©s d&#8217;un IDE</div>
<ul>
<li>
<p>Gestion de projets (fichiers, dÃ©pendances, configuration, â¦)</p>
</li>
<li>
<p>Auto-complÃ©tion de code</p>
</li>
<li>
<p>Navigation dans les classes</p>
</li>
<li>
<p><em>Refactoring</em></p>
</li>
<li>
<p>DÃ©bogage</p>
</li>
<li>
<p>Profiling</p>
</li>
<li>
<p>Gestion de versions</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Quelques IDE</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">Rust support for Visual Studio Code</a>,
<a href="https://plugins.jetbrains.com/plugin/8182-rust">Plugin</a> Rust pour IntelliJ,
<a href="https://www.rust-lang.org/tools">Rust tools</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.bluej.org/">BlueJ</a>,
<a href="https://www.jetbrains.com/idea/">IntelliJ IDEA</a>,
<a href="https://www.eclipse.org">Eclipse</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://pythonhosted.org/spyder/">Spyder</a>,
<a href="https://www.jetbrains.com/pycharm/">PyCharm</a>,
<a href="http://www.pydev.org/">PyDev</a>,
<a href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.python">Python pour VS Code</a>,
<a href="https://microsoft.github.io/PTVS/">Python Tools for Visual Studio</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gestion_des_versions"><a class="anchor" href="#_gestion_des_versions"></a><a class="link" href="#_gestion_des_versions">2.3.3. Gestion des versions</a></h4>
<div class="ulist">
<ul>
<li>
<p>La <em>gestion de versions</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Version_control"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>version control</em>, <em>revision control</em>, <em>source control</em> ou <em>source code management (SCM)</em>) consiste Ã  maintenir l&#8217;ensemble des versions d&#8217;un ou plusieurs documents</p>
</li>
<li>
<p>La gestion de versions concerne principalement le dÃ©veloppement logiciel mais peut Ãªtre utilisÃ©e pour tout document informatique</p>
</li>
<li>
<p>C&#8217;est une activitÃ© fastidieuse et source d&#8217;erreurs qui bÃ©nÃ©ficie d&#8217;une faÃ§on importante d&#8217;un support logiciel (<em>systÃ¨me de gestion de versions</em>, <em>version control system (VCS)</em>)</p>
</li>
<li>
<p>De nombreuses applications proposent ce genre de fonction (<em>Wiki</em>, <em>LibreOffice</em>, <em>Microsoft Word</em>, â¦)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_systÃ¨me_de_gestion_de_versions"><a class="anchor" href="#_systÃ¨me_de_gestion_de_versions"></a><a class="link" href="#_systÃ¨me_de_gestion_de_versions">SystÃ¨me de gestion de versions</a></h5>
<div class="ulist">
<div class="title">Un <em>systÃ¨me de gestion de versions</em> (VCS)</div>
<ul>
<li>
<p>Permet la gestion des versions successives d&#8217;un ensemble de documents</p>
<div class="ulist">
<ul>
<li>
<p>conserve toutes les versions successives dans un <em>rÃ©fÃ©rentiel</em> ou <em>dÃ©pÃ´t</em> (<em>repository</em>)
Â·** permet de naviguer entre les versions</p>
</li>
</ul>
</div>
</li>
<li>
<p>Permet le travail collaboratif</p>
<div class="ulist">
<ul>
<li>
<p>chaque utilisateur travaille sur une copie locale</p>
</li>
<li>
<p>le systÃ¨me signale les conflits</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pÃ©rimÃ¨tre_dutilisation_des_vcs"><a class="anchor" href="#_pÃ©rimÃ¨tre_dutilisation_des_vcs"></a><a class="link" href="#_pÃ©rimÃ¨tre_dutilisation_des_vcs">PÃ©rimÃ¨tre d&#8217;utilisation des VCS</a></h5>
<div class="ulist">
<ul>
<li>
<p>Gestion d&#8217;un ensemble de fichiers textes</p>
<div class="ulist">
<ul>
<li>
<p>code source</p>
</li>
<li>
<p>pages html, xml, â¦</p>
</li>
<li>
<p>documents LaTeX</p>
</li>
</ul>
</div>
</li>
<li>
<p>Supportent l&#8217;organisation en hiÃ©rarchie de rÃ©pertoires et les mÃ©tadonnÃ©es (permissions, â¦)</p>
</li>
<li>
<p>Supportent Ã©galement les fichiers binaires (moins adaptÃ©)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_modÃ¨les_pour_la_gestion_de_version"><a class="anchor" href="#_modÃ¨les_pour_la_gestion_de_version"></a><a class="link" href="#_modÃ¨les_pour_la_gestion_de_version">ModÃ¨les pour la gestion de version</a></h5>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Sans contrÃ´le, la modification d&#8217;un mÃªme fichier par plusieurs personnes au mÃªme moment risque de gÃ©nÃ©rer des incohÃ©rences.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Approche par verrouillage (<em>locking</em>)</div>
<ul>
<li>
<p>un fichier doit Ãªtre verrouillÃ© avant une modification</p>
</li>
<li>
<p>une seule personne peut le modifier Ã  un instant donnÃ© (approche <em>pessimiste</em>)</p>
</li>
<li>
<p>simple mais rÃ©duit considÃ©rablement la concurrence</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approche par fusion (<em>merging</em>)</div>
<ul>
<li>
<p>plusieurs personnes peuvent modifier un fichier en parallÃ¨le (approche <em>optimiste</em>)</p>
</li>
<li>
<p>le systÃ¨me s&#8217;occupe de fusionner les diffÃ©rentes modifications</p>
</li>
<li>
<p>certains cas ne peuvent pas Ãªtre traitÃ©s automatiquement (<em>conflits</em>)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_architecture_des_vcs"><a class="anchor" href="#_architecture_des_vcs"></a><a class="link" href="#_architecture_des_vcs">Architecture des VCS</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les premiers VCS ne supportaient qu&#8217;un mode local</p>
</li>
<li>
<p>La seconde gÃ©nÃ©ration fonctionnait selon un mode client/serveur (mode centralisÃ©)</p>
<div class="ulist">
<ul>
<li>
<p>le rÃ©fÃ©rentiel est centralisÃ©</p>
</li>
<li>
<p>tout doit Ãªtre reportÃ© sur ce rÃ©fÃ©rentiel</p>
</li>
<li>
<p>nÃ©cessite donc un accÃ¨s au rÃ©fÃ©rentiel pour la plupart des opÃ©rations</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les nouveaux VCS (<em>Distributed VCS</em> ou <em>DVCS</em>) supportent un mode pair Ã  pair (mode rÃ©parti)</p>
<div class="ulist">
<ul>
<li>
<p>chaque dÃ©veloppeur possÃ¨de son propre rÃ©fÃ©rentiel</p>
</li>
<li>
<p>un utilisateur peut rÃ©cupÃ©rer une partie d&#8217;un rÃ©fÃ©rentiel accessible (<em>pull</em>)</p>
</li>
<li>
<p>un utilisateur peut publier une partie de son rÃ©fÃ©rentiel dans un autre (<em>push</em>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_quelques_outils"><a class="anchor" href="#_quelques_outils"></a><a class="link" href="#_quelques_outils">Quelques outils</a></h5>
<div class="paragraph">
<div class="title">DistribuÃ©</div>
<p><a href="http://git-scm.com/">Git</a>,
<a href="https://www.mercurial-scm.org/">Mercurial</a>,</p>
</div>
<div class="paragraph">
<div class="title">Client-serveur</div>
<p><a href="http://subversion.apache.org/">Subversion</a>,
<a href="http://www.nongnu.org/cvs/">CVS</a>,</p>
</div>
<div class="paragraph">
<div class="title">Mode local</div>
<p><a href="http://cssc.sourceforge.net/">SCCS</a>,
<a href="http://www.cs.purdue.edu/homes/trinkle/RCS/">RCS</a>,</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_forge_logicielle"><a class="anchor" href="#_forge_logicielle"></a><a class="link" href="#_forge_logicielle">2.3.4. Forge logicielle</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <em>forge logicielle</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Forge_(software)"><i class="fa fa-wikipedia-w"></i></a></span></sup> est un systÃ¨me de gestion de dÃ©veloppement collaboratif.</p>
</li>
<li>
<p>Elle intÃ¨gre un ensemble d&#8217;outils dans une interface web et permet d&#8217;hÃ©berger un projet informatique Ã  l&#8217;aide d&#8217;un systÃ¨me de gestion de versions.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Outils intÃ©grÃ©s</div>
<ul>
<li>
<p>un systÃ¨me de gestion de version</p>
</li>
<li>
<p>des outils de collaboration (fils de discussion, â¦)</p>
</li>
<li>
<p>du suivi de tickets (bogues, â¦)</p>
</li>
<li>
<p>un gestionnaire de documentation (wiki par exemple)</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Quelques forges</div>
<ul>
<li>
<p><a href="https://github.com/">GitHub</a></p>
</li>
<li>
<p><a href="https://bitbucket.org/">Bitbucket</a></p>
</li>
<li>
<p><a href="https://gitlab.com/">GitLab</a></p>
</li>
<li>
<p><a href="https://sourceforge.net/">SourceForge</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dÃ©bogage_tests_et_profilage"><a class="anchor" href="#_dÃ©bogage_tests_et_profilage"></a><a class="link" href="#_dÃ©bogage_tests_et_profilage">2.4. DÃ©bogage, tests et profilage</a></h3>
<div class="sect3">
<h4 id="_dÃ©bogage"><a class="anchor" href="#_dÃ©bogage"></a><a class="link" href="#_dÃ©bogage">2.4.1. DÃ©bogage</a></h4>
<div class="sect4">
<h5 id="_bogue_dÃ©bogage_et_dÃ©bogueur"><a class="anchor" href="#_bogue_dÃ©bogage_et_dÃ©bogueur"></a><a class="link" href="#_bogue_dÃ©bogage_et_dÃ©bogueur">Bogue, dÃ©bogage et dÃ©bogueur</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un <em>bogue</em> (<em>bug</em>) est un dÃ©faut dans un programme qui l&#8217;empÃªche de fonctionner correctement</p>
</li>
<li>
<p>Le <em>dÃ©bogage</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Debugging"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>debugging</em>) est une activitÃ© ayant pour objectif de localiser les bogues dans un programme</p>
</li>
<li>
<p>Le dÃ©bogage est basÃ© sur la <em>confirmation</em></p>
<div class="ulist">
<ul>
<li>
<p>c&#8217;est un processus destinÃ© Ã  confirmer les choses que l&#8217;on croit vrai jusqu&#8217;Ã  en trouver une qui ne l&#8217;est pas</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un <em>dÃ©bogueur</em> (<em>debugger</em>) est un outil fournissant une aide pour le dÃ©bogage</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pourquoi_utiliser_un_dÃ©bogueur"><a class="anchor" href="#_pourquoi_utiliser_un_dÃ©bogueur"></a><a class="link" href="#_pourquoi_utiliser_un_dÃ©bogueur">Pourquoi utiliser un dÃ©bogueur ?</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Pour gagner du temps !</strong></p>
</li>
<li>
<p>Les alternatives sont moins efficaces (mais parfois utiles tout de mÃªme)</p>
<div class="ulist">
<ul>
<li>
<p>utiliser des affichages (<code>printf</code>, â¦)</p>
<div class="ulist">
<ul>
<li>
<p>perte de temps</p>
</li>
<li>
<p>beaucoup d&#8217;Ã©ditions/compilations pour ajouter/enlever les affichages</p>
</li>
<li>
<p>moins informatif</p>
</li>
</ul>
</div>
</li>
<li>
<p>utiliser une bibliothÃ¨que de journalisation<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Historique_(informatique)"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>logging</em>)</p>
<div class="ulist">
<ul>
<li>
<p>plus pratique que les affichages</p>
</li>
<li>
<p>moins informatif que le dÃ©bogueur</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_fonctionnalitÃ©s_dun_dÃ©bogueur"><a class="anchor" href="#_fonctionnalitÃ©s_dun_dÃ©bogueur"></a><a class="link" href="#_fonctionnalitÃ©s_dun_dÃ©bogueur">FonctionnalitÃ©s d&#8217;un dÃ©bogueur</a></h5>
<div class="ulist">
<ul>
<li>
<p>ExÃ©cution contrÃ´lÃ©e du programme</p>
<div class="ulist">
<ul>
<li>
<p>pas Ã  pas sommaire (sans entrer dans les fonctions)</p>
</li>
<li>
<p>pas Ã  pas dÃ©taillÃ©</p>
</li>
<li>
<p>retour en arriÃ¨re (plus rare)</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Points d&#8217;arrÃªt</em> (<em>breakpoints</em>)</p>
<div class="ulist">
<ul>
<li>
<p>repÃ¨re sur une instruction signalant au dÃ©bogueur qu&#8217;il doit faire un pause dans l&#8217;exÃ©cution lorsqu&#8217;il arrive Ã  cette instruction</p>
</li>
<li>
<p>peut Ãªtre Ã©galement associÃ© Ã  une condition</p>
</li>
<li>
<p>un <em>point d&#8217;observation</em> (<em>watchpoint</em>) stoppe le programme lorsque l&#8217;Ã©tat d&#8217;une expression change</p>
</li>
<li>
<p>un <em>catchpoint</em> fait de mÃªme quand un Ã©vÃ©nement se dÃ©clenche</p>
</li>
</ul>
</div>
</li>
<li>
<p>Visualisation de l&#8217;Ã©tat du programme</p>
<div class="ulist">
<ul>
<li>
<p>variables, pile d&#8217;appel, â¦</p>
</li>
<li>
<p>certains dÃ©bogueurs  permettent l&#8217;affichage de structure de donnÃ©es complexes</p>
</li>
</ul>
</div>
</li>
<li>
<p>Modification de l&#8217;Ã©tat du programme</p>
</li>
<li>
<p>DÃ©bogage Ã  distance</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_processus_de_dÃ©bogage"><a class="anchor" href="#_processus_de_dÃ©bogage"></a><a class="link" href="#_processus_de_dÃ©bogage">Processus de dÃ©bogage</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Tenter de reproduire le bogue</p>
</li>
<li>
<p>Simplifier les entrÃ©es du programme</p>
</li>
<li>
<p>ExÃ©cuter le programme sous le contrÃ´le du dÃ©bogueur</p>
</li>
<li>
<p>Se positionner Ã  l&#8217;endroit de l&#8217;erreur signalÃ©e ou au milieu du programme (pose d&#8217;un breakpoint) si aucune erreur n&#8217;est signalÃ©e</p>
</li>
<li>
<p>Examiner le contexte pour confirmer que les variables possÃ¨dent les valeurs attendues</p>
</li>
<li>
<p>DÃ©terminer la position suivante Ã  Ã©tudier et retourner en 5</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
NÃ©cessite de compiler le programme avec les informations de dÃ©bogage (option <code>-g</code> de <code>rustc</code>, <code>javac</code> ou de <code>gcc</code>)
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Quelques dÃ©bogueurs</div>
<ul>
<li>
<p><a href="http://www.gnu.org/software/gdb/gdb.html">GDB</a>/ <a href="http://www.gnu.org/software/ddd/">DDD</a></p>
</li>
<li>
<p><a href="https://blog.logrocket.com/debugging-rust-apps-with-gdb/">rust-gdb</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/pdb.html">pdb</a>/ <a href="https://github.com/gotcha/ipdb">ipdb</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tests"><a class="anchor" href="#_tests"></a><a class="link" href="#_tests">2.4.2. Tests</a></h4>
<div class="sect4">
<h5 id="_dÃ©finition_et_intÃ©rÃªt"><a class="anchor" href="#_dÃ©finition_et_intÃ©rÃªt"></a><a class="link" href="#_dÃ©finition_et_intÃ©rÃªt">DÃ©finition et intÃ©rÃªt</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les <em>tests</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Software_testing"><i class="fa fa-wikipedia-w"></i></a></span></sup> visent Ã  mettre en Ã©vidence des dÃ©fauts de l&#8217;Ã©lÃ©ment testÃ©</p>
</li>
<li>
<p>L&#8217;objectif final est bien sÃ»r de rÃ©duire le nombre de bogues prÃ©sents dans un programme</p>
</li>
<li>
<p>Un test est un ensemble de <em>cas Ã  tester</em> (conditions initiales, entrÃ©es, observations attendues)</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Un test ne permet pas de prouver l&#8217;absence de bogue (â  des mÃ©thodes formelles).</strong></p>
</div>
<div class="paragraph">
<p><em>Program testing can be a very effective way to show the presence of bugs, but it is hopelessly inadequate for showing their absence.</em> Edsger W. Dijkstra, Â« The Humble Programmer Â» (1972)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Il est impossible d&#8217;exÃ©cuter des tests exhaustifs dans la plupart des cas</p>
</li>
<li>
<p>Les tests sont toutefois une aide prÃ©cieuse pour amÃ©liorer la qualitÃ© du logiciel</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_quelques_types_de_tests"><a class="anchor" href="#_quelques_types_de_tests"></a><a class="link" href="#_quelques_types_de_tests">Quelques types de tests</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un test <em>boite blanche</em> (<em>white box</em>) s&#8217;appuie sur une connaissance de la structure interne de l&#8217;Ã©lÃ©ment Ã  tester</p>
</li>
<li>
<p>Un test <em>boite noire</em> (<em>black box</em>) s&#8217;appuie sur les spÃ©cifications de l&#8217;Ã©lÃ©ment</p>
</li>
<li>
<p>Un test de <em>non rÃ©gression</em> vÃ©rifie que le systÃ¨me ne se dÃ©grade pas lors de ses Ã©volutions</p>
</li>
<li>
<p>Un test <em>fonctionnel</em> s&#8217;assure que les rÃ©sultats attendus sont bien obtenus</p>
</li>
<li>
<p>Un test <em>non fonctionnel</em> analyse les propriÃ©tÃ©s non fonctionnelles d&#8217;un systÃ¨me</p>
<div class="ulist">
<ul>
<li>
<p>test <em>des performances</em> pour vÃ©rifier l&#8217;efficacitÃ© du systÃ¨me</p>
</li>
<li>
<p>test <em>de sÃ©curitÃ©</em> pour s&#8217;assurer du respect des rÃ¨gles de confidentialitÃ©</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_granularitÃ©_de_tests"><a class="anchor" href="#_granularitÃ©_de_tests"></a><a class="link" href="#_granularitÃ©_de_tests">GranularitÃ© de tests</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Unitaire
</td>
<td class="hdlist2">
<p>Les tests unitaires vÃ©rifient la conformitÃ© des Ã©lÃ©ments de base d&#8217;un programme (fonctions, classes, â¦) et sont en gÃ©nÃ©ral rÃ©alisÃ©s par le dÃ©veloppeur.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
IntÃ©gration
</td>
<td class="hdlist2">
<p>Les tests d&#8217;intÃ©gration vÃ©rifient la cohÃ©rence des diffÃ©rents modules et la bonne communication entre eux.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SystÃ¨me
</td>
<td class="hdlist2">
<p>Les tests systÃ¨mes concernent l&#8217;ensemble du projet et son intÃ©gration dans son environnement.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Recette
</td>
<td class="hdlist2">
<p>Les tests de recette (ou d&#8217;acceptation) confirment la conformitÃ© du systÃ¨me avec les besoins.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_intÃ©gration_au_processus_de_dÃ©veloppement"><a class="anchor" href="#_intÃ©gration_au_processus_de_dÃ©veloppement"></a><a class="link" href="#_intÃ©gration_au_processus_de_dÃ©veloppement">IntÃ©gration au processus de dÃ©veloppement</a></h5>
<div class="ulist">
<ul>
<li>
<p>GÃ©nÃ©ralement (cycle de dÃ©veloppement en V par exemple), les tests sont rÃ©alisÃ©s par un groupe de testeurs aprÃ¨s la rÃ©alisation des fonctionnalitÃ©s</p>
</li>
<li>
<p>Une pratique encouragÃ©e par les mÃ©thodes Agiles et XP consiste Ã  dÃ©buter le processus par les tests (<em>DÃ©veloppement dirigÃ© par les tests</em>)</p>
</li>
</ul>
</div>
<div class="hdlist">
<div class="title">Quelques outils pour les tests</div>
<table>
<tr>
<td class="hdlist1">
Unitaires et d&#8217;intÃ©gration
</td>
<td class="hdlist2">
<p>cf. ci-dessous.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Fonctionnel<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Functional_testing"><i class="fa fa-wikipedia-w"></i></a></span></sup>
</td>
<td class="hdlist2">
<p><a href="http://fit.c2.com/">Fit</a>, <a href="http://fitnesse.org/">FitNesse</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Non fonctionnels<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Non-functional_testing"><i class="fa fa-wikipedia-w"></i></a></span></sup>
</td>
<td class="hdlist2">
<p><a href="http://jakarta.apache.org/jmeter/">Apache JMeter</a>, <a href="http://www.clarkware.com/software/JUnitPerf.html">JUnitPerf</a>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tests_unitaires"><a class="anchor" href="#_tests_unitaires"></a><a class="link" href="#_tests_unitaires">2.4.3. Tests unitaires</a></h4>
<div class="sect4">
<h5 id="_dÃ©finition_et_objectifs"><a class="anchor" href="#_dÃ©finition_et_objectifs"></a><a class="link" href="#_dÃ©finition_et_objectifs">DÃ©finition et objectifs</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un <em>test unitaire</em> (<em>unit test</em>) vise Ã  augmenter la confiance du programmeur dans des portions du code source</p>
</li>
<li>
<p>Une <em>unitÃ©</em> fait rÃ©fÃ©rence Ã  la plus petite partie testable de l&#8217;application (fonction, mÃ©thode)</p>
</li>
<li>
<p>Le but des tests unitaires est d&#8217;isoler chaque partie du programme pour la tester indÃ©pendamment</p>
<div class="ulist">
<ul>
<li>
<p>isoler les diffÃ©rents Ã©lÃ©ments nÃ©cessite souvent d&#8217;avoir recours Ã  du code de substitution (<em>stub</em>, <em>fake</em> ou <em>mock object</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ces tests peuvent Ãªtre rÃ©alisÃ©s Ã  la main (affichages et vÃ©rification visuel, dÃ©bogueur) ou avec un framework spÃ©cialisÃ© par exemple de type <code>xUnit</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Quelques frameworks de test unitaire (<span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Unit_testing"><i class="fa fa-wikipedia-w"></i></a></span>)</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
<th class="tableblock halign-left valign-top">Bash</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.junit.org/">JUnit</a>,
<a href="http://testng.org/">TestNG</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.python.org/3/library/unittest.html">unittest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/sstephenson/bats">Bats</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_principe"><a class="anchor" href="#_principe"></a><a class="link" href="#_principe">Principe</a></h5>
<div class="ulist">
<ul>
<li>
<p>Pour chaque unitÃ©, on Ã©crit une ou plusieurs mÃ©thodes de test</p>
<div class="ulist">
<ul>
<li>
<p>un outil de gestion est nÃ©cessaire vu le nombre de tests</p>
</li>
</ul>
</div>
</li>
<li>
<p>Une possibilitÃ© intÃ©ressante est d&#8217;Ã©crire le test avant la mÃ©thode</p>
<div class="ulist">
<ul>
<li>
<p>prÃ©cise d&#8217;abord ce que doit faire la mÃ©thode</p>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;ensemble des tests peut ensuite Ãªtre rÃ©pÃ©tÃ© autant que nÃ©cessaire</p>
<div class="ulist">
<ul>
<li>
<p>l&#8217;exÃ©cution des tests aprÃ¨s chaque modification permet de vÃ©rifier la non rÃ©gression</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_caractÃ©ristiques_des_tests_unitaires"><a class="anchor" href="#_caractÃ©ristiques_des_tests_unitaires"></a><a class="link" href="#_caractÃ©ristiques_des_tests_unitaires">CaractÃ©ristiques des tests unitaires</a></h5>
<div class="ulist">
<ul>
<li>
<p>Petits (analyse d&#8217;un point prÃ©cis) et rapides (exÃ©cutÃ©s souvent)</p>
</li>
<li>
<p>Totalement automatisÃ©s</p>
</li>
<li>
<p>Toujours au niveau de l&#8217;unitÃ©</p>
</li>
<li>
<p>IndÃ©pendants les uns des autres (pas de contraintes d&#8217;ordre)</p>
</li>
<li>
<p>N&#8217;utilisent pas de ressources externes (SGBD, â¦)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_doublure_de_tests"><a class="anchor" href="#_doublure_de_tests"></a><a class="link" href="#_doublure_de_tests">Doublure de tests</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un test unitaire se focalise sur un Ã©lÃ©ment particulier</p>
</li>
<li>
<p>Ce dernier peut Ãªtre dÃ©pendant d&#8217;autres Ã©lÃ©ments</p>
</li>
<li>
<p>Une <em>doublure de test</em> permet de remplacer ces dÃ©pendances</p>
</li>
</ul>
</div>
<div class="hdlist">
<div class="title">Plusieurs types de doublure (cf. <a href="https://martinfowler.com/articles/mocksArentStubs.html">Mocks Aren&#8217;t Stubs</a>, Martin Fowler, 2007)</div>
<table>
<tr>
<td class="hdlist1">
FantÃ´me
</td>
<td class="hdlist2">
<p>un objet <em>fantÃ´me</em> (<em>dummy</em>) sert juste Ã  remplir des listes de paramÃ¨tres</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Substitut
</td>
<td class="hdlist2">
<p>un objet <em>substitut</em> (<em>fake</em>) fournit une implÃ©mentation simplifiÃ©e</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Bouchon
</td>
<td class="hdlist2">
<p>un objet <em>bouchon</em> (<em>stub</em>) retourne des rÃ©ponses prÃ©dÃ©finies spÃ©cifiques aux tests</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Simulacre
</td>
<td class="hdlist2">
<p>un objet <em>simulacre</em> (<em>mock</em>) est prÃ©programmÃ© par des attentes, i.e. une spÃ©cification du comportement attendu</p>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Quelques frameworks de <em>doublure de test</em> (<span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Test_double"><i class="fa fa-wikipedia-w"></i></a></span>)</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://site.mockito.org/">Mockito</a>,
<a href="http://jmockit.org/index.html">JMockit</a>,
<a href="http://easymock.org/">EasyMock</a>,
<a href="https://github.com/jayway/powermock">PowerMock</a>,</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_tests_unitaires_en_rust"><a class="anchor" href="#_tests_unitaires_en_rust"></a><a class="link" href="#_tests_unitaires_en_rust">2.4.4. Tests unitaires en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un test est une fonction qui vÃ©rifie qu&#8217;une portion de code fonctionne de la maniÃ¨re attendue.</p>
</li>
<li>
<p>Le corps de la fonction rÃ©alise les actions suivantes:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialiser le contexte du test</p>
</li>
<li>
<p>ExÃ©cuter le code Ã  tester</p>
</li>
<li>
<p>VÃ©rifier (<em>assert</em>) les rÃ©sultats</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_fonction_de_test"><a class="anchor" href="#_fonction_de_test"></a><a class="link" href="#_fonction_de_test">Fonction de test</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test] <i class="conum" data-value="1"></i><b>(1)</b>
fn it_adds_two() { <i class="conum" data-value="2"></i><b>(2)</b>
    assert_eq!(4, add_two(2)); <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La fonction est annotÃ©e avec l&#8217;attribut <code>test</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La fonction ne prend pas de paramÃ¨tre</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Le rÃ©sultat est vÃ©rifiÃ© avec la macro <code>assert!</code>, <code>assert_eq!</code> ou <code>assert_ne!</code>
<div class="ulist">
<ul>
<li>
<p>L&#8217;annotation <code>should_panic</code> prÃ©cise que le test rÃ©ussit si la fonction provoque une erreur (<em>panic</em>)</p>
</li>
<li>
<p>L&#8217;annotation <code>ignore</code> ignore l&#8217;exÃ©cution de la fonction de test</p>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exÃ©cuter_les_tests"><a class="anchor" href="#_exÃ©cuter_les_tests"></a><a class="link" href="#_exÃ©cuter_les_tests">ExÃ©cuter les tests</a></h5>
<div class="ulist">
<ul>
<li>
<p><code>rustc --test</code> compile le programme en gÃ©nÃ©rant un exÃ©cutable qui lance les tests</p>
</li>
<li>
<p><code>cargo test</code> fait de mÃªme puis exÃ©cute les tests</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_organiser_les_tests"><a class="anchor" href="#_organiser_les_tests"></a><a class="link" href="#_organiser_les_tests">Organiser les tests</a></h5>
<div class="ulist">
<ul>
<li>
<p>Par convention, les tests unitaires sont placÃ©s dans le module <code>tests</code> du fichier testÃ©</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[cfg(test)] <i class="conum" data-value="1"></i><b>(1)</b>
mod tests { <i class="conum" data-value="2"></i><b>(2)</b>
    use super::*; <i class="conum" data-value="3"></i><b>(3)</b>

    #[test]
    fn it_works() {
        //...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>L&#8217;annotation <code>cfg(test)</code> permet de compiler ce module uniquement pour les tests</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Les tests sont placÃ©s dans le module <code>tests</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Donne accÃ¨s au contenu du module englobant</td>
</tr>
</table>
</div>
</li>
<li>
<p>Les tests d&#8217;intÃ©gration sont en gÃ©nÃ©ral placÃ©s dans le rÃ©pertoire <code>tests</code> au mÃªme niveau que <code>src</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_tests_et_documentation"><a class="anchor" href="#_tests_et_documentation"></a><a class="link" href="#_tests_et_documentation">Tests et documentation</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les exemples mentionnÃ©s dans la documentation de l&#8217;API d&#8217;une fonction sont automatiquement exÃ©cutÃ©s</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_couverture_de_code"><a class="anchor" href="#_couverture_de_code"></a><a class="link" href="#_couverture_de_code">2.4.5. Couverture de code</a></h4>
<div class="ulist">
<ul>
<li>
<p>L&#8217;objectif est de vÃ©rifier que les tests unitaires couvrent bien l&#8217;ensemble du code Ã©crit</p>
</li>
<li>
<p>La <em>couverture de code</em> (<em>code coverage</em>) est un outil de mesure de la qualitÃ© des tests effectuÃ©s</p>
</li>
<li>
<p>Le degrÃ© de couverture est mesurÃ© par des indices statistiques</p>
</li>
<li>
<p>Les portions de codes non testÃ©es sont mises en Ã©vidence</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_quelques_mÃ©triques"><a class="anchor" href="#_quelques_mÃ©triques"></a><a class="link" href="#_quelques_mÃ©triques">Quelques mÃ©triques</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le <em>Statement Coverage</em> (ou <em>Line Coverage</em>) mesure le degrÃ© d&#8217;exÃ©cution de chaque ligne</p>
<div class="ulist">
<ul>
<li>
<p>simple mais ignore un certain nombre d&#8217;erreurs (ne prend pas en compte la logique du programme)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <em>Condition Coverage</em> indique si toutes les conditions ont Ã©tÃ© Ã©valuÃ©es</p>
<div class="ulist">
<ul>
<li>
<p>les conditions doivent Ãªtre Ã©valuÃ©es Ã  vrai et Ã  faux pour obtenir un taux de 100%</p>
</li>
<li>
<p>aide Ã  rÃ©soudre les problÃ¨mes de la mesure prÃ©cÃ©dente</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <em>Path coverage</em> examine si chaque chemin a Ã©tÃ© parcouru</p>
</li>
<li>
<p>Le <em>Function Coverage</em> vÃ©rifie si chaque fonction a Ã©tÃ© appelÃ©e</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>Un score de 100% ne garantit pas la correction du programme. Ce n&#8217;est mÃªme pas un objectif !</strong>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Couverture des tests<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Code_coverage"><i class="fa fa-wikipedia-w"></i></a></span></sup></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/mozilla/grcov">grcov</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://cobertura.sourceforge.net/">Cobertura</a>,
<a href="http://emma.sourceforge.net">EMMA</a>,
<a href="http://www.atlassian.com/software/clover/">Clover</a>,</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_dÃ©veloppement_pilotÃ©_par_les_tests"><a class="anchor" href="#_dÃ©veloppement_pilotÃ©_par_les_tests"></a><a class="link" href="#_dÃ©veloppement_pilotÃ©_par_les_tests">2.4.6. DÃ©veloppement pilotÃ© par les tests</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>dÃ©veloppement pilotÃ© par les tests</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Test_driven_development"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Test Driven Development</em> ou <em>TDD</em>) est une mÃ©thode de dÃ©veloppement mettant l&#8217;accent sur les tests unitaires</p>
</li>
<li>
<p>Cette mÃ©thode prÃ©conise d&#8217;Ã©crire les tests avant le code</p>
<div class="ulist">
<ul>
<li>
<p><em>Only ever write code to fix a failing test</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Cette approche permet de spÃ©cifier ce que l&#8217;on attend du systÃ¨me avant de le rÃ©aliser</p>
</li>
<li>
<p>Elle est basÃ©e sur les tests et le <a href="http://www.refactoring.com/">refactoring</a></p>
</li>
<li>
<p>Le refactoring consiste Ã  amÃ©liorer la conception du programme sans en changer le comportement (les fonctionnalitÃ©s)</p>
</li>
<li>
<p>Le TDD n&#8217;est pas limitÃ© aux tests unitaires mais s&#8217;applique aussi aux tests de recette (<em>Acceptance TDD</em>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_cycle_de_dÃ©veloppement"><a class="anchor" href="#_cycle_de_dÃ©veloppement"></a><a class="link" href="#_cycle_de_dÃ©veloppement">Cycle de dÃ©veloppement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le TDD s&#8217;appuie sur de courtes itÃ©rations</p>
</li>
<li>
<p>Chaque itÃ©ration possÃ¨de cinq Ã©tapes</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Ãcrire un test</p>
</li>
<li>
<p>ExÃ©cuter les tests et vÃ©rifier que le nouveau Ã©choue</p>
</li>
<li>
<p>Ãcrire juste le code nÃ©cessaire pour faire passer le test</p>
</li>
<li>
<p>RÃ©exÃ©cuter les tests et vÃ©rifier que tous les tests passent</p>
</li>
<li>
<p>Corriger la conception du systÃ¨me (<em>refactoring</em>)</p>
</li>
</ol>
</div>
</li>
<li>
<p>La phase de refactoring s&#8217;applique aussi bien au code de l&#8217;application qu&#8217;au code des tests</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_programmation_pilotÃ©e_par_le_comportement"><a class="anchor" href="#_programmation_pilotÃ©e_par_le_comportement"></a><a class="link" href="#_programmation_pilotÃ©e_par_le_comportement">Programmation pilotÃ©e par le comportement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les pratiques de TDD peuvent Ãªtre Ã©tendues vers la Programmation pilotÃ©e par le comportement<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Programmation_pilot%C3%A9e_par_le_comportement"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Behaviour-Driven Development</em> ou <em>BDD</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Quelques frameworks de BDD</div>
<p><a href="http://cukes.info/">Cucumber</a>,
<a href="http://spockframework.org/">Spock</a>,
<a href="http://jbehave.org/">JBehave</a>,</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optimisation_et_profilage"><a class="anchor" href="#_optimisation_et_profilage"></a><a class="link" href="#_optimisation_et_profilage">2.4.7. Optimisation et profilage</a></h4>
<div class="ulist">
<ul>
<li>
<p>L'<em>optimisation</em> est la pratique qui consiste Ã  modifier un systÃ¨me pour qu&#8217;il fonctionne plus efficacement</p>
<div class="ulist">
<ul>
<li>
<p>par exemple plus rapidement ou en consommant moins de ressources</p>
</li>
<li>
<p>L&#8217;optimisation est souvent un compromis entre diffÃ©rents facteurs</p>
</li>
</ul>
</div>
</li>
<li>
<p>L'<em>analyse dynamique</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>profiling</em>) d&#8217;un programme a pour objectif de collecter des informations sur le comportement d&#8217;une application pendant son exÃ©cution</p>
<div class="ulist">
<ul>
<li>
<p>Les Ã©lÃ©ments Ã  surveiller sont l&#8217;utilisation des CPU, l&#8217;utilisation de la mÃ©moire, les <em>threads</em>, â¦</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Ce type d&#8217;analyse a un impact sur le comportement de l&#8217;application.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_mise_en_Åuvre"><a class="anchor" href="#_mise_en_Åuvre"></a><a class="link" href="#_mise_en_Åuvre">Mise en Åuvre</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un outil d&#8217;analyse dynamique permet de collecter et de prÃ©senter les informations rÃ©sultant de l&#8217;analyse de l&#8217;exÃ©cution</p>
</li>
<li>
<p>UtilisÃ© pour l&#8217;analyse de performances, un tel outil permet de localiser les <em>points chauds</em> (<em>hot spots</em>) du programme</p>
<div class="ulist">
<ul>
<li>
<p>point chaud : portion de code longue Ã  exÃ©cuter</p>
</li>
<li>
<p>rapports sur les fonctions appelÃ©es, temps passÃ© dans chaque fonction, â¦</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Quelques outils</div>
<p><a href="http://sourceware.org/binutils/docs-2.18/gprof">gprof</a> (GNU Profiler), <a href="http://valgrind.org/">Valgrind</a>, <a href="https://visualvm.github.io/index.html">VisualVM</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_a_propos_de_loptimisation_prÃ©maturÃ©e"><a class="anchor" href="#_a_propos_de_loptimisation_prÃ©maturÃ©e"></a><a class="link" href="#_a_propos_de_loptimisation_prÃ©maturÃ©e">A propos de l&#8217;optimisation prÃ©maturÃ©e</a></h5>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
La phase d&#8217;optimisation ne doit intervenir qu&#8217;une fois que le programme fonctionne et rÃ©pond aux spÃ©cifications fonctionnelles.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Quelques citations</div>
<ul>
<li>
<p><em>More computing sins are committed in the name of efficiency (without necessarily achieving it) than for any other single reason - including blind stupidity.</em>, <a href="http://en.wikipedia.org/wiki/W.A._Wulf">W.A. Wulf</a></p>
</li>
<li>
<p><em>We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil. Yet we should not pass up our opportunities in that critical 3%.</em>, <a href="http://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a></p>
</li>
<li>
<p><em>Bottlenecks occur in surprising places, so don&#8217;t try to second guess and put in a speed hack until you have proven that&#8217;s where the bottleneck is.</em>, <a href="http://en.wikipedia.org/wiki/Rob_Pike">Rob Pike</a></p>
</li>
<li>
<p><em>The First Rule of Program Optimization: Don&#8217;t do it. The Second Rule of Program Optimization (for experts only!): Don&#8217;t do it yet.</em>, <a href="http://en.wikipedia.org/wiki/Michael_A._Jackson">Michael A. Jackson</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_optimisation_Ã _diffÃ©rents_niveaux"><a class="anchor" href="#_optimisation_Ã _diffÃ©rents_niveaux"></a><a class="link" href="#_optimisation_Ã _diffÃ©rents_niveaux">Optimisation Ã  diffÃ©rents niveaux</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Conception
</td>
<td class="hdlist2">
<p>algorithmes, architecture de l&#8217;application, â¦</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Code source
</td>
<td class="hdlist2">
<p>utilisation d&#8217;idiomes adaptÃ©s au langage</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Attention de ne pas perturber les optimisations du compilateur
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Compilateur
</td>
<td class="hdlist2">
<p>utiliser les optimisations fournies par le compilateur</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Assembleur
</td>
<td class="hdlist2">
<p>spÃ©cifique Ã  une plateforme</p>
</td>
</tr>
<tr>
<td class="hdlist1">
ExÃ©cution
</td>
<td class="hdlist2">
<p>compilateur <em>just in time</em></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_marche_Ã _suivre_pour_loptimisation"><a class="anchor" href="#_marche_Ã _suivre_pour_loptimisation"></a><a class="link" href="#_marche_Ã _suivre_pour_loptimisation">Marche Ã  suivre pour l&#8217;optimisation</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choisir un paramÃ¨tre Ã  optimiser (temps CPU, occupation mÃ©moire, â¦)</p>
</li>
<li>
<p>Localiser les portions de code les plus coÃ»teuses vis Ã  vis de ce paramÃ¨tre</p>
<div class="ulist">
<ul>
<li>
<p>permet d&#8217;obtenir le meilleur rendement</p>
</li>
<li>
<p>rÃ¨gle des 80/20<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Principe_de_Pareto"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
</ul>
</div>
</li>
<li>
<p>Appliquer les optimisations puis <strong>mesurer le rÃ©sultat</strong></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_qualitÃ©_du_code_et_documentation"><a class="anchor" href="#_qualitÃ©_du_code_et_documentation"></a><a class="link" href="#_qualitÃ©_du_code_et_documentation">2.5. QualitÃ© du code et documentation</a></h3>
<div class="sect3">
<h4 id="_conventions_de_codage"><a class="anchor" href="#_conventions_de_codage"></a><a class="link" href="#_conventions_de_codage">2.5.1. Conventions de codage</a></h4>
<div class="sect4">
<h5 id="_styles_de_codage"><a class="anchor" href="#_styles_de_codage"></a><a class="link" href="#_styles_de_codage">Styles de codage</a></h5>
<div class="ulist">
<ul>
<li>
<p>AmÃ©liore la lisibilitÃ© du code source</p>
<div class="ulist">
<ul>
<li>
<p>le code est plus facile Ã  comprendre</p>
</li>
<li>
<p>le code est plus facile Ã  maintenir</p>
</li>
</ul>
</div>
</li>
<li>
<p>On s&#8217;appuie gÃ©nÃ©ralement sur l&#8217;Ã©diteur de texte et/ou un outil de vÃ©rification</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
L&#8217;important est de choisir un style et de s&#8217;y tenir !
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_un_extrait_de_code_java_ne_respectant_pas_de_convention"><a class="anchor" href="#_exemple_un_extrait_de_code_java_ne_respectant_pas_de_convention"></a><a class="link" href="#_exemple_un_extrait_de_code_java_ne_respectant_pas_de_convention">Exemple : un extrait de code Java ne respectant pas de convention</a></h5>
<div class="listingblock">
<div class="title">Que fait cet extrait de code ?</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static &lt;T extends Comparable&lt;? super T&gt;&gt; void f(List&lt;T&gt; l) {
int s=l.size();
int i,j;
for(i=0;i&lt;s-1;++i)
{
for(j=0;j&lt;s-1-i;++j){
if(l.get(j+1).compareTo(l.get(j))&lt;0){
T t=l.get(j);
l.set(j,l.get(j+1));l.set(j+1,t);
}}}
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_un_extrait_de_code_java_respectant_une_convention"><a class="anchor" href="#_exemple_un_extrait_de_code_java_respectant_une_convention"></a><a class="link" href="#_exemple_un_extrait_de_code_java_respectant_une_convention">Exemple : un extrait de code Java respectant une convention</a></h5>
<div class="listingblock">
<div class="title">Que fait cet extrait de code ?</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
  * Tri la liste passÃ©e en paramÃ¨tre en ordre croissant
  * en respectant l'ordre naturel de ses Ã©lÃ©ments.
  * Les Ã©lÃ©ments de la liste doivent implÃ©menter
  * l'interface &lt;code&gt;Comparable&lt;/code&gt;.
  * Cet mÃ©thode utilise un algorithme de tri a bulle.
  *
  * @param aList la liste Ã  trier
  */
public static &lt;T extends Comparable&lt;? super T&gt;&gt; void bubbleSort(List&lt;T&gt; aList) {
int size = aList.size();
for (int i = 0; i &lt; size - 1; ++i) {
    for (int j = 0; j &lt; size - 1 - i; ++j) {
    if (aList.get(j+1).compareTo(aList.get(j)) &lt; 0) { // compare les deux voisins
        // Ã©change les deux voisins
        T tmp = aList.get(j);
        aList.set(j, aList.get(j + 1));
        aList.set(j + 1, tmp);
    }}
}}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_quelques_conventions"><a class="anchor" href="#_quelques_conventions"></a><a class="link" href="#_quelques_conventions">Quelques conventions</a></h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Style de codage par langage</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Plusieurs</th>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
<th class="tableblock halign-left valign-top">C++</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://google.github.io/styleguide/">Google Style Guides</a>, Google, 2014.
<a href="https://www.pearson.com/us/higher-education/program/Martin-Clean-Code-A-Handbook-of-Agile-Software-Craftsmanship/PGM63937.html">Clean Code: A Handbook of Agile Software Craftsmanship</a>, Robert C. Martin, Pearson, 2009.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/1.0.0/style/">Rust Style Guidelines</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.oracle.com/java/technologies/javase/codeconventions-contents.html">Java code conventions</a>, SUN, 1999.
<a href="http://www.ambysoft.com/essays/javaCodingStandards.html">Coding standards for Java</a>, AmbySoft, 2007.
<a href="http://fluxens.com/javastyle.html">Java Programming Style Guidelines</a>, Fluxens.
<a href="https://horstmann.com/bigj/style.html">Java Language Coding Guidelines</a>, <a href="http://horstmann.com/">Cay Horstmann</a>, 2004.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a>,
<a href="http://pep8.org/">PEP 8 â the Style Guide for Python Code</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.pearson.com/uk/educators/higher-education-educators/program/Sutter-C-Coding-Standards-101-Rules-Guidelines-and-Best-Practices/PGM543690.html">C++ Coding Standards: 101 Rules, Guidelines, and Best Practices</a>, Herb Sutter, Andrei Alexandrescu, Pearson, 2005.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_thÃ¨mes_abordÃ©s_par_les_conventions"><a class="anchor" href="#_thÃ¨mes_abordÃ©s_par_les_conventions"></a><a class="link" href="#_thÃ¨mes_abordÃ©s_par_les_conventions">ThÃ¨mes abordÃ©s par les conventions</a></h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Structure et contenu d&#8217;un fichier source</dt>
<dd>
<p><em>Files longer than 2000 lines are cumbersome and should be avoided.</em></p>
</dd>
<dt class="hdlist1">Conventions de nommage</dt>
<dd>
<p><em>Class names should be nouns, in mixed case with the first letter of each internal word capitalized.</em></p>
</dd>
<dt class="hdlist1">Format et emplacement des commentaires</dt>
<dd>
<p><em>Short comments can appear on a single line indented to the level of the code that follows.</em></p>
</dd>
<dt class="hdlist1">Indentation des lignes</dt>
<dd>
<p><em>Four spaces should be used as the unit of indentation.</em></p>
</dd>
<dt class="hdlist1">Format des dÃ©clarations, des instructions et emplacement des espaces</dt>
<dd>
<p><em>Each line should contain at most one statement.</em></p>
</dd>
<dt class="hdlist1">Quelques bonnes pratiques</dt>
<dd>
<p><em>Don&#8217;t make any instance or class variable public without good reason.</em></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_audit_des_conventions_de_codage"><a class="anchor" href="#_audit_des_conventions_de_codage"></a><a class="link" href="#_audit_des_conventions_de_codage">Audit des conventions de codage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Des outils permettent de rÃ©aliser un audit des fichiers sources</p>
</li>
<li>
<p>GÃ©nÃ¨rent un rapport des violations des conventions de codage</p>
</li>
<li>
<p>Sont gÃ©nÃ©ralement configurables pour diffÃ©rentes conventions</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Outils de vÃ©rification des conventions par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rust-lang/rust-clippy">clippy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://checkstyle.sourceforge.net/">CheckStyle</a>,
<a href="http://jcsc.sourceforge.net/">JCSC</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.pylint.org/">Pylint</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_outils_de_reformatage"><a class="anchor" href="#_outils_de_reformatage"></a><a class="link" href="#_outils_de_reformatage">Outils de reformatage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Mettre en conformitÃ© le code source avec des conventions</p>
</li>
<li>
<p>Concerne uniquement la mise en forme du code (indentation, espaces, â¦)</p>
</li>
<li>
<p>La plupart des IDE assurent Ã©galement ce service</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Outils</div>
<ul>
<li>
<p><a href="https://github.com/rust-lang/rustfmt">rustfmt</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_documenter_un_code_source"><a class="anchor" href="#_documenter_un_code_source"></a><a class="link" href="#_documenter_un_code_source">2.5.2. Documenter un code source</a></h4>
<div class="sect4">
<h5 id="_quest_ce_quune_bonne_documentation"><a class="anchor" href="#_quest_ce_quune_bonne_documentation"></a><a class="link" href="#_quest_ce_quune_bonne_documentation">Qu&#8217;est-ce qu&#8217;une bonne documentation<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Software_documentation#Technical_documentation"><i class="fa fa-wikipedia-w"></i></a></span></sup> ?</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un commentaire doit clarifier le code</p>
<div class="ulist">
<ul>
<li>
<p>la documentation du code doit permettre Ã  une autre personne de mieux comprendre le code</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentez pourquoi les choses sont faites et pas simplement ce qui est fait</p>
<div class="ulist">
<ul>
<li>
<p>ne paraphrasez pas le code</p>
</li>
</ul>
</div>
</li>
<li>
<p>RÃ©digez des commentaires simples et concis</p>
</li>
<li>
<p>Ãcrivez la documentation avant d&#8217;Ã©crire le code</p>
<div class="ulist">
<ul>
<li>
<p>permet de dÃ©finir l&#8217;objectif en premier</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ãvitez les commentaires dÃ©coratifs (banniÃ¨res, â¦)</p>
<div class="ulist">
<ul>
<li>
<p>ajoute peu de valeurs Ã  la documentation</p>
</li>
<li>
<p>est une perte de temps</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
IdÃ©alement, un code bien Ã©crit doit se suffire Ã  lui-mÃªme, i.e. doit se lire (et se comprendre) facilement sans commentaire.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_intÃ©rÃªt_des_outils_de_gÃ©nÃ©ration_de_la_documentation"><a class="anchor" href="#_intÃ©rÃªt_des_outils_de_gÃ©nÃ©ration_de_la_documentation"></a><a class="link" href="#_intÃ©rÃªt_des_outils_de_gÃ©nÃ©ration_de_la_documentation">IntÃ©rÃªt des outils de gÃ©nÃ©ration de la documentation</a></h5>
<div class="ulist">
<ul>
<li>
<p>GÃ©nÃ©rer automatiquement la documentation (dans diverses formats) du code source</p>
</li>
<li>
<p>Permet de garder plus facilement la documentation en phase avec le code</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Outils de documentation par langage</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Plusieurs</th>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.doxygen.org">Doxygen</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/rustdoc/index.html">rustdoc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/j2se/javadoc/">JavaDoc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.python.org/3/library/pydoc.html">pydoc</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_documenter_une_api_rust"><a class="anchor" href="#_documenter_une_api_rust"></a><a class="link" href="#_documenter_une_api_rust">Documenter une API Rust</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les commentaires de documentation dÃ©butent par <code>///</code> et concerne l&#8217;Ã©lÃ©ment suivant le commentaire (<code>//!</code> pour documenter l&#8217;Ã©lÃ©ment englobant)</p>
</li>
<li>
<p>Cette syntaxe est un raccourci pour dÃ©finir l&#8217;attribut <code>doc</code> (<code>#[doc = " This is a doc comment."]</code>)</p>
</li>
<li>
<p>Ces commentaires supportent une syntaxe <a href="https://fr.wikipedia.org/wiki/Markdown">Markdown</a> pour la mise en forme</p>
</li>
<li>
<p>La documentation au format HTML est ensuite gÃ©nÃ©rÃ©e avec <code>cargo doc</code> (qui invoque <a href="https://doc.rust-lang.org/rustdoc/what-is-rustdoc.html"><code>rustdoc</code></a>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_audit_de_code_source_et_analyse_statique"><a class="anchor" href="#_audit_de_code_source_et_analyse_statique"></a><a class="link" href="#_audit_de_code_source_et_analyse_statique">2.5.3. Audit de code source et Analyse statique</a></h4>
<div class="sect4">
<h5 id="_audit_de_code_source"><a class="anchor" href="#_audit_de_code_source"></a><a class="link" href="#_audit_de_code_source">Audit de code source</a></h5>
<div class="ulist">
<ul>
<li>
<p>L'<em>audit</em> ou <em>revue</em><sup><span class="icon"><a class="image" href="http://en.wikipedia.org/wiki/Software_inspection"><i class="fa fa-wikipedia-w"></i></a></span></sup> de code consiste Ã  Ã©tudier attentivement un code source afin de dÃ©tecter et de corriger des erreurs</p>
</li>
<li>
<p>L&#8217;objectif est d&#8217;amÃ©liorer la qualitÃ© du logiciel et l&#8217;expÃ©rience des dÃ©veloppeurs</p>
</li>
<li>
<p>Peut prendre diffÃ©rentes formes</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="http://en.wikipedia.org/wiki/Fagan_inspection">Fagan inspection</a>
</td>
<td class="hdlist2">
<p>est un processus formel pour l&#8217;audit de code</p>
</td>
</tr>
<tr>
<td class="hdlist1">
"par dessus l&#8217;Ã©paule"
</td>
<td class="hdlist2">
<p>un dÃ©veloppeur suit en temps rÃ©el ce qu&#8217;un autre Ã©crit</p>
</td>
</tr>
<tr>
<td class="hdlist1">
programmation par binÃ´me
</td>
<td class="hdlist2">
<p>deux dÃ©veloppeurs travaillent de concert et Ã©change leur rÃ´le rÃ©guliÃ¨rement (vient de <a href="http://en.wikipedia.org/wiki/Extreme_programming">eXtreme Programming</a> (XP))</p>
</td>
</tr>
<tr>
<td class="hdlist1">
assistÃ© par un outil
</td>
<td class="hdlist2">
<p>s&#8217;appuie sur des outils pour une analyse systÃ©matique</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_analyse_statique_du_code"><a class="anchor" href="#_analyse_statique_du_code"></a><a class="link" href="#_analyse_statique_du_code">Analyse statique du code</a></h5>
<div class="ulist">
<ul>
<li>
<p>Certaines erreurs se reproduisent frÃ©quemment dans un fichier source (<code>;</code> aprÃ¨s un <code>for</code>, â¦)</p>
</li>
<li>
<p>La plupart de ces erreurs peuvent Ãªtre recherchÃ©es de faÃ§on systÃ©matique</p>
</li>
<li>
<p>L'<em>analyse statique</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Analyse_statique_de_programmes"><i class="fa fa-wikipedia-w"></i></a></span></sup> permet d&#8217;obtenir des informations sur un programme sans l&#8217;exÃ©cuter</p>
</li>
<li>
<p>Elle est un bon complÃ©ment aux tests</p>
</li>
<li>
<p>En gÃ©nÃ©ral, elle n&#8217;a pas connaissance de ce que le programme doit faire (recherche de motifs gÃ©nÃ©raux)</p>
</li>
<li>
<p>Des outils proposent un moteur ainsi qu&#8217;un ensemble de rÃ¨gles permettant de trouver ce type d&#8217;erreurs dans un fichier source</p>
</li>
<li>
<p>L&#8217;ensemble de rÃ¨gles peut Ã©ventuellement Ãªtre modifiable</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Outils d&#8217;analyse statique par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Shell</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rust-lang/rust-clippy">clippy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://findbugs.sourceforge.net/">FindBugs</a>,
<a href="http://pmd.sourceforge.net">Pmd</a>,
<a href="http://www.sonarqube.org/">SonarQube</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.shellcheck.net/">ShellCheck</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_quelques_bogues_courants"><a class="anchor" href="#_quelques_bogues_courants"></a><a class="link" href="#_quelques_bogues_courants">Quelques bogues courants</a></h5>
<div class="ulist">
<ul>
<li>
<p>Boucle rÃ©cursive infinie</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MaClasse() {
  MaClasse m = new MaClasse();
}</code></pre>
</div>
</div>
</li>
<li>
<p>DÃ©rÃ©fÃ©rencement d&#8217;une rÃ©fÃ©rence null</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">if (c == null &amp;&amp; c.uneMethode()) //...</code></pre>
</div>
</div>
</li>
<li>
<p>Auto affectation d&#8217;attribut</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MaClasse(String uneChaine) {
  this.chaine = chaine;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Valeur de retour ignorÃ©e</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String nom = //...
nom.replace('/', '.');</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_catÃ©gories_de_bogues"><a class="anchor" href="#_catÃ©gories_de_bogues"></a><a class="link" href="#_catÃ©gories_de_bogues">CatÃ©gories de bogues</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Correction
</td>
<td class="hdlist2">
<p>le code ne fait clairement pas ce qui est attendu</p>
<div class="ulist">
<ul>
<li>
<p><em>dÃ©rÃ©fÃ©rencement d&#8217;une rÃ©fÃ©rence null</em></p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Mauvaise pratique
</td>
<td class="hdlist2">
<p>le code ne respecte pas les bonnes pratiques</p>
<div class="ulist">
<ul>
<li>
<p>redÃ©finition d'<em>equals</em> sans <em>hashCode</em>, comparaison de chaÃ®ne avec <em>==</em></p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
ProblÃ¨me de sÃ©curitÃ©
</td>
<td class="hdlist2">
<p>le code est vulnÃ©rable Ã  un usage malveillant</p>
<div class="ulist">
<ul>
<li>
<p><em>injection SQL</em></p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Code suspect
</td>
<td class="hdlist2">
<p>le code utilise des pratiques non usuelles</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Performance
</td>
<td class="hdlist2">
<p>le code est inefficace</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Correction multithread
</td>
<td class="hdlist2">
<p>il y a un problÃ¨me de correction en environnement multithread</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_mise_en_Åuvre_de_lanalyse_statique"><a class="anchor" href="#_mise_en_Åuvre_de_lanalyse_statique"></a><a class="link" href="#_mise_en_Åuvre_de_lanalyse_statique">Mise en Åuvre de l&#8217;analyse statique</a></h5>
<div class="ulist">
<ul>
<li>
<p>IntÃ©gration au processus de dÃ©veloppement</p>
<div class="ulist">
<ul>
<li>
<p><em>intÃ©gration Ã  l&#8217;IDE, exÃ©cution comme les tests unitaires, â¦</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>RÃ©glage de l&#8217;outil utilisÃ©</p>
<div class="ulist">
<ul>
<li>
<p><em>Ã©viter les faux positifs, paramÃ©trer le niveau de dÃ©tail, â¦</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>RÃ©flÃ©chir Ã  la prise de dÃ©cision</p>
<div class="ulist">
<ul>
<li>
<p><em>consultation des rapports, processus pour la correction du bogue, ne pas corriger le bogue, â¦</em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_agrÃ©gation_des_rapports"><a class="anchor" href="#_agrÃ©gation_des_rapports"></a><a class="link" href="#_agrÃ©gation_des_rapports">2.5.4. AgrÃ©gation des rapports</a></h4>
<div class="ulist">
<ul>
<li>
<p>La difficultÃ© est de visualiser l&#8217;ensemble des rapports produits</p>
</li>
<li>
<p>Il peut Ãªtre utile d&#8217;agrÃ©ger les diffÃ©rentes mesures pour gÃ©nÃ©rer des indicateurs synthÃ©tiques</p>
</li>
<li>
<p>Ces indicateurs doivent ensuite Ãªtre disponibles pour l&#8217;ensemble des membres du projet</p>
</li>
<li>
<p>Les rÃ©actions face Ã  ces rapports doivent aussi Ãªtre anticipÃ©es</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_construction_dun_projet"><a class="anchor" href="#_construction_dun_projet"></a><a class="link" href="#_construction_dun_projet">2.6. Construction dâun projet</a></h3>
<div class="sect3">
<h4 id="_implÃ©mentation_et_distribution"><a class="anchor" href="#_implÃ©mentation_et_distribution"></a><a class="link" href="#_implÃ©mentation_et_distribution">2.6.1. ImplÃ©mentation et distribution</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour la plupart des langages, plusieurs <em>implÃ©mentations</em> sont disponibles</p>
<div class="ulist">
<ul>
<li>
<p>certaines sont gÃ©nÃ©ralistes</p>
</li>
<li>
<p>d&#8217;autres sont spÃ©cialisÃ©es pour un type particulier de situation</p>
</li>
</ul>
</div>
</li>
<li>
<p>De mÃªme, pour plus de simplicitÃ© d&#8217;usage, les langages sont proposÃ©es sous la forme d&#8217;une <em>distribution</em></p>
</li>
<li>
<p>Une distribution va regrouper une implÃ©mentation du langage avec les bibliothÃ¨ques standards ainsi que des outils de dÃ©veloppement</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. ImplÃ©mentations par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/rustc/index.html">rustc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://openjdk.java.net/groups/hotspot/">HotSpot</a> (<a href="http://openjdk.java.net/">OpenJdk</a>),
<a href="https://www.eclipse.org/openj9/">OpenJ9</a> (<a href="https://www.eclipse.org/">Eclipse</a>),
<a href="https://www.graalvm.org/">GraalVM</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://fr.wikipedia.org/wiki/CPython">CPython</a>,
<a href="http://www.jython.org/">Jython</a>,
<a href="http://ironpython.net/">IronPython</a>,
<a href="http://pypy.org/">PyPy</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Distributions par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.rust-lang.org/tools/install">rustup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://openjdk.java.net/">OpenJdk</a>/ <a href="https://adoptopenjdk.net/">AdoptOpenJDK</a>,
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle Java SE</a>,
<a href="https://www.microsoft.com/openjdk">Microsoft Build of OpenJDK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.python.org/downloads/">Distribution de rÃ©fÃ©rence</a>,
<a href="https://www.continuum.io/anaconda-overview">Anaconda</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_automatisation_du_build"><a class="anchor" href="#_automatisation_du_build"></a><a class="link" href="#_automatisation_du_build">2.6.2. Automatisation du <em>build</em></a></h4>
<div class="ulist">
<ul>
<li>
<p>La gestion de la compilation<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Build_automation"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Build automation</em>) consiste Ã  automatiser les tÃ¢ches rÃ©pÃ©titives des dÃ©veloppeurs</p>
<div class="ulist">
<ul>
<li>
<p>compilation (mode normal, mode dÃ©bogage, â¦), gÃ©nÃ©ration de la version de distribution, gÃ©nÃ©ration de la documentation et des notes de version, lancement des tests, dÃ©ploiement</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ces tÃ¢ches sont alors rÃ©alisÃ©es plus efficacement et moins sujettes aux erreurs</p>
<div class="ulist">
<ul>
<li>
<p>Ã©vite les fastidieuses lignes de commande</p>
</li>
<li>
<p>permet une compilation Â« intelligente Â»</p>
</li>
<li>
<p>rend le processus reproductible</p>
</li>
</ul>
</div>
</li>
<li>
<p>Peut Ãªtre dÃ©clenchÃ©</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Ã  la demande
</td>
<td class="hdlist2">
<p>l&#8217;utilisateur exÃ©cute un script</p>
</td>
</tr>
<tr>
<td class="hdlist1">
par un ordonnanceur
</td>
<td class="hdlist2">
<p>exÃ©cutÃ© Ã  un instant donnÃ©</p>
</td>
</tr>
<tr>
<td class="hdlist1">
par un Ã©vÃ©nement
</td>
<td class="hdlist2">
<p>provoquÃ© par un Ã©vÃ©nement particulier</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Outils de build par langage</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java/Scala</th>
<th class="tableblock halign-left valign-top">C/C++</th>
<th class="tableblock halign-left valign-top">Autres</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/cargo/index.html">Cargo</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://gradle.org/">Gradle</a>,
<a href="https://maven.apache.org/">Maven</a>,
<a href="http://ant.apache.org">Ant</a>,
<a href="http://www.scala-sbt.org/">sbt</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.gnu.org/software/make">Make</a>,
<a href="https://cmake.org/">CMake</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.seattlerb.org/rake/">Rake</a>,
<a href="https://waf.io/">Waf</a>,
<a href="http://www.scons.org/">SCons</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_cargo"><a class="anchor" href="#_cargo"></a><a class="link" href="#_cargo">2.6.3. Cargo</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/cargo/index.html">Cargo</a> est le systÃ¨me de build et le gestionnaire de dÃ©pendances de Rust</p>
</li>
<li>
<p>Cargo permet de simplifier certaines tÃ¢ches comme</p>
<div class="ulist">
<ul>
<li>
<p>la construction du projet,</p>
</li>
<li>
<p>la gestion des bibliothÃ¨ques.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Il propose Ã©galement une maniÃ¨re standard (<em>conventions</em>) d&#8217;organiser un projet Rust</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_crÃ©er_un_projet"><a class="anchor" href="#_crÃ©er_un_projet"></a><a class="link" href="#_crÃ©er_un_projet">CrÃ©er un projet</a></h5>
<div class="ulist">
<ul>
<li>
<p>La commande <a href="https://doc.rust-lang.org/cargo/commands/cargo-new.html"><code>cargo new hello_cargo</code></a> permet de crÃ©er un projet</p>
<div class="ulist">
<ul>
<li>
<p>crÃ©e un rÃ©pertoire <code>hello_cargo</code>,</p>
</li>
<li>
<p>initialise un dÃ©pÃ´t <code>git</code> (option <code>--vcs</code>),</p>
</li>
<li>
<p>ajoute la description du projet dans <code>Cargo.toml</code></p>
</li>
<li>
<p>ajoute un fichier source dans <code>src/main.rs</code> (ou <code>src.lib.rs</code> avec l&#8217;option <code>--lib</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>La commande <a href="https://doc.rust-lang.org/cargo/commands/cargo-init.html"><code>cargo init</code></a> initialise un projet Cargo dans le rÃ©pertoire courant</p>
</li>
<li>
<p>Un projet Cargo respecte des <a href="https://doc.rust-lang.org/cargo/guide/project-layout.html">conventions d&#8217;organisation</a> de l&#8217;arborescence du projet</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_description_du_projet"><a class="anchor" href="#_description_du_projet"></a><a class="link" href="#_description_du_projet">Description du projet</a></h5>
<div class="ulist">
<ul>
<li>
<p>La <a href="https://doc.rust-lang.org/cargo/reference/manifest.html">description du projet</a> se trouve dans le fichier <code>Cargo.toml</code> qui est au format <a href="https://toml.io/">TOML</a> (Tomâs Obvious Minimal Language)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-toml hljs" data-lang="toml">[package] <i class="conum" data-value="1"></i><b>(1)</b>
name = "hello_cargo"
version = "0.1.0"
edition = "2018"

[dependencies] <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La section <code>package</code> dÃ©crit le projet (un <em>package</em> Rust)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La section <code>dependencies</code> liste les bibliothÃ¨ques dont dÃ©pend le projet</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_principales_commandes_cargo"><a class="anchor" href="#_principales_commandes_cargo"></a><a class="link" href="#_principales_commandes_cargo">Principales commandes Cargo</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-build.html">build</a>
</td>
<td class="hdlist2">
<p>construit le projet avec le <a href="https://doc.rust-lang.org/book/ch14-01-release-profiles.html#customizing-builds-with-release-profiles">profil</a> par dÃ©faut (par exemple <code>target/debug/hello_cargo</code>)</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Les versions des bibliothÃ¨ques sont entÃ©rinÃ©es dans le fichier <code>Cargo.lock</code> (<em>reproductibilitÃ©</em> du build)</p>
</li>
<li>
<p>L&#8217;option <code>--release</code> gÃ©nÃ¨re un exÃ©cutable optimisÃ© dans <code>target/release</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-run.html">run</a>
</td>
<td class="hdlist2">
<p>construit puis exÃ©cute le programme</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-check.html">check</a>
</td>
<td class="hdlist2">
<p>vÃ©rifie que le programme compile sans gÃ©nÃ©rer d&#8217;exÃ©cutable</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-update.html">update</a>
</td>
<td class="hdlist2">
<p>met Ã  jour les versions des dÃ©pendances</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-test.html">test</a>
</td>
<td class="hdlist2">
<p>construit et exÃ©cute les tests</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-clean.html">clean</a>
</td>
<td class="hdlist2">
<p>supprime les artefacts issus de la compilation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-doc.html">doc</a>
</td>
<td class="hdlist2">
<p>construit la documentation du projet</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_gestion_des_dÃ©pendances"><a class="anchor" href="#_gestion_des_dÃ©pendances"></a><a class="link" href="#_gestion_des_dÃ©pendances">Gestion des dÃ©pendances</a></h5>
<div class="ulist">
<ul>
<li>
<p>L&#8217;ajout d&#8217;une bibliothÃ¨que dans le projet se fait en ajoutant une ligne dans la section <code>dependencies</code> de <code>Cargo.toml</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-toml hljs" data-lang="toml">[dependencies]
rand = "0.8.3"</code></pre>
</div>
</div>
</li>
<li>
<p>La ligne pour intÃ©grer une bibliothÃ¨que prÃ©cise:</p>
<div class="ulist">
<ul>
<li>
<p>le nom du <em>crate</em> disponible sur <a href="https://crates.io/"><code>crates.io</code></a>,</p>
</li>
<li>
<p>la version dont dÃ©pend le projet.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html">schÃ©ma d&#8217;une version</a> suppose que la bibliothÃ¨que respecte une gestion sÃ©mantique des versions (<a href="http://semver.org/">SemVer</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vers_la_livraison_continue"><a class="anchor" href="#_vers_la_livraison_continue"></a><a class="link" href="#_vers_la_livraison_continue">2.7. Vers la livraison continue</a></h3>
<div class="sect3">
<h4 id="_collaborer_avec_un_vcs_et_une_forge"><a class="anchor" href="#_collaborer_avec_un_vcs_et_une_forge"></a><a class="link" href="#_collaborer_avec_un_vcs_et_une_forge">2.7.1. Collaborer avec un VCS et une forge</a></h4>

</div>
<div class="sect3">
<h4 id="_intÃ©gration_continue"><a class="anchor" href="#_intÃ©gration_continue"></a><a class="link" href="#_intÃ©gration_continue">2.7.2. IntÃ©gration continue</a></h4>
<div class="sect4">
<h5 id="_introduction_3"><a class="anchor" href="#_introduction_3"></a><a class="link" href="#_introduction_3">Introduction</a></h5>
<div class="ulist">
<ul>
<li>
<p>L'<em>intÃ©gration continue</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Continuous_integration"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>continuous Integration</em>) est une pratique de dÃ©veloppement oÃ¹ les membres d&#8217;une Ã©quipe intÃ¨grent frÃ©quemment (au moins une fois par jour) leur travail</p>
</li>
<li>
<p>Un outil automatique est chargÃ© de vÃ©rifier et de dÃ©tecter les problÃ¨mes d&#8217;intÃ©gration au plus tÃ´t</p>
</li>
<li>
<p>Est issu d'<em>Extreme Programming</em></p>
</li>
<li>
<p>S&#8217;appuie gÃ©nÃ©ralement sur un <em>serveur d&#8217;intÃ©gration continue</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Quelques outils</div>
<p><a href="https://github.com/features/actions">GitHub Actions</a>,
<a href="https://about.gitlab.com/features/gitlab-ci-cd/">GitLab-CI</a>,
<a href="http://jenkins-ci.org/">Jenkins</a>,
<a href="https://drone.io/">drone.io</a>,
<a href="https://travis-ci.org/">Travis CI</a>,
<a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a>,</p>
</div>
</div>
<div class="sect4">
<h5 id="_pratiques_recommandÃ©es"><a class="anchor" href="#_pratiques_recommandÃ©es"></a><a class="link" href="#_pratiques_recommandÃ©es">Pratiques recommandÃ©es</a></h5>
<div class="sect5">
<h6 id="_maintenir_un_rÃ©fÃ©rentiel_unique_des_sources"><a class="anchor" href="#_maintenir_un_rÃ©fÃ©rentiel_unique_des_sources"></a><a class="link" href="#_maintenir_un_rÃ©fÃ©rentiel_unique_des_sources">Maintenir un rÃ©fÃ©rentiel unique des sources</a></h6>
<div class="ulist">
<ul>
<li>
<p>en gÃ©nÃ©ral avec un outil de gestion de versions</p>
</li>
<li>
<p>tous les dÃ©veloppeurs doivent utiliser ce rÃ©fÃ©rentiel</p>
</li>
<li>
<p>tout ce qui est nÃ©cessaire Ã  la compilation doit se trouver dans le rÃ©fÃ©rentiel (tests, fichier de propriÃ©tÃ©s, scripts SQL, â¦)</p>
</li>
<li>
<p>limiter l&#8217;utilisation des branches (favoriser la branche principale)</p>
</li>
<li>
<p>ne placer aucun produit de la compilation dans le rÃ©fÃ©rentiel</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_automatiser_les_compilations"><a class="anchor" href="#_automatiser_les_compilations"></a><a class="link" href="#_automatiser_les_compilations">Automatiser les compilations</a></h6>
<div class="ulist">
<ul>
<li>
<p>chaque tÃ¢che rÃ©pÃ©titive doit Ãªtre automatisÃ©e (crÃ©ation de la BD, â¦)</p>
<div class="ulist">
<ul>
<li>
<p><em>Ã  partir d&#8217;une machine vierge, un checkout et une unique commande doit permettre d&#8217;obtenir un systÃ¨me utilisable</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>l&#8217;outil doit permettre de ne recompiler que ce qui est nÃ©cessaire</p>
</li>
<li>
<p>l&#8217;outil doit permettre de dÃ©finir diffÃ©rentes cibles</p>
</li>
<li>
<p>le systÃ¨me de compilation de l&#8217;IDE ne suffit pas</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_rendre_les_compilations_auto_testantes"><a class="anchor" href="#_rendre_les_compilations_auto_testantes"></a><a class="link" href="#_rendre_les_compilations_auto_testantes">Rendre les compilations auto-testantes</a></h6>
<div class="ulist">
<ul>
<li>
<p>un ensemble de tests automatisÃ©s doit Ãªtre disponible</p>
</li>
<li>
<p>la compilation doit inclure l&#8217;exÃ©cution des tests</p>
</li>
<li>
<p>l&#8217;Ã©chec d&#8217;un test doit Ãªtre reportÃ© comme un Ã©chec de la compilation</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_tout_le_monde_valide_chaque_jour"><a class="anchor" href="#_tout_le_monde_valide_chaque_jour"></a><a class="link" href="#_tout_le_monde_valide_chaque_jour">Tout le monde valide chaque jour</a></h6>
<div class="ulist">
<ul>
<li>
<p>des validations frÃ©quentes favorisent une dÃ©tection rapide des problÃ¨mes d&#8217;intÃ©gration</p>
<div class="ulist">
<ul>
<li>
<p>moins d&#8217;endroits oÃ¹ les conflits peuvent se produire</p>
</li>
<li>
<p>dÃ©tection plus rapide des problÃ¨mes</p>
</li>
<li>
<p>encouragent les dÃ©veloppeurs Ã  dÃ©couper leur travail en tÃ¢ches plus courtes</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_chaque_validation_doit_compiler_la_branche_principale_sur_une_machine_dintÃ©gration"><a class="anchor" href="#_chaque_validation_doit_compiler_la_branche_principale_sur_une_machine_dintÃ©gration"></a><a class="link" href="#_chaque_validation_doit_compiler_la_branche_principale_sur_une_machine_dintÃ©gration">Chaque validation doit compiler la branche principale sur une machine d&#8217;intÃ©gration</a></h6>
<div class="ulist">
<ul>
<li>
<p>permet d&#8217;avoir une compilation de rÃ©fÃ©rence</p>
</li>
<li>
<p>la validation dÃ©pend de la rÃ©ussite de cette compilation</p>
</li>
<li>
<p>c&#8217;est en gÃ©nÃ©ral le rÃ´le du serveur d&#8217;intÃ©gration continue</p>
</li>
<li>
<p>le serveur notifie le dÃ©veloppeur de la rÃ©ussite de la compilation</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_maintenir_une_compilation_courte"><a class="anchor" href="#_maintenir_une_compilation_courte"></a><a class="link" href="#_maintenir_une_compilation_courte">Maintenir une compilation courte</a></h6>
<div class="ulist">
<ul>
<li>
<p>pour obtenir un feedback rapide</p>
</li>
<li>
<p>XP recommande un maximum de 10mn</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_tester_dans_un_environnement_de_production_clonÃ©"><a class="anchor" href="#_tester_dans_un_environnement_de_production_clonÃ©"></a><a class="link" href="#_tester_dans_un_environnement_de_production_clonÃ©">Tester dans un environnement de production clonÃ©</a></h6>
<div class="ulist">
<ul>
<li>
<p>chaque diffÃ©rence avec l&#8217;environnement de production peut conduire Ã  des rÃ©sultats de tests diffÃ©rents</p>
</li>
<li>
<p>parfois difficile mais il faut s&#8217;en approcher au maximum</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_rendre_disponible_facilement_le_dernier_exÃ©cutable"><a class="anchor" href="#_rendre_disponible_facilement_le_dernier_exÃ©cutable"></a><a class="link" href="#_rendre_disponible_facilement_le_dernier_exÃ©cutable">Rendre disponible facilement le dernier exÃ©cutable</a></h6>
<div class="ulist">
<ul>
<li>
<p>chacun doit pouvoir utiliser la derniÃ¨re version du systÃ¨me</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_tout_le_monde_peut_voir_ce_qui_se_passe"><a class="anchor" href="#_tout_le_monde_peut_voir_ce_qui_se_passe"></a><a class="link" href="#_tout_le_monde_peut_voir_ce_qui_se_passe">Tout le monde peut voir ce qui se passe</a></h6>
<div class="ulist">
<ul>
<li>
<p>le but de l&#8217;intÃ©gration continue est de faciliter la communication</p>
</li>
<li>
<p>tout le monde doit voir l&#8217;Ã©tat de la branche principale (compilation en cours, Ã©chec de la compilation, â¦)</p>
</li>
<li>
<p>et les changements apportÃ©s</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_automatiser_le_dÃ©ploiement"><a class="anchor" href="#_automatiser_le_dÃ©ploiement"></a><a class="link" href="#_automatiser_le_dÃ©ploiement">Automatiser le dÃ©ploiement</a></h6>
<div class="ulist">
<ul>
<li>
<p>la copie des exÃ©cutables dans les diffÃ©rents environnements doit Ãªtre automatique</p>
</li>
<li>
<p>il peut Ãªtre nÃ©cessaire de mettre aussi en place un mÃ©canisme pour annuler un dÃ©ploiement (en production par exemple)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_intÃ©gration_continue_vs_outils_dintÃ©gration_continue"><a class="anchor" href="#_intÃ©gration_continue_vs_outils_dintÃ©gration_continue"></a><a class="link" href="#_intÃ©gration_continue_vs_outils_dintÃ©gration_continue">IntÃ©gration continue vs. outils d&#8217;intÃ©gration continue</a></h5>
<div class="ulist">
<ul>
<li>
<p>L&#8217;intÃ©gration continue ne dÃ©pend pas d&#8217;un outil</p>
</li>
<li>
<p>C&#8217;est une pratique qui doit Ãªtre acceptÃ©e par l&#8217;Ã©quipe de dÃ©veloppement</p>
<div class="ulist">
<ul>
<li>
<p>la derniÃ¨re version du code dans le rÃ©fÃ©rentiel doit toujours compiler et passer tous les tests</p>
</li>
<li>
<p>le code doit Ãªtre validÃ© frÃ©quemment</p>
</li>
</ul>
</div>
</li>
<li>
<p>Processus</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>avant la validation, s&#8217;assurer que la compilation et les tests rÃ©ussissent</p>
</li>
<li>
<p>prÃ©venir l&#8217;Ã©quipe de ne pas mettre Ã  jour le rÃ©fÃ©rentiel Ã  cause de l&#8217;intÃ©gration en cours</p>
</li>
<li>
<p>valider</p>
</li>
<li>
<p>aller sur la machine d&#8217;intÃ©gration, rÃ©cupÃ©rer la derniÃ¨re version du rÃ©fÃ©rentiel et s&#8217;assurer que la compilation et les tests rÃ©ussissent</p>
</li>
<li>
<p>prÃ©venir l&#8217;Ã©quipe que les mises Ã  jour peuvent reprendre</p>
</li>
</ol>
</div>
</li>
<li>
<p>Un outil d&#8217;intÃ©gration continue permet d&#8217;automatiser l&#8217;Ã©tape 4</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_des_binaires"><a class="anchor" href="#_gestion_des_binaires"></a><a class="link" href="#_gestion_des_binaires">2.7.3. Gestion des binaires</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>dÃ©pÃ´t de binaires</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Binary_repository_manager"><i class="fa fa-wikipedia-w"></i></a></span></sup> permet de centraliser l&#8217;entreposage et la distribution des rÃ©sultats de la compilation</p>
</li>
<li>
<p>Il doit s&#8217;intÃ©grer avec:</p>
<div class="ulist">
<ul>
<li>
<p>le serveur d&#8217;intÃ©gration continue,</p>
</li>
<li>
<p>le systÃ¨me de build utilisÃ©.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Il gÃ¨re Ã©galement le contrÃ´le d&#8217;accÃ¨s aux diffÃ©rents paquets</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Outils de gestion des binaires par langage</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://archiva.apache.org/">Archiva</a>,
<a href="http://www.sonatype.org/nexus/">Nexus</a>,
<a href="https://www.jfrog.com/artifactory/">Artifactory</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://pip.pypa.io/en/stable/">pip</a>,
<a href="https://pypi.python.org/pypihttps://pypi.python.org/pypi">PyPI</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_dÃ©ploiement"><a class="anchor" href="#_dÃ©ploiement"></a><a class="link" href="#_dÃ©ploiement">2.7.4. DÃ©ploiement<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Software_deployment"><i class="fa fa-wikipedia-w"></i></a></span></sup></a></h4>
<div class="sect4">
<h5 id="_livraison_continue"><a class="anchor" href="#_livraison_continue"></a><a class="link" href="#_livraison_continue">Livraison continue</a></h5>
<div class="ulist">
<ul>
<li>
<p>La <em>livraison continue</em> (<em>continuous delivery</em>) est une approche visant Ã </p>
<div class="ulist">
<ul>
<li>
<p>produire un logiciel en cycles courts,</p>
</li>
<li>
<p>pouvoir livrer le logiciel Ã  tout moment.</p>
</li>
</ul>
</div>
</li>
<li>
<p>La construction, les tests et la distribution doivent Ãªtre plus frÃ©quents</p>
</li>
<li>
<p>Cette approche s&#8217;appuie sur un dÃ©ploiement fiable et reproductible</p>
</li>
<li>
<p>La dÃ©cision de dÃ©ployer reste manuelle</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pipeline_de_dÃ©ploiement"><a class="anchor" href="#_pipeline_de_dÃ©ploiement"></a><a class="link" href="#_pipeline_de_dÃ©ploiement">Pipeline de dÃ©ploiement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un <em>pipeline de dÃ©ploiement</em> couvre trois aspects</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
VisibilitÃ©
</td>
<td class="hdlist2">
<p>Toutes les phases du processus de la livraison sont visibles par tous les membres de l&#8217;Ã©quipe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Feedback
</td>
<td class="hdlist2">
<p>Les problÃ¨mes doivent Ãªtre remontÃ©s au plus tÃ´t Ã  l&#8217;Ã©quipe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Automatisation
</td>
<td class="hdlist2">
<p>Toute version du logiciel peut Ãªtre dÃ©ployÃ©e sur n&#8217;importe quelle plate-forme automatiquement</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>La construction du projet est dÃ©composÃ©e en Ã©tapes successives</p>
<div class="ulist">
<ul>
<li>
<p>chaque Ã©tape amÃ©liore la confiance dans le logiciel</p>
</li>
<li>
<p>les premiÃ¨res Ã©tapes fournissent un feedback rapidement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_dÃ©ploiement_continu"><a class="anchor" href="#_dÃ©ploiement_continu"></a><a class="link" href="#_dÃ©ploiement_continu">DÃ©ploiement continu</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le <em>dÃ©ploiement continu</em> (<em>continuous deployment</em>) doit permettre de dÃ©ployer <strong>automatiquement</strong> en production tout changement</p>
</li>
<li>
<p>Peut conduire Ã  mettre Ã  jour le systÃ¨me en production plusieurs fois par jour</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<div class="title">Quelques exemples</div>
<ul>
<li>
<p><a href="https://netflixtechblog.com/deploying-the-netflix-api-79b6176cc3f0">Deploying the Netflix API</a></p>
</li>
<li>
<p><a href="https://www.infoq.com/presentations/Facebook-Release-Process/">The Facebook Mobile Release Process</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_as_code"><a class="anchor" href="#_infrastructure_as_code"></a><a class="link" href="#_infrastructure_as_code">Infrastructure as code</a></h5>
<div class="ulist">
<ul>
<li>
<p>L'<em>Infrastructure as code</em> consiste Ã  gÃ©rer et installer les infrastructures (serveur physique, machine virtuelle, â¦) en utilisant des fichiers de description exÃ©cutables par la machine</p>
</li>
<li>
<p>Ces descriptions sont ensuite ajoutÃ©es dans le VCS pour maintenir les diffÃ©rentes versions</p>
</li>
<li>
<p>C&#8217;est une rÃ©ponse Ã  la question du passage Ã  l&#8217;Ã©chelle pour l&#8217;installation de machines</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Infrastructure as code</div>
<p><a href="https://www.ansible.com/">Ansible</a>/Ansible Tower,
<a href="https://puppet.com/">Puppet</a>/ <a href="https://theforeman.org/">Foreman</a>,
<a href="https://www.chef.io/">Chef</a>,</p>
</div>
</div>
<div class="sect4">
<h5 id="_machine_virtuelle"><a class="anchor" href="#_machine_virtuelle"></a><a class="link" href="#_machine_virtuelle">Machine virtuelle</a></h5>
<div class="ulist">
<ul>
<li>
<p>Une <em>machine virtuelle</em> (VM) est une Ã©mulation d&#8217;un systÃ¨me informatique</p>
</li>
<li>
<p>Elles permettent d&#8217;optimiser l&#8217;usage des serveurs physiques et apportent de la souplesse</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Machine virtuelle</div>
<p><a href="https://www.virtualbox.org/">Virtualbox</a>,
<a href="https://en.wikipedia.org/wiki/QEMU">QEMU</a>,</p>
</div>
<div class="paragraph">
<p><a href="https://www.packer.io/">Packer</a>,
<a href="https://www.vagrantup.com/">Vagrant</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_conteneur_logiciel"><a class="anchor" href="#_conteneur_logiciel"></a><a class="link" href="#_conteneur_logiciel">Conteneur logiciel</a></h5>
<div class="ulist">
<ul>
<li>
<p>La virtualisation au niveau du systÃ¨me d&#8217;exploitation permet de mettre en place des espaces isolÃ©s nommÃ©s <em>conteneur</em></p>
</li>
<li>
<p>Dans un conteneur, les processus sont isolÃ©s et l&#8217;OS propose un mÃ©canisme de gestion des ressources</p>
</li>
<li>
<p>C&#8217;est une version Ã©voluÃ©es du mÃ©canisme de <em>chroot</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Chroot"><i class="fa fa-wikipedia-w"></i></a></span></sup> disponible sous Unix</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Conteneur</div>
<p><a href="https://podman.io/">podman</a>,
<a href="https://www.docker.com/">Docker</a>,
<a href="https://linuxcontainers.org/">Linux Containers</a>,
<a href="https://openvz.org/Main_Page">OpenVZ</a>,</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rust"><a class="anchor" href="#_rust"></a><a class="link" href="#_rust">3. Rust</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rust_types_composites_et_constructions_spÃ©cifiques"><a class="anchor" href="#_rust_types_composites_et_constructions_spÃ©cifiques"></a><a class="link" href="#_rust_types_composites_et_constructions_spÃ©cifiques">3.1. Rust: Types composites et constructions spÃ©cifiques</a></h3>
<div class="sect3">
<h4 id="_tableaux"><a class="anchor" href="#_tableaux"></a><a class="link" href="#_tableaux">3.1.1. Tableaux</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type primitif <a href="https://doc.rust-lang.org/std/primitive.array.html">tableau</a> permet de manipuler</p>
<div class="ulist">
<ul>
<li>
<p>des collections de taille fixe</p>
</li>
<li>
<p>allouÃ©es sur la pile</p>
</li>
<li>
<p>d&#8217;Ã©lÃ©ments de mÃªme type</p>
</li>
</ul>
</div>
</li>
<li>
<p>La crÃ©ation d&#8217;un tableau se fait :</p>
<div class="ulist">
<ul>
<li>
<p>Ã  partir d&#8217;une liste d&#8217;Ã©lÃ©ments entre <code>[]</code> (<code>[1, 3, 5, 7]</code>), ou</p>
</li>
<li>
<p>Ã  partir d&#8217;une expression et d&#8217;un nombre de copies (<code>[x; N]</code> <em>N</em> copies de <em>x</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;accÃ¨s aux Ã©lÃ©ments se fait par indice (<code>t[0]</code>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/array.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut array: [i32; 3] = [0; 3];
array[1] = 1;
array[2] = 2;

assert_eq!([1, 2], &amp;array[1..]);

for x in array {
    print!("{} ", x);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_les_vecteurs"><a class="anchor" href="#_les_vecteurs"></a><a class="link" href="#_les_vecteurs">3.1.2. Les vecteurs</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour reprÃ©senter un tableau de valeurs de taille variable, Rust propose le type <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a></p>
</li>
<li>
<p>Les vecteurs sont allouÃ©s dynamiquement sur le tas.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">crÃ©ation d&#8217;un vecteur (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v: Vec&lt;i32&gt; = Vec::new();
v.push(5);
v.push(6);
v.push(7);

let w: Vec&lt;i32&gt; = vec![5, 6, 7]; //macro Ã©quivalent</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">AccÃ©der aux Ã©lÃ©ments d&#8217;un vecteur (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v = vec![1, 2, 3, 4, 5];

let x: &amp;i32 = &amp;v[2]; // panique si l'index n'existe pas

match v.get(2) {
    Some(y) =&gt; println!("v[3] == {}", y),
    None =&gt; println!("index non-existant")
}

v[2] = 42; // car le vecteur v est mutable</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Initialisation avec une taille connue (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let n : usize = 100; <i class="conum" data-value="1"></i><b>(1)</b>
let zero_v = vec![0; n];
let one_v = vec![1; n];</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>usize</code> est le type entier pour les positions d&#8217;un vecteur.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">ItÃ©rer sur un vecteur (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v = vec![1, 2, 3, 4, 5];

// itÃ©ration non-mutable, i est de type &amp;i32
for i in &amp;v {
    println!("{}", i);
}

// itÃ©ration mutable, i est de type &amp;mut i32
// on peut incrÃ©menter chaque Ã©lÃ©ment du vecteur
for i in &amp;mut v {
    *i += 1;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ItÃ©rer sur un vecteur sans rÃ©fÃ©rence (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v = vec![1, 2, 3, 4, 5];

// itÃ©ration directement sur le vecteur les Ã©lÃ©ments du vecteur
// sont Â« dÃ©placÃ©s Â» dans i. v ne pourra plus Ãªtre utilisÃ© par la
// suite.
for i in v {
    println!("{}", i);
}

//v[0] = 15; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ERREUR : <em>borrow of moved value: `v`</em>. Nous verrons prÃ©cisÃ©ment ce point dans le cours sur le <em>Borrow Checker</em>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_gÃ©nÃ©ricitÃ©"><a class="anchor" href="#_gÃ©nÃ©ricitÃ©"></a><a class="link" href="#_gÃ©nÃ©ricitÃ©">3.1.3. GÃ©nÃ©ricitÃ©</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type de <code>vec![1,2,3]</code> est <code>std::Vec&lt;i32&gt;</code></p>
</li>
<li>
<p>Le type de <code>vec!["a","b","c"]</code> est <code>std::Vec&lt;&amp;str&gt;</code></p>
</li>
<li>
<p><code>std::Vec&lt;T&gt;</code> est <a href="https://doc.rust-lang.org/book/ch10-01-syntax.html">gÃ©nÃ©rique de paramÃ¨tre <code>T</code></a></p>
</li>
<li>
<p><code>T</code> peut Ãªtre remplacÃ© ici par tout autre type</p>
</li>
<li>
<p>Les mÃ©thodes de <code>std::Vec&lt;T&gt;</code> peuvent utiliser le type gÃ©nÃ©rique:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub fn push(&amp;mut self, value: T)   // empile un Ã©lÃ©ment en fin de vecteur
pub fn pop(&amp;mut self) -&gt; Option&lt;T&gt; // dÃ©pile un Ã©lÃ©ment</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_structures"><a class="anchor" href="#_structures"></a><a class="link" href="#_structures">3.1.4. Structures</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une structure est un type composite composÃ© de membres</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/struct.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">struct Personne {
    nom: String,
    annÃ©e_naissance: i32,
}

let mut ada = Personne {
    nom : String::from("Ada Lovelace"),
    annÃ©e_naissance: 0,
};

println!("nom = {}", ada.nom);
ada.annÃ©e_naissance = 1815;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_constructeur"><a class="anchor" href="#_constructeur"></a><a class="link" href="#_constructeur">Constructeur</a></h5>
<div class="ulist">
<ul>
<li>
<p>On appelle <em>constructeur</em> une fonction qui retourne une instance de la structure.</p>
</li>
<li>
<p>Dans le cours suivant nous verrons comment associer directement des mÃ©thodes Ã  une structure.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/struct.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn nouvelle_personne(nom: String, annÃ©e: i32) -&gt; Personne {
    Personne {
        annÃ©e_naissance: annÃ©e,
        nom, // sucre syntaxique
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tuples"><a class="anchor" href="#_tuples"></a><a class="link" href="#_tuples">3.1.5. Tuples</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type primitif <a href="https://doc.rust-lang.org/std/primitive.tuple.html">tuples</a> regroupe un ensemble de valeurs de types hÃ©tÃ©rogÃ¨nes</p>
<div class="listingblock">
<div class="title">src/rust/exemples/tuple.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let tuple = ("hello", 5, 'c'); <i class="conum" data-value="1"></i><b>(1)</b>

assert_eq!(tuple.0, "hello"); <i class="conum" data-value="2"></i><b>(2)</b>
assert_eq!(tuple.1, 5);
assert_eq!(tuple.2, 'c');

let (x, y, z) = tuple; <i class="conum" data-value="3"></i><b>(3)</b>
assert_eq!(z, 'c');</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>le type de <code>tuple</code> est <code>(&amp;'static str, i32, char)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>accÃ¨s aux champs par <code>.0</code>, <code>.1</code>, â¦</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><em>pattern matching</em> pour dÃ©construire le tuple</td>
</tr>
</table>
</div>
</li>
<li>
<p>Les <a href="https://doc.rust-lang.org/book/ch05-01-defining-structs.html#using-tuple-structs-without-named-fields-to-create-different-types">structures tuples</a> sont un cas particulier de structure oÃ¹ les membres ne sont pas nommÃ©s (similaires au type primitif tuple)</p>
<div class="listingblock">
<div class="title">src/rust/exemples/tuple.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">struct ColorRGB(u8, u8, u8);
let color = ColorRGB(255, 0, 0);

// On peut utiliser .0 .1 pour nommer les champs
println!("red channel = {}", color.0);

// On peut aussi dÃ©construire la structure avec du pattern matching
let ColorRGB(r, g, b) = color;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_enum"><a class="anchor" href="#_enum"></a><a class="link" href="#_enum">3.1.6. Enum</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les types <a href="https://doc.rust-lang.org/reference/items/enumerations.html"><code>Enum</code></a> sont des types disjoints.</p>
</li>
<li>
<p>Chaque instance ne peut avoir qu&#8217;un seul des types Ã  la fois.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/enum.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">enum Variant { <i class="conum" data-value="1"></i><b>(1)</b>
    Rien,
    Nombre(i32),
    Texte(String),
}
    let v1: Variant = Variant::Rien;
    let v2: Variant = Variant::Nombre(42);
    let v3: Variant = Variant::Texte(String::from("Hello"));</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Variant</code> peut contenir au choix un entier signÃ©, une chaÃ®ne ou rien du tout.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_pattern_matching"><a class="anchor" href="#_pattern_matching"></a><a class="link" href="#_pattern_matching">3.1.7. Pattern matching</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <a href="https://doc.rust-lang.org/book/ch06-02-match.html"><em>pattern matching</em></a> permet de</p>
<div class="ulist">
<ul>
<li>
<p>reprÃ©senter un structure conditionnelle avec plusieurs branches</p>
</li>
<li>
<p>dÃ©construire les types composites</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <em>pattern matching</em> est trÃ¨s pratique pour manipuler les types <code>Enum</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/enum.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn affiche(v: Variant) {
    match v {
        Variant::Rien =&gt; println!("Le variant est vide"),
        Variant::Nombre(n) =&gt; println!("Le variant contient le nombre {}", n),
        Variant::Texte(s) =&gt; println!("Le variant contient le texte {}", s),
    }
}
    affiche(v1);
    affiche(v2);
    affiche(v3);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_des_erreurs"><a class="anchor" href="#_gestion_des_erreurs"></a><a class="link" href="#_gestion_des_erreurs">3.1.8. Gestion des erreurs</a></h4>
<div class="ulist">
<ul>
<li>
<p>En C/C++, on reprÃ©sente souvent l&#8217;absence de valeur par un pointeur <a href="https://en.cppreference.com/w/cpp/language/nullptr"><code>nullptr</code></a>.</p>
<div class="ulist">
<ul>
<li>
<p>cet usage est cause de nombreuses erreurs difficiles Ã  dÃ©tecter, c&#8217;est pourquoi Rust interdit les rÃ©fÃ©rences nulles.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Rust utilise le type <a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>Option&lt;T&gt;</code></a> avec deux variants</p>
<div class="ulist">
<ul>
<li>
<p><code>None</code> qui reprÃ©sente l&#8217;absence de valeur</p>
</li>
<li>
<p><code>Some(T)</code> qui reprÃ©sente une valeur de type <code>T</code> (<code>T</code> est un type gÃ©nÃ©rique)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn racine(n : f64) -&gt; Option&lt;f64&gt; {
    if n &gt; 0.0 {
        Some(n.sqrt())
    } else {
        None
    }
}
    racine(25.0);  // -&gt; Some(5.0)
    racine(-25.0); // -&gt; None
    
    if let Some(r) = racine(25.0) { <i class="conum" data-value="1"></i><b>(1)</b>
        println!("La racine est {}", r);
    } else {
        println!("Pas de racine rÃ©elle");
    }
    
    // panique si None
    let v : f64 = racine(25.0).unwrap(); 
    let v : f64 = racine(25.0).expect("erreur: racine d'un nombre nÃ©gatif"); </code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/reference/expressions/if-expr.html#if-let-expressions"><code>if let</code></a> permet de dÃ©construire une valeur d&#8217;un type composite</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_stdresultte"><a class="anchor" href="#_stdresultte"></a><a class="link" href="#_stdresultte">std::Result&lt;T,E&gt;</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/std/result/enum.Result.html"><code>Result</code></a> est semblable Ã  une option mais permet d&#8217;encoder une erreur de type <code>E</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">enum Result&lt;T, E&gt; {
    Ok(T),
    Err(E)
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_erreurs_fatales"><a class="anchor" href="#_erreurs_fatales"></a><a class="link" href="#_erreurs_fatales">Erreurs fatales</a></h5>
<div class="ulist">
<ul>
<li>
<p>Souvent une fonction a intÃ©rÃªt Ã  retourner un <code>Result</code> Ã  l&#8217;appelant et lui laisser dÃ©cider de la marche Ã  suivre en cas d&#8217;erreur.</p>
</li>
<li>
<p>Parfois, cela n&#8217;a pas de sens et il vaut mieux arrÃªter le programme avec la macro <code>panic!()</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">panic!("This is not implemented yet.");</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_consommation_de_la_valeur_result"><a class="anchor" href="#_consommation_de_la_valeur_result"></a><a class="link" href="#_consommation_de_la_valeur_result">Consommation de la valeur <code>Result</code></a></h5>
<div class="ulist">
<ul>
<li>
<p>Contrairement Ã  <code>Option`</code>, un <code>Result</code> doit toujours Ãªtre utilisÃ©.</p>
</li>
<li>
<p>Le compilateur gÃ©nÃ¨re un avertissement si un <code>Result</code> n&#8217;est pas consommÃ©.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let r : Result&lt;File, std::io::Error&gt; = File::open("hello.txt");

let f : File = match r {
    Ok(fichier) =&gt; fichier,
    Err(erreur) =&gt; panic!("Erreur d'ouverture: {:?}", erreur),
};</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_conversions_entre_resultt_e_et_optiont"><a class="anchor" href="#_conversions_entre_resultt_e_et_optiont"></a><a class="link" href="#_conversions_entre_resultt_e_et_optiont">Conversions entre Result&lt;T, E&gt; et Option&lt;T&gt;</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les types <code>Result</code> et <code>Option</code> sont proches.</p>
</li>
<li>
<p>Il est possible de convertir un <code>Result</code> en <code>Option</code> avec <code>res.ok()</code> et inversement avec <code>opt.ok_or(err)</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x: Result&lt;u32, &amp;str&gt; = Ok(10);
assert_eq!(Some(10), x.ok());
let x: Result&lt;u32, &amp;str&gt; = Err("Erreur");
assert_eq!(None, x.ok());

assert_eq!(Ok(10), Some(10).ok_or("Erreur"));
let x : Option&lt;u32&gt; = None;
assert_eq!(Err("Erreur"), x.ok_or("Erreur"));</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_gestion_fine_derreurs"><a class="anchor" href="#_gestion_fine_derreurs"></a><a class="link" href="#_gestion_fine_derreurs">Gestion fine d&#8217;erreurs</a></h5>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let f = File::open("hello.txt");

let f = match f {
    Ok(fichier) =&gt; fichier,
    Err(erreur) =&gt; match erreur.kind() {
        ErrorKind::NotFound =&gt; match File::create("hello.txt") {
            Ok(fc) =&gt; fc,
            Err(e) =&gt; panic!("Erreur de crÃ©ation du fichier : {:?}", e),
        },
        autre_erreur =&gt; {
            panic!("Erreur d'ouverture du fichier : {:?}", autre_erreur)
        }
    },
};</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_raccourci_avec_expect"><a class="anchor" href="#_raccourci_avec_expect"></a><a class="link" href="#_raccourci_avec_expect">Raccourci avec expect</a></h5>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let f = File::open("hello.txt").expect("Ãchec Ã  l'ouverture de hello.txt");</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_propagation_derreurs"><a class="anchor" href="#_propagation_derreurs"></a><a class="link" href="#_propagation_derreurs">Propagation d&#8217;Erreurs</a></h5>
<div class="ulist">
<ul>
<li>
<p>Vos propres fonctions peuvent retourner des erreurs</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn lire_fichier_1() -&gt; Result&lt;String, io::Error&gt; {
    let f = File::open("hello.txt");

    let mut f = match f {
        Ok(fichier) =&gt; fichier,
        Err(e) =&gt; return Err(e),
    };

    let mut s = String::new();

    match f.read_to_string(&amp;mut s) {
        Ok(_) =&gt; Ok(s),
        Err(e) =&gt; Err(e),
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_opÃ©rateur"><a class="anchor" href="#_opÃ©rateur"></a><a class="link" href="#_opÃ©rateur">OpÃ©rateur <code>?</code></a></h5>
<div class="ulist">
<ul>
<li>
<p>Ãcrire du code qui propage les erreurs est fastidieux</p>
</li>
<li>
<p>L&#8217;opÃ©rateur <code>?</code> peut-Ãªtre utilisÃ© dans les fonctions qui retournent <code>Result</code> pour en faciliter l&#8217;Ã©criture</p>
<div class="ulist">
<ul>
<li>
<p>si le rÃ©sultat est <code>Err</code>, l&#8217;opÃ©rateur <code>?</code> retourne l&#8217;erreur.</p>
</li>
<li>
<p>si le rÃ©sultat est <code>Ok(x)</code>, l&#8217;opÃ©rateur <code>?</code> retourne <code>x</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn lire_fichier_2() -&gt; Result&lt;String, io::Error&gt; {
    let mut s = String::new();

    File::open("hello.txt")?.read_to_string(&amp;mut s)?; <i class="conum" data-value="1"></i><b>(1)</b>

    Ok(s)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ã chaque utilisation de ? si une erreur se produit, celle-ci est directement retournÃ©e et on sort de la fonction</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercice"><a class="anchor" href="#_exercice"></a><a class="link" href="#_exercice">3.1.9. Exercice</a></h4>
<div class="paragraph">
<p>Faire une somme de nombres imaginaires.</p>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/imag.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[derive(Debug,PartialEq)]
struct Imaginary {
    real: f64,
    im: f64,
}

fn sum(vs: &amp;Vec&lt;Imaginary&gt;) -&gt; Imaginary {
    let mut res = Imaginary {real:0.0, im: 0.0};
    for e in vs {
        res.real += e.real;
        res.im += e.im;
    }
    res
}

fn main() {
    let v = vec!(
        Imaginary{real:1.0, im:1.0}, Imaginary{real:2.0, im:2.0},
        Imaginary{real:3.0, im:3.0}, Imaginary{real:4.0, im:4.0},
        Imaginary{real:5.0, im:5.0});

    assert_eq!(Imaginary{real:15.0, im:15.0}, sum(&amp;v));
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concepts_objet_en_rust"><a class="anchor" href="#_concepts_objet_en_rust"></a><a class="link" href="#_concepts_objet_en_rust">3.2. Concepts objet en Rust</a></h3>
<div class="sect3">
<h4 id="_introduction_4"><a class="anchor" href="#_introduction_4"></a><a class="link" href="#_introduction_4">3.2.1. Introduction</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les choix de conception du langage ne proposent pas formellement de notion d&#8217;objet</p>
</li>
<li>
<p>Selon les dÃ©finitions, Rust supporte ou ne supporte pas la programmation objet</p>
</li>
<li>
<p>Les concepts du langage permettent d&#8217;implÃ©menter les concepts objets de faÃ§on efficace et Ã©lÃ©gante</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_objet"><a class="anchor" href="#_objet"></a><a class="link" href="#_objet">3.2.2. Objet</a></h4>
<div class="ulist">
<ul>
<li>
<p>Lors de son exÃ©cution, un <em>systÃ¨me OO</em> est <strong>un ensemble d&#8217;objets qui interagissent</strong></p>
<div class="ulist">
<ul>
<li>
<p>les objets forment donc l'<em>aspect dynamique</em> (Ã  l&#8217;exÃ©cution) d&#8217;un systÃ¨me OO</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un <em>objet</em> est formÃ© de deux composants indissociables</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
son <em>Ã©tat</em>
</td>
<td class="hdlist2">
<p>les valeurs prises par des variables le dÃ©crivant (<em>propriÃ©tÃ©s</em>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
son <em>comportement</em>
</td>
<td class="hdlist2">
<p>les opÃ©rations qui lui sont applicables</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Un objet est une <em>instance</em> d&#8217;une <em>classe</em></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dans certains langages objet (<a href="https://selflanguage.org/">Self</a> ou les anciennes versions de <a href="https://fr.wikipedia.org/wiki/JavaScript">Javascript</a>), la notion de classe n&#8217;existe pas. Les objets sont alors crÃ©Ã©s Ã  partir de modÃ¨les nommÃ©s <a href="https://fr.wikipedia.org/wiki/Programmation_orient%C3%A9e_prototype"><em>prototypes</em></a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Un objet peut avoir plusieurs types, i.e. supporter plusieurs interfaces</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_des_points_et_des_cercles"><a class="anchor" href="#_exemple_des_points_et_des_cercles"></a><a class="link" href="#_exemple_des_points_et_des_cercles">Exemple : des points et des cercles</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/points_and_circles.png" alt="points and circles" width="206" height="194">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Les objets <code>point1</code> et <code>point2</code> sont des points, <code>cercle1</code> est un cercle</p>
</li>
<li>
<p>L&#8217;Ã©tat de chaque objet est reprÃ©sentÃ© par la valeur de ses propriÃ©tÃ©s</p>
</li>
<li>
<p>Le centre du cercle est une rÃ©fÃ©rence sur un objet point</p>
</li>
<li>
<p>Le comportement n&#8217;est pas reprÃ©sentÃ© au niveau des objets</p>
<div class="ulist">
<ul>
<li>
<p>une opÃ©ration est invoquÃ©e par rapport Ã  un objet</p>
</li>
<li>
<p>mais est rattachÃ©e Ã  la classe (le code est partagÃ© par tous les objets d&#8217;une classe)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les objets <code>point1</code> et <code>point2</code> sont Ã©gaux mais pas identiques</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encapsulation_et_masquage_de_linformation"><a class="anchor" href="#_encapsulation_et_masquage_de_linformation"></a><a class="link" href="#_encapsulation_et_masquage_de_linformation">3.2.3. Encapsulation et masquage de l&#8217;information</a></h4>
<div class="ulist">
<ul>
<li>
<p>L'<em>encapsulation</em> consiste Ã  regrouper au sein d&#8217;une unique entitÃ© des donnÃ©es et des routines les manipulant</p>
</li>
<li>
<p>Ce principe est souvent associÃ© au <em>masquage de l&#8217;information</em> qui permet de cacher les dÃ©tails d&#8217;implÃ©mentation</p>
</li>
<li>
<p>Ce sont des piliers de l&#8217;approche objet</p>
<div class="ulist">
<ul>
<li>
<p>isole les structures internes de leur utilisation et donc autorise leur modification sans impact sur l&#8217;interface</p>
</li>
<li>
<p>permet d&#8217;ajouter des rÃ¨gles de validation ou des contraintes d&#8217;intÃ©gritÃ© sur les donnÃ©es</p>
</li>
<li>
<p>contrÃ´le le <em>couplage</em> entre les modules</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_objets_en_rust"><a class="anchor" href="#_objets_en_rust"></a><a class="link" href="#_objets_en_rust">3.2.4. Objets en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust ne propose pas d&#8217;objet en tant que tel</p>
</li>
<li>
<p>Cependant, les valeurs d&#8217;un type se comportent de la mÃªme faÃ§on</p>
</li>
<li>
<p>De plus, par dÃ©faut, la structure interne des types Rust est privÃ©e</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let mut v : Vec&lt;i32&gt; = Vec::new();
    v.push(12);
    v.len = 15;
    println!("{:?}", v);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ rustc vec.rs
error[E0616]: field `len` of struct `Vec` is private
 --&gt; vec.rs:4:7
  |
4 |     v.len = 15;
  |       ^^^ private field

error: aborting due to previous error

For more information about this error, try `rustc --explain E0616`.</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_des_points_et_des_cercles_en_rust"><a class="anchor" href="#_exemple_des_points_et_des_cercles_en_rust"></a><a class="link" href="#_exemple_des_points_et_des_cercles_en_rust">Exemple : des points et des cercles en Rust</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let point1 = Point::from(1.0, 2.0);
assert_eq!(point1.abscissa(), 1.0);
assert_eq!(point1.ordinate(), 2.0);

let point2 = Point::from(1.0, 2.0);
assert_eq!(point2.abscissa(), 1.0);
assert_eq!(point2.ordinate(), 2.0);

let circle1 = Circle::from(point1, 2.0); <i class="conum" data-value="1"></i><b>(1)</b>
assert_eq!(circle1.center(), &amp;Point::from(1.0, 2.0));
assert_eq!(circle1.radius(), 2.0);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>la valeur de <code>point1</code> est dÃ©placÃ©e et <code>point1</code> n&#8217;est donc plus valide</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_communication_par_messages"><a class="anchor" href="#_communication_par_messages"></a><a class="link" href="#_communication_par_messages">3.2.5. Communication par messages</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un objet solitaire n&#8217;a que peu d&#8217;intÃ©rÃªt â diffÃ©rents objets doivent pouvoir interagir</p>
</li>
<li>
<p>Un <em>message</em> est un moyen de communication (d&#8217;interaction) entre objets</p>
</li>
<li>
<p><strong>Les messages sont les seuls moyens d&#8217;interaction entre objets</strong></p>
<div class="ulist">
<ul>
<li>
<p>â l&#8217;Ã©tat interne ne doit pas Ãªtre manipulÃ© directement</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le (ou les) type(s) d&#8217;un objet dÃ©termine les messages qu&#8217;il peut recevoir</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_message"><a class="anchor" href="#_message"></a><a class="link" href="#_message">3.2.6. Message</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un message est une requÃªte envoyÃ©e Ã  un objet pour demander l&#8217;exÃ©cution d&#8217;une opÃ©ration</p>
</li>
<li>
<p>Un message comporte trois composants:</p>
<div class="ulist">
<ul>
<li>
<p><strong>l&#8217;objet auquel il est envoyÃ©</strong> (le destinataire du message),</p>
</li>
<li>
<p>le nom de l&#8217;opÃ©ration Ã  invoquer,</p>
</li>
<li>
<p>les paramÃ¨tres effectifs.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_dÃ©placer_un_cercle"><a class="anchor" href="#_exemple_dÃ©placer_un_cercle"></a><a class="link" href="#_exemple_dÃ©placer_un_cercle">Exemple : dÃ©placer un cercle</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/moving_circle.png" alt="moving circle" width="347" height="297">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;utilisateur envoie un message Ã  un objet (Ã  une instance de) cercle</p>
</li>
<li>
<p>Le message se traduit par l&#8217;exÃ©cution de l&#8217;opÃ©ration <code>translate(1.0, 2.0)</code> par l&#8217;objet cercle</p>
</li>
<li>
<p>Durant cette exÃ©cution, le cercle envoie un message Ã  l&#8217;objet point (translater le cercle revient Ã  translater son centre)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mÃ©thodes_en_rust"><a class="anchor" href="#_mÃ©thodes_en_rust"></a><a class="link" href="#_mÃ©thodes_en_rust">3.2.7. MÃ©thodes en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le concept de <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html"><em>mÃ©thode</em></a> implÃ©mente les messages</p>
</li>
<li>
<p>Une <em>mÃ©thode</em></p>
<div class="ulist">
<ul>
<li>
<p>est dÃ©finie dans le contexte d&#8217;une structure, d&#8217;une Ã©numÃ©ration ou d&#8217;un trait,</p>
</li>
<li>
<p>possÃ¨de toujours un premier paramÃ¨tre nommÃ© <code>self</code> et reprÃ©sentant l&#8217;instance sur laquelle la mÃ©thode est invoquÃ©e</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_le_rayon_du_cercle"><a class="anchor" href="#_exemple_le_rayon_du_cercle"></a><a class="link" href="#_exemple_le_rayon_du_cercle">Exemple : le rayon du cercle</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">impl Circle {
    /// Retourne le rayon du cercle.
    pub fn radius(&amp;self) -&gt; f64 {
        self.radius
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_dÃ©placer_un_cercle_2"><a class="anchor" href="#_exemple_dÃ©placer_un_cercle_2"></a><a class="link" href="#_exemple_dÃ©placer_un_cercle_2">Exemple : dÃ©placer un cercle</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let p = Point::from(6.0, 9.0);
let mut c = Circle::from(p, 5.0);

c.move_by(4.0, 1.0);
assert_eq!(c.center(), &amp;Point::from(10.0, 10.0));
assert_eq!(c.radius(), 5.0);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fonction_associÃ©e"><a class="anchor" href="#_fonction_associÃ©e"></a><a class="link" href="#_fonction_associÃ©e">3.2.8. Fonction associÃ©e</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions"><em>fonction associÃ©e</em></a> (<em>associated functions</em>) est une fonction dÃ©finie dans le contexte d&#8217;une structure</p>
</li>
<li>
<p>Il est possible de dÃ©finir une telle fonction sans le paramÃ¨tre <code>self</code></p>
<div class="ulist">
<ul>
<li>
<p>invoquÃ©e par l&#8217;intermÃ©diaire du nom de la structure (<code>Rectangle::square(3)</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cette notion est Ã  rapprocher du concept de <em>mÃ©thode de classe</em></p>
</li>
<li>
<p>Une fonction qui retourne une instance d&#8217;une structure est dÃ©nommÃ©e <em>constructeur</em></p>
<div class="ulist">
<ul>
<li>
<p><code>Self</code> peut Ãªtre utilisÃ© pour rÃ©fÃ©rencer le type se trouvant aprÃ¨s <code>impl</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">impl Point {
    /// Initialise un point Ã  partir de coordonnÃ©es cartÃ©siennes.
    pub fn from(x: f64, y: f64) -&gt; Self {
        Self {
            x,
            y,
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type"><a class="anchor" href="#_type"></a><a class="link" href="#_type">3.2.9. Type</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>type</em> est un modÃ¨le abstrait rÃ©unissant Ã  un haut degrÃ© les traits essentiels de tous les Ãªtres ou de tous les objets de mÃªme nature</p>
</li>
<li>
<p>En informatique, un <em>type (de donnÃ©e)</em> spÃ©cifie:</p>
<div class="ulist">
<ul>
<li>
<p>l&#8217;ensemble des valeurs possibles pour cette donnÃ©e (dÃ©finition en <em>extension</em>),</p>
</li>
<li>
<p>l&#8217;ensemble des opÃ©rations applicables Ã  cette donnÃ©e (dÃ©finition en <em>intention</em>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un type spÃ©cifie l'<em>interface</em> par laquelle une donnÃ©e peut Ãªtre manipulÃ©e</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_un_type_dÃ©plaÃ§able"><a class="anchor" href="#_exemple_un_type_dÃ©plaÃ§able"></a><a class="link" href="#_exemple_un_type_dÃ©plaÃ§able">Exemple : un type DÃ©plaÃ§able</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/deplacable.png" alt="deplacable" width="234" height="84">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_en_rust_les_traits"><a class="anchor" href="#_type_en_rust_les_traits"></a><a class="link" href="#_type_en_rust_les_traits">3.2.10. Type en Rust : les <em>traits</em></a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/book/ch10-02-traits.html"><em>trait</em></a> (<code>trait</code>) prÃ©cise un ensemble d&#8217;opÃ©rations dont doit disposer un type</p>
</li>
<li>
<p>Une mÃ©thode d&#8217;un trait peut Ãªtre abstraite ou disposer d&#8217;une implÃ©mentation par dÃ©faut</p>
</li>
<li>
<p>Un trait est proche de la notion d'<em>interface</em> ou de <em>classe abstraite</em> dans d&#8217;autres langages</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_le_trait_dÃ©plaÃ§able"><a class="anchor" href="#_exemple_le_trait_dÃ©plaÃ§able"></a><a class="link" href="#_exemple_le_trait_dÃ©plaÃ§able">Exemple : le <em>trait</em> DÃ©plaÃ§able</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub trait Movable {
    /// DÃ©place l'Ã©lÃ©ment d'un dÃ©calage donnÃ©
    fn move_by(&amp;mut self, dx: f64, dy: f64);

    /// Retourne true si l'Ã©lÃ©ment se trouve Ã  la position en paramÃ¨tre.
    fn is_at(&amp;self, x: f64, y: f64) -&gt; bool;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_limplÃ©mentation_du_trait_dÃ©plaÃ§able_dans_point"><a class="anchor" href="#_exemple_limplÃ©mentation_du_trait_dÃ©plaÃ§able_dans_point"></a><a class="link" href="#_exemple_limplÃ©mentation_du_trait_dÃ©plaÃ§able_dans_point">Exemple : l&#8217;implÃ©mentation du <em>trait</em> DÃ©plaÃ§able dans Point</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">impl Movable for Point {
    /// DÃ©place le point.
    /// # Examples
    /// 
    /// ```
    /// use shapes::movable::Movable;
    /// use shapes::point::Point;
    /// let mut point = Point::from(6.0, 9.0);
    /// 
    /// point.move_by(4.0, 1.0);
    /// assert_eq!(point.abscissa(), 10.0);
    /// assert_eq!(point.ordinate(), 10.0);
    /// ```
    fn move_by(&amp;mut self, dx: f64, dy: f64) {
        self.x += dx;
        self.y += dy;
    }

    /// Retourne true si le point est Ã  la position en paramÃ¨tre.
    fn is_at(&amp;self, x: f64, y: f64) -&gt; bool {
        self.x == x &amp;&amp; self.y == y
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe"><a class="anchor" href="#_classe"></a><a class="link" href="#_classe">3.2.11. Classe</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <em>classe</em> est un "modÃ¨le" (un "moule") pour une catÃ©gorie d&#8217;objets structurellement identiques</p>
</li>
<li>
<p>Une classe dÃ©finit donc l&#8217;implÃ©mentation d&#8217;un objet (son Ã©tat interne et le codage de ses opÃ©rations)</p>
</li>
<li>
<p>L&#8217;ensemble des classes dÃ©crit l'<em>aspect statique</em> d&#8217;un systÃ¨me OO</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_structure_dune_classe"><a class="anchor" href="#_structure_dune_classe"></a><a class="link" href="#_structure_dune_classe">Structure d&#8217;une classe</a></h5>
<div class="ulist">
<ul>
<li>
<p>Une classe comporte:</p>
<div class="ulist">
<ul>
<li>
<p>la dÃ©finition des <em>attributs</em> (ou <em>variables d&#8217;instance</em>),</p>
</li>
<li>
<p>la <em>signature</em> des opÃ©rations (ou <em>mÃ©thodes</em>),</p>
</li>
<li>
<p>la <em>rÃ©alisation</em> (ou <em>dÃ©finition</em>) des mÃ©thodes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Chaque instance aura sa propre copie des attributs (son Ã©tat)</p>
</li>
<li>
<p>La signature d&#8217;une opÃ©ration englobe son nom et le type de ses paramÃ¨tres</p>
</li>
<li>
<p>L&#8217;ensemble des signatures de mÃ©thodes reprÃ©sente l&#8217;interface de la classe (publique)</p>
</li>
<li>
<p>L&#8217;ensemble des dÃ©finitions d&#8217;attributs et de mÃ©thodes forme l&#8217;implÃ©mentation de la classe (privÃ©)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_les_classes_cercle2d_et_point2d"><a class="anchor" href="#_exemple_les_classes_cercle2d_et_point2d"></a><a class="link" href="#_exemple_les_classes_cercle2d_et_point2d">Exemple : les classes <code>Cercle2D</code> et <code>Point2D</code></a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/classe_point_cercle.png" alt="classe point cercle" width="227" height="250">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Un rectangle reprÃ©sente une classe</p>
<div class="ulist">
<ul>
<li>
<p>1er pavÃ©: nom de la classe</p>
</li>
<li>
<p>2iÃ¨me pavÃ©: attributs</p>
</li>
<li>
<p>3iÃ¨me pavÃ©: signature des mÃ©thodes</p>
</li>
</ul>
</div>
</li>
<li>
<p>en gÃ©nÃ©ral, les attributs sont privÃ©s et les mÃ©thodes publiques</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_instanciation_dune_classe"><a class="anchor" href="#_instanciation_dune_classe"></a><a class="link" href="#_instanciation_dune_classe">Instanciation d&#8217;une classe</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le mÃ©canisme d'<em>instanciation</em> permet de crÃ©er des objets Ã  partir d&#8217;une classe</p>
</li>
<li>
<p>Chaque objet est une instance d&#8217;une classe</p>
</li>
<li>
<p>Lors de l&#8217;instanciation,</p>
<div class="ulist">
<ul>
<li>
<p>de la mÃ©moire est allouÃ©e pour l&#8217;objet,</p>
</li>
<li>
<p>l&#8217;objet est initialisÃ© (appel du constructeur) afin de respecter l&#8217;invariant de la classe.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classes_en_rust"><a class="anchor" href="#_classes_en_rust"></a><a class="link" href="#_classes_en_rust">3.2.12. Classes en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les <a href="https://doc.rust-lang.org/book/ch05-01-defining-structs.html">structures</a> (<code>struct</code>) et les <a href="https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html">Ã©numÃ©rations</a> (<code>enum</code>) permettent de crÃ©er de nouveaux types de donnÃ©es</p>
</li>
<li>
<p>Les <em>champs</em> d&#8217;une structure ou les <em>variantes</em> d&#8217;une Ã©numÃ©ration peuvent Ãªtre associÃ©s Ã  des fonctions grÃ¢ce Ã  des <a href="https://doc.rust-lang.org/reference/items/implementations.html">blocs d&#8217;implÃ©mentation</a> (<code>impl</code>)</p>
</li>
<li>
<p>L&#8217;encapsulation est assurÃ©e par les diffÃ©rentes constructions du langage (fonctions, mÃ©thodes, structures, Ã©numÃ©rations, modules, et constantes)</p>
<div class="ulist">
<ul>
<li>
<p>par dÃ©faut, tout est privÃ©</p>
</li>
<li>
<p>le <a href="https://doc.rust-lang.org/book/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html#exposing-paths-with-the-pub-keyword">mot-clÃ© <code>pub</code></a> permet d&#8217;exporter les constructions souhaitÃ©es</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_la_structure_cercle"><a class="anchor" href="#_exemple_la_structure_cercle"></a><a class="link" href="#_exemple_la_structure_cercle">Exemple : la structure Cercle</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use crate::movable::Movable;
use crate::point::Point;

pub struct Circle {
    center: Point,
    radius: f64,
}

/// DÃ©finit une structure pour un cercle en 2D.
/// # Examples
/// 
/// ```
/// use shapes::point::Point;
/// use shapes::circle::Circle;
/// 
/// let c = Circle::from(Point::from(6.0, 9.0), 5.0);
/// 
/// assert_eq!(c.center(), &amp;Point::from(6.0, 9.0));
/// assert_eq!(c.radius(), 5.0);
/// ```
/// 
impl Circle {
    /// Initialise un cercle Ã  partir de son centre et de son rayon.
    pub fn from(center: Point, radius: f64) -&gt; Self {
        Self {
            center,
            radius,
        }
    }

    /// Retourne le centre du cercle.
    pub fn center(&amp;self) -&gt; &amp;Point {
        &amp;self.center
    }

    //tag::circle_radius[]
    /// Retourne le rayon du cercle.
    pub fn radius(&amp;self) -&gt; f64 {
        self.radius
    }
    //end::circle_radius[]
}

impl Movable for Circle {
    /// DÃ©place le cercle.
    /// # Examples
    /// 
    /// ```
    /// use shapes::movable::Movable;
    /// use shapes::point::Point;
    /// use shapes::circle::Circle;
    /// let mut p = Point::from(6.0, 9.0);
    /// let mut c = Circle::from(p, 5.0);
    /// 
    /// c.move_by(4.0, 1.0);
    /// assert_eq!(c.center(), &amp;Point::from(10.0, 10.0));
    /// assert_eq!(c.radius(), 5.0);
    /// ```
    fn move_by(&amp;mut self, dx: f64, dy: f64) {
        self.center.move_by(dx, dy);
    }

    /// Retourne true si le centre du cercle est Ã  la position en paramÃ¨tre.
    fn is_at(&amp;self, x: f64, y: f64) -&gt; bool {
        self.center.abscissa() == x &amp;&amp; self.center.ordinate() == y
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe_et_type"><a class="anchor" href="#_classe_et_type"></a><a class="link" href="#_classe_et_type">3.2.13. Classe et type</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une classe implÃ©mente un ou plusieurs types, i.e. respecte une ou plusieurs interfaces</p>
</li>
<li>
<p>Un objet peut avoir plusieurs types mais est une instance d&#8217;une seule classe</p>
</li>
<li>
<p>Des objets de classes diffÃ©rentes peuvent avoir le mÃªme type</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_cercles_et_points_sont_de_type_dÃ©plaÃ§able"><a class="anchor" href="#_exemple_cercles_et_points_sont_de_type_dÃ©plaÃ§able"></a><a class="link" href="#_exemple_cercles_et_points_sont_de_type_dÃ©plaÃ§able">Exemple : cercles et points sont de type DÃ©plaÃ§able</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/classe_et_type.png" alt="classe et type" width="308" height="374">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sous_type"><a class="anchor" href="#_sous_type"></a><a class="link" href="#_sous_type">3.2.14. Sous-type</a></h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Un type T<sub>1</sub> est un <em>sous-type</em> d&#8217;un type T<sub>2</sub> si l&#8217;interface de T<sub>1</sub> contient l&#8217;interface de T<sub>2</sub>.</p>
</div>
<div class="paragraph">
<p>De faÃ§on duale, un type T<sub>1</sub> est un <em>sous-type</em> d&#8217;un type T<sub>2</sub> si l&#8217;ensemble des instances de T<sub>2</sub> inclut l&#8217;ensemble des instances de T<sub>1</sub>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Un sous-type possÃ¨de une interface plus riche, i.e. au moins toutes les opÃ©rations du super-type</p>
</li>
<li>
<p>De maniÃ¨re Ã©quivalente, l&#8217;extension du super-type contient l&#8217;extension du sous-type, i.e. tout objet du sous-type est aussi instance du super-type</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_dÃ©plaÃ§able_et_modifiable"><a class="anchor" href="#_exemple_dÃ©plaÃ§able_et_modifiable"></a><a class="link" href="#_exemple_dÃ©plaÃ§able_et_modifiable">Exemple : DÃ©plaÃ§able et Modifiable</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/deplacable_et_redimensionnable.png" alt="deplacable et redimensionnable" width="240" height="201">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hÃ©ritage"><a class="anchor" href="#_hÃ©ritage"></a><a class="link" href="#_hÃ©ritage">3.2.15. HÃ©ritage</a></h4>
<div class="ulist">
<ul>
<li>
<p>L'<em>hÃ©ritage</em> permet de dÃ©finir l&#8217;implÃ©mentation d&#8217;une classe Ã  partir de l&#8217;implÃ©mentation d&#8217;une autre</p>
</li>
<li>
<p>Ce mÃ©canisme permet, lors de la dÃ©finition d&#8217;une nouvelle classe, de ne prÃ©ciser que ce qui change par rapport Ã  une classe existante</p>
</li>
<li>
<p>Une <em>hiÃ©rarchie de classes</em> permet de gÃ©rer la complexitÃ©, en ordonnant les classes au sein d&#8217;arborescences d&#8217;abstraction croissante</p>
</li>
<li>
<p>Si Y hÃ©rite de X, on dit que</p>
<div class="ulist">
<ul>
<li>
<p>Y est une classe <em>fille</em> (<em>sous-classe</em>, <em>classe dÃ©rivÃ©e</em>) et que</p>
</li>
<li>
<p>X est une classe <em>mÃ¨re</em> (<em>super-classe</em>, <em>classe de base</em>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_rectangle_et_rectangle_plein"><a class="anchor" href="#_exemple_rectangle_et_rectangle_plein"></a><a class="link" href="#_exemple_rectangle_et_rectangle_plein">Exemple : rectangle et rectangle plein</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/rectangle_et_rectangle_plein.png" alt="rectangle et rectangle plein" width="227" height="250">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hÃ©ritage_en_rust"><a class="anchor" href="#_hÃ©ritage_en_rust"></a><a class="link" href="#_hÃ©ritage_en_rust">3.2.16. HÃ©ritage en Rust</a></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Le langage Rust ne supporte pas l&#8217;hÃ©ritage tel qu&#8217;il est dÃ©crit ci-dessus.</p>
</li>
<li>
<p>Le principe <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">Composition over inheritance</a> encourage l&#8217;utilisation de la composition par rapport Ã  l&#8217;hÃ©ritage pour la conception objet</p>
<div class="ulist">
<ul>
<li>
<p>ce principe est souvent utilisÃ© dans les <em>Design Patterns</em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Il est toutefois possible de manipuler des Ã©lÃ©ments sous la forme d'<em>objet trait</em> (<a href="https://doc.rust-lang.org/stable/book/ch17-02-trait-objects.html"><em>trait object</em></a>)</p>
</li>
<li>
<p>Un tel objet pointe vers une instance d&#8217;un type implÃ©mentant le trait concernÃ©</p>
<div class="ulist">
<ul>
<li>
<p>la taille d&#8217;un objet trait ne peut pas Ãªtre dÃ©terminÃ©e lors de la compilation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le type d&#8217;un objet trait est construit Ã  partir d&#8217;un type de pointeur (rÃ©fÃ©rence ou smart pointer), du mot-clÃ© <code>dyn</code> et du nom du trait</p>
</li>
<li>
<p>Un objet trait dispose d&#8217;une <a href="https://en.wikipedia.org/wiki/Virtual_method_table"><em>table de mÃ©thodes virtuelles</em></a> (<em>vtable</em>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_objet_trait"><a class="anchor" href="#_exemple_objet_trait"></a><a class="link" href="#_exemple_objet_trait">Exemple : objet trait</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let c = Circle::from(Point::from(1.0, 1.0), 1.0);
let c_as_movable_ref : &amp;dyn Movable = &amp;c;
assert!(c_as_movable_ref.is_at(1.0, 1.0)); <i class="conum" data-value="1"></i><b>(1)</b>

let circle_as_movable_box : Box&lt;dyn Movable&gt; =
    Box::new(
        Circle::from(Point::from(1.0, 1.0), 1.0)
    );
assert!(circle_as_movable_box.is_at(1.0, 1.0)); <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Seules les mÃ©thodes du trait sont accessibles (typage statique)</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hÃ©ritage_et_sous_typage"><a class="anchor" href="#_hÃ©ritage_et_sous_typage"></a><a class="link" href="#_hÃ©ritage_et_sous_typage">3.2.17. HÃ©ritage et sous-typage</a></h4>
<div class="ulist">
<ul>
<li>
<p>L&#8217;hÃ©ritage (ou <em>hÃ©ritage d&#8217;implÃ©mentation</em>) est un mÃ©canisme technique de rÃ©utilisation</p>
</li>
<li>
<p>Le sous-typage (ou <em>hÃ©ritage d&#8217;interface</em>) dÃ©crit comment un objet peut Ãªtre utilisÃ© Ã  la place d&#8217;un autre</p>
</li>
<li>
<p>Si Y est une sous-type de X, cela signifie que "Y est une sorte de X" (relation <em>IS-A</em>)</p>
</li>
<li>
<p>Dans un langage de programmation, les deux visions peuvent Ãªtre reprÃ©sentÃ©es de la mÃªme faÃ§on:
le mÃ©canisme d&#8217;hÃ©ritage permet d&#8217;implÃ©menter l&#8217;un ou l&#8217;autre</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_hÃ©ritage_dimplÃ©mentation_et_dinterface"><a class="anchor" href="#_exemple_hÃ©ritage_dimplÃ©mentation_et_dinterface"></a><a class="link" href="#_exemple_hÃ©ritage_dimplÃ©mentation_et_dinterface">Exemple : hÃ©ritage d&#8217;implÃ©mentation et d&#8217;interface</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/heritage_et_interface.png" alt="heritage et interface" width="491" height="374">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_polymorphisme"><a class="anchor" href="#_polymorphisme"></a><a class="link" href="#_polymorphisme">3.2.18. Polymorphisme</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>polymorphisme</em> est l&#8217;aptitude qu&#8217;ont des objets Ã  rÃ©agir diffÃ©remment Ã  un mÃªme message</p>
</li>
<li>
<p>L&#8217;intÃ©rÃªt est de pouvoir gÃ©rer une collection d&#8217;objets de faÃ§on homogÃ¨ne tout en conservant le comportement propre Ã  chaque type d&#8217;objet</p>
</li>
<li>
<p>Une mÃ©thode commune Ã  une hiÃ©rarchie de classe peut avoir plusieurs implÃ©mentations dans diffÃ©rentes classes</p>
</li>
<li>
<p>Une sous-classe peut <em>redÃ©finir</em> une mÃ©thode de sa super-classe pour spÃ©cialiser son comportement</p>
</li>
<li>
<p>Le choix de la mÃ©thode Ã  appeler est retardÃ© jusqu&#8217;Ã  l&#8217;exÃ©cution du programme (<a href="https://en.wikipedia.org/wiki/Dynamic_dispatch"><em>dynamic dispatch</em></a>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_une_description_pour_les_rectangles"><a class="anchor" href="#_exemple_une_description_pour_les_rectangles"></a><a class="link" href="#_exemple_une_description_pour_les_rectangles">Exemple : une description pour les rectangles</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/description_des_rectangles.png" alt="description des rectangles" width="227" height="282">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_polymorphisme_en_rust"><a class="anchor" href="#_polymorphisme_en_rust"></a><a class="link" href="#_polymorphisme_en_rust">3.2.19. Polymorphisme en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>La <a href="https://en.wikipedia.org/wiki/Virtual_method_table">table des mÃ©thodes virtuelles</a> d&#8217;un objet trait permet de retarder le choix de la mÃ©thode Ã  exÃ©cuter au moment de l&#8217;exÃ©cution</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">DÃ©placer des formes</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut shapes : Vec&lt;Box&lt;dyn Movable&gt;&gt; = vec![
    Box::new(Point::from(1.0, 2.0)),
    Box::new(Circle::from(Point::from(3.0, 4.0), 5.0)),
    ];
for shape in shapes.iter_mut() {
    shape.move_by(1.0, 2.0);
}
assert!(shapes[0].is_at(2.0, 4.0));
assert!(shapes[1].is_at(4.0, 6.0));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe_abstraite"><a class="anchor" href="#_classe_abstraite"></a><a class="link" href="#_classe_abstraite">3.2.20. Classe abstraite</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <em>classe abstraite</em> reprÃ©sente un concept abstrait qui ne peux pas Ãªtre instanciÃ©</p>
</li>
<li>
<p>En gÃ©nÃ©ral, son comportement ne peut pas Ãªtre intÃ©gralement implÃ©mentÃ© Ã  cause de son niveau de gÃ©nÃ©ralisation</p>
</li>
<li>
<p>Elle sera donc seulement utilisÃ©e comme classe de base dans une hiÃ©rarchie d&#8217;hÃ©ritage</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_la_hiÃ©rarchie_dhÃ©ritage_des_figures"><a class="anchor" href="#_exemple_la_hiÃ©rarchie_dhÃ©ritage_des_figures"></a><a class="link" href="#_exemple_la_hiÃ©rarchie_dhÃ©ritage_des_figures">Exemple : La hiÃ©rarchie d&#8217;hÃ©ritage des figures</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/hierarchie_heritage.png" alt="hierarchie heritage" width="477" height="201">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe_abstraite_en_rust"><a class="anchor" href="#_classe_abstraite_en_rust"></a><a class="link" href="#_classe_abstraite_en_rust">3.2.21. Classe abstraite en Rust</a></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Rust ne comporte pas de notion aussi gÃ©nÃ©rale que celle de classe abstraite cependant les traits permettent d&#8217;approcher ce comportement dans certains contextes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_hÃ©ritage_multiple_et_Ã _rÃ©pÃ©tition"><a class="anchor" href="#_hÃ©ritage_multiple_et_Ã _rÃ©pÃ©tition"></a><a class="link" href="#_hÃ©ritage_multiple_et_Ã _rÃ©pÃ©tition">3.2.22. HÃ©ritage multiple et Ã  rÃ©pÃ©tition</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>hÃ©ritage multiple</em> se produit lorsqu&#8217;une classe possÃ¨de plusieurs super-classes</p>
</li>
<li>
<p>Un <em>hÃ©ritage Ã  rÃ©pÃ©tition</em> se produit lorsqu&#8217;une classe hÃ©rite plusieurs fois d&#8217;une mÃªme super-classe</p>
</li>
<li>
<p>Ces types d&#8217;hÃ©ritage peuvent provoquer des conflits aux niveaux des attributs et mÃ©thodes</p>
<div class="ulist">
<ul>
<li>
<p>deux classes de base peuvent possÃ©der la mÃªme mÃ©thode,</p>
</li>
<li>
<p>un attribut peut Ãªtre hÃ©ritÃ© selon plusieurs chemins dans le graphe d&#8217;hÃ©ritage.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_une_hiÃ©rarchie_pour_les_vÃ©hicules"><a class="anchor" href="#_exemple_une_hiÃ©rarchie_pour_les_vÃ©hicules"></a><a class="link" href="#_exemple_une_hiÃ©rarchie_pour_les_vÃ©hicules">Exemple : une hiÃ©rarchie pour les vÃ©hicules</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/heritage_multiple.png" alt="heritage multiple" width="491" height="326">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Combien de numÃ©ros d&#8217;immatriculation possÃ¨de la voiture amphibie ?</p>
</li>
<li>
<p>Quelle opÃ©ration est invoquÃ©e quand une voiture amphibie reÃ§oit le message <code>avance</code> ?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modÃ¨les_mÃ©moire"><a class="anchor" href="#_modÃ¨les_mÃ©moire"></a><a class="link" href="#_modÃ¨les_mÃ©moire">4. ModÃ¨les MÃ©moire</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gestion_de_la_mÃ©moire_2"><a class="anchor" href="#_gestion_de_la_mÃ©moire_2"></a><a class="link" href="#_gestion_de_la_mÃ©moire_2">4.1. Gestion de la mÃ©moire</a></h3>
<div class="sect3">
<h4 id="_mÃ©moire_physique_et_mÃ©moire_virtuelle"><a class="anchor" href="#_mÃ©moire_physique_et_mÃ©moire_virtuelle"></a><a class="link" href="#_mÃ©moire_physique_et_mÃ©moire_virtuelle">4.1.1. MÃ©moire physique et mÃ©moire virtuelle</a></h4>
<div class="imageblock right">
<div class="content">
<img src="figs/virtmem.svg" alt="MÃ©moire virtuelle" width="303" height="480">
</div>
<div class="title">Figure 1. MÃ©moire physique et mÃ©moire virtuelle (source <span class="icon"><a class="image" href="https://commons.wikimedia.org/wiki/File:Memoire_virtuelle.svg?uselang=fr"><i class="fa fa-wikipedia-w"></i></a></span>)</div>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;accÃ¨s Ã  la mÃ©moire physique d&#8217;un ordinateur est Â«Â simplifiÃ©eÂ Â» par l&#8217;utilisation du mÃ©canisme de <em>mÃ©moire virtuelle</em></p>
<div class="ulist">
<ul>
<li>
<p>la mÃ©moire virtuelle fournit une <strong>abstraction</strong> pour l&#8217;accÃ¨s Ã  la mÃ©moire</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ce mÃ©canisme permet de</p>
<div class="ulist">
<ul>
<li>
<p>utiliser une mÃ©moire de masse Ã  la place de la mÃ©moire vive</p>
</li>
<li>
<p>protÃ©ger les accÃ¨s Ã  la mÃ©moire</p>
</li>
<li>
<p>partager des zones de mÃ©moire entre processus</p>
</li>
</ul>
</div>
</li>
<li>
<p>La mÃ©moire virtuelle repose sur de nombreux mÃ©canismes pour son fonctionnement (<em>pagination</em> ou <em>segmentation</em>, <em>traduction d&#8217;adresses</em>, <em>Memory Management Unit</em> ou <em>MMU</em>, â¦)</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">RÃ©fÃ©rences</div>
<ul>
<li>
<p>Article <span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/M%C3%A9moire_virtuelle"><i class="fa fa-wikipedia-w"></i></a></span> sur la mÃ©moire virtuelle</p>
</li>
<li>
<p>Chapitre sur la <a href="https://fr.wikibooks.org/wiki/Fonctionnement_d%27un_ordinateur/La_m%C3%A9moire_virtuelle">mÃ©moire virtuelle</a> du cours <a href="https://fr.wikibooks.org/wiki/Fonctionnement_d%27un_ordinateur">Fonctionnement d&#8217;un ordinateur</a></p>
</li>
<li>
<p>PrÃ©sentation <a href="https://youtu.be/nXYXLuqsllY">Le processus de boot</a>, Samuel Ortiz, Devoxx FR, 2021</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mÃ©moire_dun_processus"><a class="anchor" href="#_mÃ©moire_dun_processus"></a><a class="link" href="#_mÃ©moire_dun_processus">4.1.2. MÃ©moire d&#8217;un processus</a></h4>
<div class="imageblock right">
<div class="content">
<img src="figs/memlayout.png" alt="MÃ©moire d&#8217;un processus" width="201" height="597">
</div>
<div class="title">Figure 2. MÃ©moire d&#8217;un processus (source <span class="icon"><a class="image" href="https://commons.wikimedia.org/wiki/File:Typical_computer_data_memory_arrangement.png"><i class="fa fa-wikipedia-w"></i></a></span>)</div>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;OS et le matÃ©riel travaillent de concert pour que chaque processus ait l&#8217;impression</p>
<div class="ulist">
<ul>
<li>
<p>de disposer d&#8217;une vaste zone de mÃ©moire contigÃ¼e</p>
</li>
<li>
<p>d&#8217;Ãªtre seul Ã  s&#8217;exÃ©cuter</p>
</li>
</ul>
</div>
</li>
<li>
<p>La zone du programme comprend</p>
<div class="ulist">
<ul>
<li>
<p>le segment <em>text</em> qui contient le code du programme</p>
</li>
<li>
<p>le segment des donnÃ©es non initialisÃ©es (<em>Block Stating Symbol</em> ou <em>BSS</em>)</p>
</li>
<li>
<p>le segment des donnÃ©es initialisÃ©es (<em>Data</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le tas (<em>heap</em>) reprÃ©sente la mÃ©moire allouÃ©e dynamiquement</p>
<div class="ulist">
<ul>
<li>
<p>croÃ®t vers les adresses hautes</p>
</li>
</ul>
</div>
</li>
<li>
<p>La mÃ©moire libre sert de rÃ©serve</p>
</li>
<li>
<p>La pile (<em>Stack</em>) conserve les variables locales d&#8217;une fonction</p>
<div class="ulist">
<ul>
<li>
<p>dÃ©bute Ã  la plus haute adresse et croÃ®t vers les adresses basses</p>
</li>
<li>
<p>contient un cadre (<em>frame</em>) pour chaque fonction</p>
</li>
<li>
<p>lors d&#8217;un appel de fonction, sont empilÃ©s l&#8217;adresse de retour de la fonction, les paramÃ¨tres, les variables locales de la fonction</p>
</li>
<li>
<p>lorsque l&#8217;on quitte une fonction, le cadre correspondant est supprimÃ©</p>
</li>
<li>
<p>sa taille est rÃ©servÃ©e statiquement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">RÃ©fÃ©rence</div>
<ul>
<li>
<p><a href="https://ilay.org/yann/articles/mem/">Gestion de la mÃ©moire en C</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_problÃ¨mes_et_erreurs_liÃ©s_Ã _la_mÃ©moire"><a class="anchor" href="#_problÃ¨mes_et_erreurs_liÃ©s_Ã _la_mÃ©moire"></a><a class="link" href="#_problÃ¨mes_et_erreurs_liÃ©s_Ã _la_mÃ©moire">4.1.3. ProblÃ¨mes et erreurs liÃ©s Ã  la mÃ©moire</a></h4>
<div class="ulist">
<ul>
<li>
<p>De nombreuses erreurs peuvent conduire Ã  des problÃ¨mes d&#8217;utilisation de la mÃ©moire</p>
</li>
<li>
<p>Les exemples suivants sont en langage C</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">DÃ©rÃ©fÃ©rencement d&#8217;un pointeur null ou invalide</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int *ptr; // pointeur non initialisÃ©
int var = *ptr; // dÃ©rÃ©fÃ©rencement invalide</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">RÃ©fÃ©rences multiples Ã  une mÃªme zone mÃ©moire</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int* ptr = malloc(sizeof(int)); // alloue une zone mÃ©moire pour un entier
int* ptr2 = ptr; // ptr2 pointe sur la mÃªme zone mÃ©moire
*ptr = 5; // OK
free(ptr); // libÃ¨re la zone
ptr = NULL;
// ...
*ptr2 = 10; // accÃ¨s Ã  la zone dÃ©jÃ  libÃ©rÃ©e</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Fuite mÃ©moire (allocation sans dÃ©sallocation)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int* ptr = malloc(sizeof(int)); // alloue une zone mÃ©moire pour un entier
ptr = malloc(sizeof(int)); // ptr est rÃ©utilisÃ© (pas de free prÃ©alable =&gt; memory leak)
free(ptr); // libÃ©ration du second malloc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Passage d&#8217;un argument par valeur</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">void set(int i) {
    i = 3; // la variable locale est modifiÃ©e
}
int main(void) {
    int i = 2;
    set(i); // lors de l'appel, la valeur de i est copiÃ©e sur la pile
    // la valeur de i n'a pas changÃ©e
    return 0;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Adressage sur la pile</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">char *init_string() {
	char buff[16]; // le tableau est allouÃ© sur la pile (variable locale)
    // ...
	return buff;
}
int main(void) {
	char *str = init_string(); // str pointe sur une zone invalide (frame de init_string)
	return 0;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">DÃ©passement de l&#8217;espace allouÃ©</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int[] ptr = malloc(10 * sizeof(int)); // alloue une zone pour 10 entier (ptr[0] Ã  ptr[9])
int a = ptr[10]; // accÃ¨s au-delÃ  de la zone allouÃ©</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">DÃ©sallocation d&#8217;un zone non allouÃ©e (ou dÃ©sallocations multiples)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int *ptr; // pointeur non initialisÃ©
free(ptr); // libÃ©ration d'une zone non allouÃ©e</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©duire_le_risque_derreurs_liÃ©es_Ã _la_mÃ©moire"><a class="anchor" href="#_rÃ©duire_le_risque_derreurs_liÃ©es_Ã _la_mÃ©moire"></a><a class="link" href="#_rÃ©duire_le_risque_derreurs_liÃ©es_Ã _la_mÃ©moire">4.1.4. RÃ©duire le risque d&#8217;erreurs liÃ©es Ã  la mÃ©moire</a></h4>
<div class="ulist">
<ul>
<li>
<p>Comme vu prÃ©cÃ©demment, les risques d&#8217;erreurs liÃ©es Ã  l&#8217;utilisation de la mÃ©moire sont nombreux</p>
</li>
<li>
<p>Il est donc raisonnable de vouloir simplifier la tÃ¢che du dÃ©veloppeur</p>
</li>
<li>
<p>Deux approches sont possibles</p>
<div class="ulist">
<ul>
<li>
<p>proposer une gestion automatique de la mÃ©moire (Java, Python, â¦)</p>
</li>
<li>
<p>proposer un modÃ¨le plus strict et des bibliothÃ¨ques (Rust)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_automatique_de_la_mÃ©moire"><a class="anchor" href="#_gestion_automatique_de_la_mÃ©moire"></a><a class="link" href="#_gestion_automatique_de_la_mÃ©moire">4.1.5. Gestion automatique de la mÃ©moire</a></h4>
<div class="ulist">
<ul>
<li>
<p>La gestion automatique de la mÃ©moire s&#8217;appuie sur un processus particulier dÃ©nommÃ© <em>ramasse-miettes</em> (<em>garbage collector</em>)</p>
</li>
<li>
<p>Il est responsable de la libÃ©ration de la mÃ©moire allouÃ©e Ã  des objets qui ne sont plus utiles</p>
<div class="ulist">
<ul>
<li>
<p>dÃ©termine quels objets ne peuvent plus Ãªtre utilisÃ©s par le programme</p>
</li>
<li>
<p>rÃ©cupÃ¨re l&#8217;espace occupÃ© par ces objets</p>
</li>
</ul>
</div>
</li>
<li>
<p>DiffÃ©rentes approches peuvent Ãªtre utilisÃ©es</p>
<div class="ulist">
<ul>
<li>
<p>le comptage de rÃ©fÃ©rences,</p>
</li>
<li>
<p>les algorithmes traversant,</p>
</li>
<li>
<p>les algorithmes gÃ©nÃ©rationnels</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un ramasse-miettes possÃ¨de plusieurs avantages</p>
<div class="ulist">
<ul>
<li>
<p>Ã©limine presque totalement les problÃ¨mes de dÃ©sallocation de la mÃ©moire</p>
</li>
<li>
<p>peut optimiser les allocations/dÃ©sallocations (meilleures performances)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un ramasse-miettes comporte plusieurs inconvÃ©nients</p>
<div class="ulist">
<ul>
<li>
<p>s&#8217;exÃ©cute en parallÃ¨le du programme (ralentissements)</p>
</li>
<li>
<p>s&#8217;exÃ©cute <em>de temps en temps</em> (peu prÃ©visible, utilisation de plus de mÃ©moire)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approches par comptage de rÃ©fÃ©rences</div>
<ul>
<li>
<p>Chaque zone mÃ©moire allouÃ©s est associÃ©e Ã  un compteur qui matÃ©rialise le nombre de rÃ©fÃ©rences Ã  cette zone</p>
</li>
<li>
<p>Les zones ayant un compteur Ã  zÃ©ro peuvent Ãªtre supprimÃ©es</p>
</li>
<li>
<p>Permet la libÃ©ration rapide des zones</p>
</li>
<li>
<p>La gestion des compteurs est coÃ»teuse en temps de calcul et en espace mÃ©moire</p>
</li>
<li>
<p>Les cycles dans le graphe des rÃ©fÃ©rences ne sont pas gÃ©rÃ©s</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approches traversantes</div>
<ul>
<li>
<p>L&#8217;algorithme parcourt les objets en mÃ©moires pour dÃ©terminer s&#8217;ils sont accessibles</p>
</li>
<li>
<p>Le parcours est initialisÃ© Ã  partir de rÃ©fÃ©rences racines</p>
</li>
<li>
<p>Les objets qui n&#8217;ont pas Ã©tÃ© visitÃ©s peuvent Ãªtre Ã©liminÃ©s</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approches gÃ©nÃ©rationnelles</div>
<ul>
<li>
<p>L&#8217;idÃ©e est que la plupart des objets vont avoir une durÃ©e de vie courte</p>
</li>
<li>
<p>Les objets sont rÃ©partis en plusieurs gÃ©nÃ©rations (2 ou 3 en gÃ©nÃ©ral)</p>
</li>
<li>
<p>Un objet passe Ã  la gÃ©nÃ©ration supÃ©rieure s&#8217;il n&#8217;a pas Ã©tÃ© Ã©liminÃ© lors de l&#8217;exÃ©cution du ramasse-miette</p>
</li>
<li>
<p>Des algorithmes diffÃ©rents peuvent Ãªtre appliquÃ©s aux diffÃ©rentes gÃ©nÃ©rations</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">RÃ©fÃ©rences</div>
<ul>
<li>
<p>Article <span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Ramasse-miettes_(informatique)"><i class="fa fa-wikipedia-w"></i></a></span> sur le ramasse-miette</p>
</li>
<li>
<p><a href="https://www.baeldung.com/jvm-garbage-collectors">JVM Garbage Collectors</a>, <em>Baeldung</em></p>
</li>
<li>
<p><a href="https://blogs.oracle.com/javamagazine/understanding-garbage-collectors">Understanding Garbage Collectors</a>, <em>Christine H. Flood</em>, Java Magazine</p>
</li>
<li>
<p><a href="https://blogs.oracle.com/javamagazine/understanding-the-jdks-new-superfast-garbage-collectors">Understanding the JDKâs New Superfast Garbage Collectors</a>, <em>Raoul-Gabriel Urma</em> &amp; <em>Richard Warburton</em>, Java Magazine</p>
</li>
<li>
<p><a href="https://blogs.oracle.com/javamagazine/epsilon-the-jdks-do-nothing-garbage-collector">Epsilon: The JDKâs Do-Nothing Garbage Collector</a>, <em>Andrew Binstock</em>, Java Magazine</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pointeurs_en_rust"><a class="anchor" href="#_pointeurs_en_rust"></a><a class="link" href="#_pointeurs_en_rust">4.1.6. Pointeurs en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type de pointeur le plus simple en Rust est la rÃ©fÃ©rence (symbole <code>&amp;</code>)</p>
<div class="ulist">
<ul>
<li>
<p>emprunte une valeur</p>
</li>
<li>
<p>pas de fonctionnalitÃ©s supplÃ©mentaires</p>
</li>
<li>
<p>pas de surcoÃ»t (par rapport Ã  un pointeur en C)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les <em>smart pointers</em> sont des structures (dÃ©finies dans une bibliothÃ¨que)</p>
<div class="ulist">
<ul>
<li>
<p>se comportant comme des pointeurs</p>
</li>
<li>
<p>fournissant des fonctionnalitÃ©s complÃ©mentaires</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointers_2"><a class="anchor" href="#_smart_pointers_2"></a><a class="link" href="#_smart_pointers_2">4.1.7. Smart pointers</a></h4>
<div class="ulist">
<ul>
<li>
<p>Plusieurs types de <a href="https://doc.rust-lang.org/book/ch15-00-smart-pointers.html">smart pointers</a> sont fournis par la bibliothÃ¨que standard</p>
</li>
<li>
<p>Ils sont en gÃ©nÃ©ral implÃ©mentÃ©s avec des structures et possÃ¨dent la donnÃ©e qu&#8217;ils encapsulent</p>
</li>
<li>
<p>Chaque type de smart pointer propose des fonctionnalitÃ©s spÃ©cifiques</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Box&lt;T&gt;</code>
</td>
<td class="hdlist2">
<p>alloue des valeurs sur le tas</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Rc&lt;T&gt;</code>
</td>
<td class="hdlist2">
<p>permet la propriÃ©tÃ© multiple par comptage de rÃ©fÃ©rences</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>RefCell&lt;T&gt;</code>, <code>Ref&lt;T&gt;</code> et <code>RefMut&lt;T&gt;</code>
</td>
<td class="hdlist2">
<p>contrÃ´le les rÃ¨gles d&#8217;emprunt Ã  l&#8217;exÃ©cution plutÃ´t qu&#8217;Ã  la compilation</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Ils implÃ©mentent les traits <code>Deref</code> et <code>Drop</code></p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Deref</code>
</td>
<td class="hdlist2">
<p>fait qu&#8217;une instance se comporte comme une rÃ©fÃ©rence</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Drop</code>
</td>
<td class="hdlist2">
<p>permet d&#8217;adapter le code exÃ©cutÃ© quand le pointeur quitte sa portÃ©e</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>De nombreuses alternatives existent: <a href="https://doc.rust-lang.org/std/cell/struct.Cell.html"><code>Cell&lt;T&gt;</code></a>, <a href="https://doc.rust-lang.org/std/cell/struct.OnceCell.html"><code>OnceCell&lt;T&gt;</code></a>, <a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc&lt;T&gt;</code></a> , <a href="https://doc.rust-lang.org/std/sync/struct.Mutex.html"><code>Mutex</code></a>, <a href="https://doc.rust-lang.org/std/sync/struct.RwLock.html"><code>RwLock</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointer_boxt"><a class="anchor" href="#_smart_pointer_boxt"></a><a class="link" href="#_smart_pointer_boxt">4.1.8. Smart pointer <code>Box&lt;T&gt;</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Le smart pointer <a href="https://doc.rust-lang.org/std/boxed/index.html"><code>Box&lt;T&gt;</code></a> permet d&#8217;allouer une valeur sur le tas</p>
</li>
<li>
<p>Pas de coÃ»t supplÃ©mentaire</p>
</li>
<li>
<p>Pas d&#8217;autres capacitÃ©s particuliÃ¨res</p>
</li>
<li>
<p>UtilitÃ©</p>
<div class="ulist">
<ul>
<li>
<p>quand la taille d&#8217;un type ne peut pas Ãªtre connue Ã  la compilation</p>
</li>
<li>
<p>pour Ã©viter de copier une grande quantitÃ© de donnÃ©es lors du transfert de propriÃ©tÃ©</p>
</li>
<li>
<p>pour manipuler des objets traits</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_le_trait_deref"><a class="anchor" href="#_le_trait_deref"></a><a class="link" href="#_le_trait_deref">4.1.9. Le trait <code>Deref</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Le trait <a href="https://doc.rust-lang.org/std/ops/trait.Deref.html"><code>Deref</code></a> permet d&#8217;adapter l&#8217;opÃ©rateur de dÃ©rÃ©fÃ©rencement <code>*</code></p>
</li>
<li>
<p>Un smart pointer peut de cette faÃ§on Ãªtre manipulÃ© comme une rÃ©fÃ©rence</p>
</li>
<li>
<p>ImplÃ©menter ce trait nÃ©cessite de</p>
<div class="ulist">
<ul>
<li>
<p>dÃ©finir le type <code>Target</code></p>
</li>
<li>
<p>implÃ©menter la fonction <code>fn deref(&amp;self) &#8594; &amp;Self::Target</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use std::ops::Deref;

struct MyBox&lt;T&gt;(T);

impl&lt;T&gt; Deref for MyBox&lt;T&gt; {
    type Target = T;

    fn deref(&amp;self) -&gt; &amp;Self::Target {
        &amp;self.0
    }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;expression <code>*x</code> si <code>x</code> est une structure est rÃ©Ã©crite <code>*(x.deref())</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_le_trait_drop"><a class="anchor" href="#_le_trait_drop"></a><a class="link" href="#_le_trait_drop">4.1.10. Le trait <code>Drop</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Le trait <a href="https://doc.rust-lang.org/std/ops/trait.Drop.html"><code>Drop</code></a> permet d&#8217;adapter le code exÃ©cutÃ© lorsqu&#8217;un smart pointer sort de sa portÃ©e (<em>destructeur</em>)</p>
</li>
<li>
<p>ImplÃ©menter ce trait consiste Ã  dÃ©finir la fonction <code>fn drop(&amp;mut self)</code></p>
</li>
<li>
<p>Cette fonction ne peut pas Ãªtre appelÃ©e explicitement mais l&#8217;est par le compilateur</p>
<div class="ulist">
<ul>
<li>
<p>il est toutefois possible de forcer l&#8217;appel en utilisant <a href="https://doc.rust-lang.org/std/mem/fn.drop.html"><code>std::mem::drop</code></a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointer_rct"><a class="anchor" href="#_smart_pointer_rct"></a><a class="link" href="#_smart_pointer_rct">4.1.11. Smart pointer <code>Rc&lt;T&gt;</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>La structure <a href="https://doc.rust-lang.org/std/rc/index.html"><code>Rc&lt;T&gt;</code></a> permet de partager la propriÃ©tÃ© d&#8217;une valeur allouÃ©e sur le tas entre plusieurs propriÃ©taires</p>
<div class="ulist">
<ul>
<li>
<p>elle utilise un systÃ¨me de comptage de rÃ©fÃ©rences (<em>Reference Counted</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;appel de <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#impl-Clone"><code>clone</code></a> crÃ©e un nouveau pointeur sur la mÃªme valeur</p>
<div class="ulist">
<ul>
<li>
<p>et incrÃ©mente le compteur de rÃ©fÃ©rences</p>
</li>
<li>
<p>le compteur est consultable avec la mÃ©thode <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#method.strong_count"><code>Rc::strong_count</code></a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Quand le dernier pointeur <code>Rc</code> est dÃ©truit, la valeur est elle-mÃªme dÃ©truite</p>
</li>
<li>
<p>Cette structure ne peut pas Ãªtre utilisÃ©e dans un contexte multi-thread</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">enum List {
    Cons(i32, Rc&lt;List&gt;), <i class="conum" data-value="1"></i><b>(1)</b>
    Nil,
}

use crate::List::{Cons, Nil};
use std::rc::Rc;

fn main() {
    let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));
    let b = Cons(3, Rc::clone(&amp;a)); <i class="conum" data-value="2"></i><b>(2)</b>
    let c = Cons(4, Rc::clone(&amp;a));
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Le type de smart pointer est <code>Rc</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Rc::clone</code> incrÃ©mente le comptage des rÃ©fÃ©rences</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_interior_mutability_pattern"><a class="anchor" href="#_interior_mutability_pattern"></a><a class="link" href="#_interior_mutability_pattern">4.1.12. Interior Mutability Pattern</a></h4>
<div class="ulist">
<ul>
<li>
<p>La vÃ©rification Ã  la compilation du bon usage de la mÃ©moire apporte une grande fiabilitÃ©</p>
</li>
<li>
<p>Cependant, dans certaines circonstances, il est utile de pouvoir affaiblir ces contraintes pour une plus grande flexibilitÃ©</p>
</li>
<li>
<p>Le pattern <a href="https://doc.rust-lang.org/std/cell/index.html"><em>Interior Mutability</em></a> permet d&#8217;obtenir plusieurs rÃ©fÃ©rences sur un objet tout en permettant sa modification</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/struct.Cell.html"><code>Cell&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>permet de dÃ©placer la valeur depuis et vers le container</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html"><code>RefCell&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>contrÃ´le les rÃ¨gles d&#8217;emprunt Ã  l&#8217;exÃ©cution plutÃ´t qu&#8217;Ã  la compilation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/struct.OnceCell.html"><code>OnceCell&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour des valeurs qui ne doivent Ãªtre fixÃ©es qu&#8217;une unique fois</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointer_refcellt"><a class="anchor" href="#_smart_pointer_refcellt"></a><a class="link" href="#_smart_pointer_refcellt">4.1.13. Smart pointer <code>RefCell&lt;T&gt;</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>La structure <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html"><code>RefCell&lt;T&gt;</code></a> permet de retarder la vÃ©rification des rÃ¨gles d&#8217;emprunt <strong>au moment de l&#8217;exÃ©cution</strong> (<em>dynamic borrowing</em>)</p>
<div class="ulist">
<ul>
<li>
<p>est propriÃ©taire de la donnÃ©e qu&#8217;il contient</p>
</li>
<li>
<p>panique si la vÃ©rification Ã©choue</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les mÃ©thode <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html#method.borrow"><code>borrow</code></a> et <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html#method.borrow_mut"><code>borrow_mut</code></a> permettent de rÃ©cupÃ©rer une rÃ©fÃ©rence sur l&#8217;objet encapsulÃ©</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[derive(Debug)]
enum List {
    Cons(Rc&lt;RefCell&lt;i32&gt;&gt;, Rc&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};
use std::cell::RefCell;
use std::rc::Rc;

fn main() {
    let value = Rc::new(RefCell::new(5));

    let a = Rc::new(Cons(Rc::clone(&amp;value), Rc::new(Nil)));

    let b = Cons(Rc::new(RefCell::new(3)), Rc::clone(&amp;a));
    let c = Cons(Rc::new(RefCell::new(4)), Rc::clone(&amp;a));

    *value.borrow_mut() += 10;

    println!("a after = {a:?}"); // a after = Cons(RefCell { value: 15 }, Nil)
    println!("b after = {b:?}"); // b after = Cons(RefCell { value: 3 }, Cons(RefCell { value: 15 }, Nil))
    println!("c after = {c:?}"); // c after = Cons(RefCell { value: 4 }, Cons(RefCell { value: 15 }, Nil))
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cas_dutilisation_de_quelques_smart_pointers"><a class="anchor" href="#_cas_dutilisation_de_quelques_smart_pointers"></a><a class="link" href="#_cas_dutilisation_de_quelques_smart_pointers">4.1.14. Cas d&#8217;utilisation de quelques smart pointers</a></h4>
<div class="ulist">
<ul>
<li>
<p><code>Rc&lt;T&gt;</code> permet d&#8217;avoir <strong>plusieurs propriÃ©taires</strong> pour une mÃªme donnÃ©e;
<code>Box&lt;T&gt;</code> et <code>RefCell&lt;T&gt;</code> n&#8217;ont qu'<strong>un seul propriÃ©taire</strong>.</p>
</li>
<li>
<p><code>Box&lt;T&gt;</code> permet des <strong>emprunts immuables ou mutables Ã  la compilation</strong>;
Rc&lt;T&gt; permet uniquement des <strong>emprunts immuables, vÃ©rifiÃ©s Ã  la compilation</strong>;
RefCell&lt;T&gt; permet des <strong>emprunts immuables ou mutables, vÃ©rifiÃ©s Ã  l&#8217;exÃ©cution</strong>.</p>
</li>
<li>
<p>Comme <code>RefCell&lt;T&gt;</code> permet des emprunts mutables, vÃ©rifiÃ©s Ã  l&#8217;exÃ©cution, vous pouvez muter la valeur Ã  l&#8217;intÃ©rieur du <code>RefCell&lt;T&gt;</code> mÃªme si le <code>RefCell&lt;T&gt;</code> est immuable.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_unsafe_rust"><a class="anchor" href="#_unsafe_rust"></a><a class="link" href="#_unsafe_rust">4.1.15. Unsafe Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Cette <a href="https://doc.rust-lang.org/reference/unsafety.html">partie du langage</a> permet de contourner l&#8217;analyse statique quand elle est trop conservative</p>
</li>
<li>
<p>Un bloc <code>unsafe</code> donne accÃ¨s Ã  cinq <em>super-pouvoirs</em></p>
<div class="ulist">
<ul>
<li>
<p>dÃ©rÃ©fÃ©rencer un pointeur brut</p>
</li>
<li>
<p>faire appel Ã  une fonction ou une mÃ©thode non sÃ©curisÃ©e</p>
</li>
<li>
<p>lire ou modifier une variable statique mutable</p>
</li>
<li>
<p>implÃ©menter un trait non sÃ©curisÃ©</p>
</li>
<li>
<p>accÃ©der aux champs des union</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut nombre = 5;

let r1 = &amp;nombre as *const i32;
let r2 = &amp;mut nombre as *mut i32;

unsafe {
    println!("r1 vaut : {}", *r1);
    println!("r2 vaut : {}", *r2);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modÃ¨le_mÃ©moire_rust_propriÃ©tÃ©_et_emprunts"><a class="anchor" href="#_modÃ¨le_mÃ©moire_rust_propriÃ©tÃ©_et_emprunts"></a><a class="link" href="#_modÃ¨le_mÃ©moire_rust_propriÃ©tÃ©_et_emprunts">4.2. ModÃ¨le mÃ©moire Rust: propriÃ©tÃ© et emprunts</a></h3>
<div class="sect3">
<h4 id="_objectifs"><a class="anchor" href="#_objectifs"></a><a class="link" href="#_objectifs">4.2.1. Objectifs</a></h4>
<div class="paragraph">
<p>L&#8217;innovation majeure de Rust est son modÃ¨le mÃ©moire qui combine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>des vÃ©rifications statiques qui permettent de dÃ©tecter les problÃ¨mes mÃ©moire</p>
</li>
<li>
<p>des abstractions Ã  coÃ»t nul qui permettent de gÃ©nÃ©rer un code efficace</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous allons Ã©tudier les notions que Rust introduit pour garantir que les programmes sont corrects en mÃ©moire, en particulier les notions de <em>PropriÃ©tÃ©</em> (Ownership) et <em>Emprunt</em> (Borrow).</p>
</div>
</div>
<div class="sect3">
<h4 id="_mutabilitÃ©"><a class="anchor" href="#_mutabilitÃ©"></a><a class="link" href="#_mutabilitÃ©">4.2.2. MutabilitÃ©</a></h4>
<div class="ulist">
<ul>
<li>
<p>Par dÃ©faut les variables sont immutables</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">    let a = 1;
    let mut b = 1;
    a = 2; // erreur: Cannot assign twice to immutable variable a
    b = 2; // ok</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_les_variables_locales_sont_allouÃ©es_sur_la_pile"><a class="anchor" href="#_les_variables_locales_sont_allouÃ©es_sur_la_pile"></a><a class="link" href="#_les_variables_locales_sont_allouÃ©es_sur_la_pile">4.2.3. Les variables locales sont allouÃ©es sur la pile</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let a : u32 = 1;
    let b : f32 = 3.1415;
    let c : [u32; 3] = [1, 2, 3];
    let d = [0; 1 &lt;&lt; 30]; // tableau avec 2^30 zÃ©ros =&gt; dÃ©bordement de pile
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Les types primitifs de Rust sont allouÃ©s sur la pile.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_allocation_sur_le_tas"><a class="anchor" href="#_allocation_sur_le_tas"></a><a class="link" href="#_allocation_sur_le_tas">4.2.4. Allocation sur le tas</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust permet aussi d&#8217;allouer dynamiquement des objets sur le tas.</p>
</li>
<li>
<p>Par exemple, les vecteurs de type <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> sont allouÃ©s sur le tas.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let v : Vec&lt;u32&gt; = vec![1,2,3]; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ici <code>v</code> est une variable locale (sur la pile) qui contient un pointeur vers une adresse du tas oÃ¹ l&#8217;objet de type <code>Vec&lt;u32&gt;</code> est allouÃ©.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_propriÃ©taire"><a class="anchor" href="#_propriÃ©taire"></a><a class="link" href="#_propriÃ©taire">4.2.5. PropriÃ©taire</a></h4>
<div class="paragraph">
<p>Pour toute donnÃ©e, rust dÃ©finit une variable <a href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html"><em>propriÃ©taire</em></a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Chaque valeur a un propriÃ©taire.</p>
</li>
<li>
<p>Ã tout moment il ne peut y avoir qu&#8217;un et un seul propriÃ©taire.</p>
</li>
<li>
<p>Quand le propriÃ©taire devient <em>hors-portÃ©e</em>, la valeur est supprimÃ©e.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn test() {
    let a = 1.0; <i class="conum" data-value="1"></i><b>(1)</b>
    let v = vec![1,2,3]; <i class="conum" data-value="2"></i><b>(2)</b>
    // fin du bloc <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>a</code> est propriÃ©taire du scalaire</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>v</code> est propriÃ©taire du vecteur</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>En fin de bloc <code>a</code> et <code>v</code> sont <em>hors-portÃ©e</em>. Leur mÃ©moire est automatiquement libÃ©rÃ©e par rust. Le flottant <code>1.0</code> est dÃ©pilÃ© et le vecteur dÃ©sallouÃ© avec un appel Ã  <code>`drop()</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_trait_copy"><a class="anchor" href="#_trait_copy"></a><a class="link" href="#_trait_copy">4.2.6. Trait <code>Copy</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Les types primitifs (allouÃ©s sur la pile) implÃ©mentent le trait <a href="https://doc.rust-lang.org/core/marker/trait.Copy.html"><code>Copy</code></a>.</p>
</li>
<li>
<p>Lors d&#8217;une affectation, les donnÃ©es d&#8217;un type avec le trait <code>Copy</code> sont copiÃ©s.</p>
</li>
<li>
<p>Chaque variable est l&#8217;unique propriÃ©taire de sa propre copie. L&#8217;invariant de Â« propriÃ©tÃ© unique Â» est satisfait.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let a = [1, 2, 3];
    let mut b = a; // les trois cases du tableau sont copiÃ©es
    b[1] = 5;
    assert_eq!(a[1], 2); // a n'est pas modifiÃ©
    assert_eq!(b[1], 5); // seul b est modifiÃ©
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_passage_par_valeur"><a class="anchor" href="#_passage_par_valeur"></a><a class="link" href="#_passage_par_valeur">4.2.7. Passage par valeur</a></h4>
<div class="ulist">
<ul>
<li>
<p>De mÃªme lors d&#8217;un appel de fonction, les types primitifs sont copiÃ©s.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn modify(mut tab : [u32; 3]) {
    tab[1] = 4; // c'est la copie locale tab qui est modifiÃ©e
}

fn main() {
    let mut a = [1, 2, 3]; // (a n'a pas besoin d'Ãªtre mutable)
    modify(a); //l'argument passÃ© par valeur (copie)
    assert_eq!(a[1], 2); // a n'est pas modifiÃ©
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_transfert_de_propriÃ©taire_affectation"><a class="anchor" href="#_transfert_de_propriÃ©taire_affectation"></a><a class="link" href="#_transfert_de_propriÃ©taire_affectation">4.2.8. Transfert de propriÃ©taire (affectation)</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour les types qui n&#8217;implÃ©mentent pas le trait <code>Copy</code>, une affectation dÃ©place la propriÃ©tÃ© vers une nouvelle variable.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriÃ©taire du vecteur
    let v2 = v1; // la propriÃ©tÃ© est transfÃ©rÃ©e Ã  v2
    println!("{}", v1[0]); // erreur: ne peut plus Ãªtre utilisÃ©
    // erreur: borrow of moved value v1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tranfert_de_propriÃ©taire_appel_de_fonction"><a class="anchor" href="#_tranfert_de_propriÃ©taire_appel_de_fonction"></a><a class="link" href="#_tranfert_de_propriÃ©taire_appel_de_fonction">4.2.9. Tranfert de propriÃ©taire (appel de fonction)</a></h4>
<div class="ulist">
<ul>
<li>
<p>MÃªme problÃ¨me lors d&#8217;un appel de fonction, la propriÃ©tÃ© est transfÃ©rÃ©e.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun(v : Vec&lt;u32&gt;) { ... }

fn main() {
    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriÃ©taire du vecteur
    fun(v1); // la propriÃ©tÃ© est transfÃ©rÃ©e Ã  l'argument v
    println!("{}", v1[0]); // erreur: borrow of moved value v1
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_erreurs_mÃ©moire_Ã©vitÃ©es_par_le_transfert"><a class="anchor" href="#_erreurs_mÃ©moire_Ã©vitÃ©es_par_le_transfert"></a><a class="link" href="#_erreurs_mÃ©moire_Ã©vitÃ©es_par_le_transfert">Erreurs mÃ©moire Ã©vitÃ©es par le transfert</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">#include &lt;stdlib.h&gt;
void fun(char * v) {
  free(v);
}

int main() {
  char * v1 = malloc(3);
  fun(v1);
  free(v1); <i class="conum" data-value="1"></i><b>(1)</b>
}
// free(): double free detected in tcache 2
// Aborted (core dumped)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Erreur en C Ã  l&#8217;exÃ©cution. Impossible en Rust, car <code>v1</code> n&#8217;est plus propriÃ©taire de la mÃ©moire.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comment_appeler_une_fonction_sans_perdre_la_propriÃ©tÃ©"><a class="anchor" href="#_comment_appeler_une_fonction_sans_perdre_la_propriÃ©tÃ©"></a><a class="link" href="#_comment_appeler_une_fonction_sans_perdre_la_propriÃ©tÃ©">4.2.10. Comment appeler une fonction sans perdre la propriÃ©tÃ© ?</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn print(v: Vec&lt;u32&gt;) -&gt; Vec&lt;u32&gt; {
    println!("{:?}", v);
    v // on retourne l'objet v pour transfÃ©rer la propriÃ©tÃ© en retour
}

fn main() {
    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriÃ©taire du vecteur
    let v1 = print(v1); // l'appel cÃ¨de puis rÃ©cupÃ¨re la propriÃ©tÃ©.
    assert_eq!(v1[0], 1); // l'accÃ¨s Ã  v1[0] est possible
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Le code ci-dessus est correct mais pas idiomatique. C&#8217;est fastidieux de devoir passer la propriÃ©tÃ© en retour pour de nombreuses variables.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_emprunts"><a class="anchor" href="#_emprunts"></a><a class="link" href="#_emprunts">4.2.11. Emprunts</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html">emprunt</a> permet de passer une rÃ©fÃ©rence Ã  un objet sans en cÃ©der la propriÃ©tÃ©.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn print(v: &amp;Vec&lt;u32&gt;) { // la fonction travaille sur un emprunt elle n'est
    println!("{:?}", v); // pas propriÃ©taire du vecteur.
}

fn main() {
    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriÃ©taire du vecteur
    print(&amp;v1); // on emprunte une rÃ©fÃ©rence sur le vecteur
    assert_eq!(v1[0], 1);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_emprunts_mutables"><a class="anchor" href="#_emprunts_mutables"></a><a class="link" href="#_emprunts_mutables">4.2.12. Emprunts mutables</a></h4>
<div class="ulist">
<ul>
<li>
<p>Par dÃ©faut les emprunts sont immutables. Pour pouvoir modifier l&#8217;objet empruntÃ©, il nous faut un type <code>&amp; mut</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun(v: &amp;mut Vec&lt;u32&gt;) {
    v.push(4);
}

fn replace(v: &amp;mut Vec&lt;u32&gt;) {
    *v = vec![4,5]; <i class="conum" data-value="1"></i><b>(1)</b>
}

fn main() {
    let mut v1: Vec&lt;u32&gt; = vec![1, 2, 3];
    fun(&amp;mut v1); // on emprunte une rÃ©fÃ©rence mutable sur le vecteur
    assert_eq!(v1[3], 4);
    replace(&amp;mut v1);
    assert_eq!(v1.len(), 2);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Pour modifier le contenu, il faut utiliser l&#8217;<a href="https://doc.rust-lang.org/book/ch15-02-deref.html">opÃ©rateur <code>*</code></a> qui permet d&#8217;accÃ©der Ã  la valeur rÃ©fÃ©rencÃ©e.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_emprunts_mutables_transfert_de_propriÃ©tÃ©"><a class="anchor" href="#_emprunts_mutables_transfert_de_propriÃ©tÃ©"></a><a class="link" href="#_emprunts_mutables_transfert_de_propriÃ©tÃ©">4.2.13. Emprunts mutables â  Transfert de propriÃ©tÃ©</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un emprunt mutable n&#8217;est pas Ã©quivalent Ã  un transfert de propriÃ©tÃ©</p>
</li>
<li>
<p>Par exemple, il n&#8217;est pas possible de dÃ©sallouer une rÃ©fÃ©rence mutable ð</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun(v: &amp;mut Vec&lt;u32&gt;) {
    drop(*v); // erreur: cannot move out of *v which is behind a mutable reference
}
fn main() {
    let mut v1: Vec&lt;u32&gt; = vec![1, 2, 3];
    fun(&amp;mut v1); // on emprunte une rÃ©fÃ©rence mutable sur le vecteur
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_les_trois_rÃ¨gles_des_emprunts"><a class="anchor" href="#_les_trois_rÃ¨gles_des_emprunts"></a><a class="link" href="#_les_trois_rÃ¨gles_des_emprunts">4.2.14. Les trois rÃ¨gles des emprunts</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Les emprunts ne peuvent pas avoir une durÃ©e de vie plus longue que celle du propriÃ©taire.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Ã un point dans le programme, il est possible d&#8217;emprunter:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>une ou plusieurs rÃ©fÃ©rences <code>&amp;T</code></p>
</li>
<li>
<p>exactement une seule rÃ©fÃ©rence mutable <code>&amp;mut T</code></p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_exemple_erreur_Ã©vitÃ©e_avec_la_rÃ¨gle_1"><a class="anchor" href="#_exemple_erreur_Ã©vitÃ©e_avec_la_rÃ¨gle_1"></a><a class="link" href="#_exemple_erreur_Ã©vitÃ©e_avec_la_rÃ¨gle_1">Exemple: erreur Ã©vitÃ©e avec la rÃ¨gle (1)</a></h5>
<div class="ulist">
<ul>
<li>
<p>Rust nous interdit de retourner une rÃ©fÃ©rence sur <code>x</code> car il ne peut pas garantir que sa durÃ©e de vie est suffisante.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun() -&gt; &amp;u32 { // erreur: missing lifetime specifier
    let x = 1;
    &amp;x
}

fn main() {
    let y : &amp;u32 = fun();
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>En effet la mÃ©moire de <code>x</code>, sur la pile, est libÃ©rÃ©e en sortie de fonction</p>
</li>
<li>
<p>En C, ceci est une source d&#8217;erreurs classique !</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_erreur_Ã©vitÃ©e_avec_les_rÃ¨gles_2_et_3"><a class="anchor" href="#_exemple_erreur_Ã©vitÃ©e_avec_les_rÃ¨gles_2_et_3"></a><a class="link" href="#_exemple_erreur_Ã©vitÃ©e_avec_les_rÃ¨gles_2_et_3">Exemple: erreur Ã©vitÃ©e avec les rÃ¨gles (2) et (3)</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let mut v = vec![1, 2, 3, 4];

    rayon::join( // on lance deux threads concurrents
        || {
            v[0] = 5; // premier thread
        },
        // erreur: cannot borrow `v` as mutable more than once at a time
        || {
            v[0] = 4; // deuxiÃ¨me thread
        },
    );
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Ãvite les problÃ¨mes d&#8217;accÃ¨s concurrents. Ici les deux threads voudraient modifier le mÃªme tableau.</p>
</li>
<li>
<p>Rust l&#8217;interdit car v est empruntÃ© deux fois de maniÃ¨re mutable.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercice_un_type_stack"><a class="anchor" href="#_exercice_un_type_stack"></a><a class="link" href="#_exercice_un_type_stack">4.2.15. Exercice : un type Stack</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le but de l&#8217;exercice est de dÃ©finir une structure de pile (<em>Stack</em>) en Rust</p>
<div class="ulist">
<ul>
<li>
<p>pour simplifier, la pile contiendra des entiers (<em>i32</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Une pile peut Ãªtre dÃ©finie de maniÃ¨re rÃ©cursive (comme une liste) de la faÃ§on suivante</p>
<div class="ulist">
<ul>
<li>
<p>une pile peut Ãªtre soit la <em>pile vide</em>, soit un <em>Ã©lÃ©ment au sommet d&#8217;une pile</em></p>
</li>
<li>
<p>un type disjoint est reprÃ©sentÃ© en Rust par un <code>enum</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_Ã©tape_1_premiÃ¨re_tentative_avec_un_enum"><a class="anchor" href="#_Ã©tape_1_premiÃ¨re_tentative_avec_un_enum"></a><a class="link" href="#_Ã©tape_1_premiÃ¨re_tentative_avec_un_enum">Ãtape 1 : premiÃ¨re tentative avec un <code>enum</code></a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_0.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile dÃ©finie rÃ©cursivement.
/// 
/// ProblÃ¨me Ã  la compilation
/// error[E0072]: recursive type `Stack` has infinite size
/// 
pub enum Stack { <i class="conum" data-value="1"></i><b>(1)</b>
    Empty,
    Elem(i32, Stack) // recursive without indirection
                     // help: insert some indirection (e.g., a `Box`, `Rc`, or `&amp;`) to make `Stack` representable
                     //     Elem(i32, Box&lt;Stack&gt;)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La dÃ©finition Ã©tant rÃ©cursive, Rust ne peut pas dÃ©terminer la taille du type <code>Stack</code></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_2_un_enum_avec_de_lallocation_dynamique"><a class="anchor" href="#_Ã©tape_2_un_enum_avec_de_lallocation_dynamique"></a><a class="link" href="#_Ã©tape_2_un_enum_avec_de_lallocation_dynamique">Ãtape 2 : un <code>enum</code> avec de l&#8217;allocation dynamique</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_1.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile dÃ©finie rÃ©cursivement.
/// 
/// ProblÃ¨me
/// Le premier Ã©lÃ©ment se trouve sur la pile, les autres sur le tas
/// =&gt; les manipulations seront plus complexes
/// 
#[derive(Debug,PartialEq)]
pub enum Stack {
    Empty,
    Elem(i32, Box&lt;Stack&gt;)
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tests (src/modeles-memoire/exemples/stack_1.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test]
fn should_create_an_empty_stack() {
    let s = empty_stack();
    assert_eq!(Stack::Empty, s);
}

#[test]
fn should_return_the_top_of_an_empty_stack() {
    let s = empty_stack();
    assert_eq!(Option::None, top(&amp;s));
}

#[test]
fn should_return_the_top_of_the_stack() {
    let s = Stack::Elem(1, Box::new(Stack::Empty));
    assert_eq!(1, top(&amp;s).unwrap());
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">OpÃ©rations (src/modeles-memoire/exemples/stack_1.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub fn empty_stack() -&gt; Stack {
    Stack::Empty
}

pub fn top(s: &amp;Stack) -&gt; Option&lt;i32&gt; {
    match s {
        Stack::Empty =&gt; None,
        Stack::Elem(n, _) =&gt; Some(*n),
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_3_premiÃ¨re_tentative_avec_tous_les_Ã©lÃ©ments_sur_le_tas"><a class="anchor" href="#_Ã©tape_3_premiÃ¨re_tentative_avec_tous_les_Ã©lÃ©ments_sur_le_tas"></a><a class="link" href="#_Ã©tape_3_premiÃ¨re_tentative_avec_tous_les_Ã©lÃ©ments_sur_le_tas">Ãtape 3 : premiÃ¨re tentative avec tous les Ã©lÃ©ments sur le tas</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_2.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile dÃ©finie rÃ©cursivement.
/// 
/// ProblÃ¨me de compilation
/// error[E0446]: private type `Node` in public interface
/// 
#[derive(Debug,PartialEq)]
pub enum Stack {
    Empty,
    Elem(Box&lt;Node&gt;) // can't leak private type
                    // struct Node {
                    // ----------- `Node` declared as private

}

#[derive(Debug,PartialEq)]
struct Node { <i class="conum" data-value="1"></i><b>(1)</b>
    elem: i32,
    next: Stack,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Node</code> est privÃ© et doit le rester</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_4_deuxiÃ¨me_tentative_pour_tous_les_Ã©lÃ©ments_sur_le_tas"><a class="anchor" href="#_Ã©tape_4_deuxiÃ¨me_tentative_pour_tous_les_Ã©lÃ©ments_sur_le_tas"></a><a class="link" href="#_Ã©tape_4_deuxiÃ¨me_tentative_pour_tous_les_Ã©lÃ©ments_sur_le_tas">Ãtape 4 : deuxiÃ¨me tentative pour tous les Ã©lÃ©ments sur le tas</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_3.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile dÃ©finie rÃ©cursivement.
#[derive(Debug,PartialEq)]
pub struct Stack {
    head: Link,
}

#[derive(Debug,PartialEq)]
enum Link {
    Empty,
    Elem(Box&lt;Node&gt;)
}

#[derive(Debug,PartialEq)]
struct Node {
    elem: i32,
    next: Link,
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tests (src/modeles-memoire/exemples/stack_3.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test]
fn should_push_an_element_on_the_stack() {
    let mut s = empty_stack();
    push(&amp;mut s, 1);
    assert_eq!(1, top(&amp;s).unwrap());
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">OpÃ©rations (src/modeles-memoire/exemples/stack_3.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Empile un Ã©lÃ©ment
/// ProblÃ¨me de compilation :
/// error[E0507]: cannot move out of `*next` which is behind a shared reference
/// 
pub fn push(s: &amp;mut Stack, elem: i32) {
    let next = &amp;mut s.head;
    let newtop = Box::new(Node{elem, next: *next});  <i class="conum" data-value="1"></i><b>(1)</b>
                                                     // move occurs because `*next` has type `Link`, which does not implement the `Copy` trait
    *s = Stack{head: Link::Elem(newtop)};
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Link</code> n&#8217;implÃ©mente pas le <em>trait</em> <code>Copy</code> donc Rust interdit le dÃ©placement du sommet de la pile</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_5_tous_les_Ã©lÃ©ments_sur_le_tas"><a class="anchor" href="#_Ã©tape_5_tous_les_Ã©lÃ©ments_sur_le_tas"></a><a class="link" href="#_Ã©tape_5_tous_les_Ã©lÃ©ments_sur_le_tas">Ãtape 5 : tous les Ã©lÃ©ments sur le tas</a></h5>
<div class="listingblock">
<div class="title">OpÃ©rations (src/modeles-memoire/exemples/stack_4.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Empile un Ã©lÃ©ment
pub fn push(s: &amp;mut Stack, elem: i32) {
    let next = std::mem::replace(&amp;mut s.head, Link::Empty); <i class="conum" data-value="1"></i><b>(1)</b>
    let newtop = Box::new(Node{elem, next});
    s.head = Link::Elem(newtop);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/std/mem/fn.replace.html"><code>std::mem::replace</code></a> dÃ©place le sommet de la pile dans <code>next</code> et le remplace par la valeur <code>Link::Empty</code></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_5_une_petite_amÃ©lioration"><a class="anchor" href="#_Ã©tape_5_une_petite_amÃ©lioration"></a><a class="link" href="#_Ã©tape_5_une_petite_amÃ©lioration">Ãtape 5 : une petite amÃ©lioration</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_4.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile dÃ©finie rÃ©cursivement.
#[derive(Debug,PartialEq)]
pub struct Stack {
    head: Link,
}

/// Le type Link est identique Ã  un type de la bibliothÃ¨que standard
/// Lequel ?
/// 
#[derive(Debug,PartialEq)]
enum Link { <i class="conum" data-value="1"></i><b>(1)</b>
    Empty,
    Elem(Box&lt;Node&gt;)
}

#[derive(Debug,PartialEq)]
struct Node {
    elem: i32,
    next: Link,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Quel type de la bibliothÃ¨que standard pourrait remplacer <code>Link</code> ?</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_6_en_utilisant_option"><a class="anchor" href="#_Ã©tape_6_en_utilisant_option"></a><a class="link" href="#_Ã©tape_6_en_utilisant_option">Ãtape 6 : en utilisant Option</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_5.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile dÃ©finie rÃ©cursivement.
#[derive(Debug,PartialEq)]
pub struct Stack {
    head: Option&lt;Box&lt;Node&gt;&gt;, <i class="conum" data-value="1"></i><b>(1)</b>
}

#[derive(Debug,PartialEq)]
struct Node {
    elem: i32,
    next: Option&lt;Box&lt;Node&gt;&gt;,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>std::option::Option</code></a> remplace avantageusement <code>Link</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">OpÃ©rations (src/modeles-memoire/exemples/stack_5.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Empile un Ã©lÃ©ment
pub fn push(s: &amp;mut Stack, elem: i32) {
    let next = std::mem::take(&amp;mut s.head); <i class="conum" data-value="1"></i><b>(1)</b>
                                            // OU plus simple let next = s.head.take();
    let newtop = Box::new(Node{elem, next});
    s.head = Some(newtop);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/std/mem/fn.take.html"><code>std::mem::take</code></a> dÃ©place le sommet de la pile dans <code>next</code> et le remplace par la valeur par dÃ©faut du type <code>Option</code> (trait <a href="https://doc.rust-lang.org/std/default/trait.Default.html"><code>std::default::Default</code></a>)</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_7_ajouter_la_mÃ©thode_pop_dÃ©piler"><a class="anchor" href="#_Ã©tape_7_ajouter_la_mÃ©thode_pop_dÃ©piler"></a><a class="link" href="#_Ã©tape_7_ajouter_la_mÃ©thode_pop_dÃ©piler">Ãtape 7 : ajouter la mÃ©thode <em>pop</em> (dÃ©piler)</a></h5>
<div class="listingblock">
<div class="title">Tests (src/modeles-memoire/exemples/stack_6.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test]
fn should_pop_the_empty_stack() {
    let mut s = empty_stack();
    let top_of_stack = pop(&amp;mut s);
    assert_eq!(None, top_of_stack);
    assert_eq!(None, top(&amp;s));
}

#[test]
fn should_pop_an_element_from_the_stack() {
    let mut s = Stack {head: Some(Box::new(Node{elem: 1, next: None}))};
    let top_of_stack = pop(&amp;mut s);
    assert_eq!(1, top_of_stack.unwrap());
    assert_eq!(None, top(&amp;s));
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">OpÃ©rations (src/modeles-memoire/exemples/stack_6.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// DÃ©pile un Ã©lÃ©ment
/// 
/// ProblÃ¨me de compilation
/// error[E0507]: cannot move out of `n.next` which is behind a shared reference
pub fn pop(s: &amp;mut Stack) -&gt; Option&lt;i32&gt; {
    if let Some(n) = &amp;s.head { <i class="conum" data-value="1"></i><b>(1)</b>
        let value = n.elem;
        s.head = n.next; <i class="conum" data-value="2"></i><b>(2)</b>
                         // move occurs because `n.next` has type `Option&lt;Box&lt;Node&gt;&gt;`, which does not implement the `Copy` trait
                         // help: consider borrowing the `Option`'s content: `n.next.as_ref()`
        return Some(value);
    }
    None
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/reference/expressions/if-expr.html#if-let-expressions"><code>if let</code></a> dÃ©construit la valeur de type <code>Option</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>le mÃªme problÃ¨me que pour <code>push</code> se pose</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_Ã©tape_8_la_mÃ©thode_pop_dÃ©piler"><a class="anchor" href="#_Ã©tape_8_la_mÃ©thode_pop_dÃ©piler"></a><a class="link" href="#_Ã©tape_8_la_mÃ©thode_pop_dÃ©piler">Ãtape 8 : la mÃ©thode <em>pop</em> (dÃ©piler)</a></h5>
<div class="listingblock">
<div class="title">OpÃ©rations (src/modeles-memoire/exemples/stack_7.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// DÃ©pile un Ã©lÃ©ment
pub fn pop(s: &amp;mut Stack) -&gt; Option&lt;i32&gt; {
    if let Some(ref mut n) = &amp;mut s.head {
        let value = n.elem;
        s.head = n.next.take();
        return Some(value);
    }
    None
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©fÃ©rences_4"><a class="anchor" href="#_rÃ©fÃ©rences_4"></a><a class="link" href="#_rÃ©fÃ©rences_4">4.2.16. RÃ©fÃ©rences</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/1.22.0/book/second-edition/">The Rust book, first and second editions</a></p>
</li>
<li>
<p><a href="http://cis198-2016s.github.io/">CIS 198 U. Pennsylvania: Rust programming lectures</a></p>
</li>
<li>
<p><a href="https://stanford-cs242.github.io/f18/lectures/05-1-rust-memory-safety.html">Memory safety in Rust</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>ExpÃ©rimentez</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PropriÃ©tÃ© (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/move_semantics">rustlings</a>, <a href="https://practice.course.rs//ownership/ownership.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/scope/move.html">Rust by Example</a>)</p>
</li>
<li>
<p>Emprunt (<a href="https://practice.course.rs//ownership/borrowing.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/scope/borrow.html">Rust by Example</a>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consommation_Ã©nergÃ©tique"><a class="anchor" href="#_consommation_Ã©nergÃ©tique"></a><a class="link" href="#_consommation_Ã©nergÃ©tique">5. Consommation ÃnergÃ©tique</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_consommation_Ã©nergÃ©tique_des_ordinateurs"><a class="anchor" href="#_consommation_Ã©nergÃ©tique_des_ordinateurs"></a><a class="link" href="#_consommation_Ã©nergÃ©tique_des_ordinateurs">5.1. Consommation Ã©nergÃ©tique des ordinateurs</a></h3>
<div class="sect3">
<h4 id="_puissance_et_Ã©nergie"><a class="anchor" href="#_puissance_et_Ã©nergie"></a><a class="link" href="#_puissance_et_Ã©nergie">5.1.1. Puissance et Ãnergie</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Ãnergie</strong>: capacitÃ© d&#8217;un systÃ¨me Ã  modifier un Ã©tat en produisant un travail, exprimÃ© en Joules \(J (N.m)\)</p>
</li>
<li>
<p><strong>Puissance</strong>: dÃ©bit d&#8217;Ã©nergie (Ã©nergie par unitÃ© de temps), exprimÃ© en Watts \(W (J/s)\)</p>
</li>
<li>
<p>L&#8217;Ã©nergie est l&#8217;intÃ©grale de la puissance sur le temps,</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>\(E = \int P(t).dt\)</p>
</div>
</div>
<div class="sect3">
<h4 id="_Ã©chelle_dÃ©nergies"><a class="anchor" href="#_Ã©chelle_dÃ©nergies"></a><a class="link" href="#_Ã©chelle_dÃ©nergies">5.1.2. Ãchelle d&#8217;Ã©nergies</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/echelle-energie.png" alt="Ãchelle d&#8217;Ã©nergies" width="500">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_architecture_gÃ©nÃ©rale_dun_ordinateur"><a class="anchor" href="#_architecture_gÃ©nÃ©rale_dun_ordinateur"></a><a class="link" href="#_architecture_gÃ©nÃ©rale_dun_ordinateur">5.1.3. Architecture gÃ©nÃ©rale d&#8217;un ordinateur</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/arch.svg" alt="Architecture d&#8217;un ordinateur" width="500">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zoom_sur_le_cpu_intel_nehalem"><a class="anchor" href="#_zoom_sur_le_cpu_intel_nehalem"></a><a class="link" href="#_zoom_sur_le_cpu_intel_nehalem">5.1.4. Zoom sur le CPU (Intel Nehalem)</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/Nehalem_Die_callout.png" alt="Intel Nehalem" width="500">
</div>
</div>
<div class="paragraph">
<p>Les cÅurs, les caches et la mÃ©moire sont constituÃ©s Ã  partir de millions de transistors qui implÃ©mentent des portes logiques.</p>
</div>
<div class="paragraph">
<p>L&#8217;architecture Nehalem comporte 731M de transistors et chaque porte fait 35nm.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rÃ©partition_du_budget_Ã©nergie"><a class="anchor" href="#_rÃ©partition_du_budget_Ã©nergie"></a><a class="link" href="#_rÃ©partition_du_budget_Ã©nergie">5.1.5. RÃ©partition du budget Ã©nergie</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Composant</th>
<th class="tableblock halign-left valign-top">Puissance [W]</th>
<th class="tableblock halign-left valign-top">%</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disques</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PÃ©riphÃ©riques</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carte mÃ¨re</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ventilateurs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fuites</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Total</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>251</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>100</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>Source: A. Tisserand, ECOFAC 2010</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_portes_mos"><a class="anchor" href="#_portes_mos"></a><a class="link" href="#_portes_mos">5.1.6. Portes MOS</a></h4>
<div class="paragraph">
<p>Les circuits logiques rÃ©cents sont construits Ã  partir de transistors MOS (Metal Oxyde Semiconductor).</p>
</div>
<div class="paragraph">
<p>Un transistor MOS possÃ¨de trois broches: la source, le drain et la grille.</p>
</div>
<div class="paragraph">
<p>Il existe deux types de transistors MOS: le type P et le type N.</p>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;on applique une tension sur la grille, le transistor devient soit passant (type N), soit bloquant (type P).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/pmos-nmos.svg" alt="PMOS-NMOS" width="400">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_consommation_mos"><a class="anchor" href="#_consommation_mos"></a><a class="link" href="#_consommation_mos">5.1.7. Consommation MOS</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les transistors MOS consomment en permanence lorsqu&#8217;ils sont passants.</p>
</li>
<li>
<p>Est-il possible de fabriquer des portes qui ne consomment que lors des changements d&#8217;Ã©tat ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_porte_cmos"><a class="anchor" href="#_porte_cmos"></a><a class="link" href="#_porte_cmos">5.1.8. Porte CMOS</a></h4>
<div class="paragraph">
<p>Les portes logiques utilisent la technologie CMOS (Complementary Oxide Semiconductor) qui combine un P-MOS et un N-MOS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/CMOS-Inverter.png" alt="Porte NON" width="300">
</div>
</div>
<div class="paragraph">
<p>Par exemple, ici on implÃ©mente une porte logique NON: \(Y = \bar{A}\).</p>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;entrÃ©e vaut 1, la porte NMOS (bas) est passante et la porte PMOS (haut) est bloquante, ainsi Y est reliÃ© Ã  la masse (GND).</p>
</div>
</div>
<div class="sect3">
<h4 id="_avantage_cmos"><a class="anchor" href="#_avantage_cmos"></a><a class="link" href="#_avantage_cmos">5.1.9. Avantage CMOS</a></h4>
<div class="paragraph">
<p>Dans une porte CMOS, un des deux transistors est toujours bloquant et il n&#8217;y a (presque) pas de courant qui passe entre VDD et GND.</p>
</div>
<div class="paragraph">
<p>La consommation Ã©nergÃ©tique se produit donc uniquement lors des transitions d&#8217;Ã©tat.</p>
</div>
</div>
<div class="sect3">
<h4 id="_puissance_dynamique"><a class="anchor" href="#_puissance_dynamique"></a><a class="link" href="#_puissance_dynamique">5.1.10. Puissance dynamique</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/porte-non.svg" alt="CapacitÃ© Ã©quivalente" width="200">
</div>
</div>
<div class="paragraph">
<p>Lors d&#8217;une transition la consommation d&#8217;une porte est \(P_{dyn} = \frac{1}{2}.C.V_{DD}^2.f\) oÃ¹</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(C\) capacitÃ© de charge Ã©quivalente</p>
</li>
<li>
<p>\(V_{DD}\) tension</p>
</li>
<li>
<p>\(f\) frÃ©quence des doubles-transitions (montantes + descendantes)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_amÃ©lioration_des_techniques_de_fabrication_des_cmos"><a class="anchor" href="#_amÃ©lioration_des_techniques_de_fabrication_des_cmos"></a><a class="link" href="#_amÃ©lioration_des_techniques_de_fabrication_des_cmos">5.1.11. AmÃ©lioration des techniques de fabrication des CMOS</a></h4>
<div class="ulist">
<ul>
<li>
<p>Dennard observe que Ã  chaque nouvelle gÃ©nÃ©ration les transistors peuvent Ãªtre rÃ©duits de ~30% (0.7)</p>
<div class="ulist">
<ul>
<li>
<p>Le voltage diminue de 30% car l&#8217;Ã©paisseur diminue</p>
</li>
<li>
<p>La capacitance diminue de 30% car l&#8217;Ã©paisseur diminue</p>
</li>
<li>
<p>Le temps de propagation diminue de 30% car la distance diminue</p>
</li>
<li>
<p>La surface diminue de 50% (\(0.7 \times 0.7\))</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cela entraine:</p>
<div class="ulist">
<ul>
<li>
<p>Une augmentation de la frÃ©quence de 50% (car inverse du temps de propagation)</p>
</li>
<li>
<p>Une diminution de 50% de la consommation Ã©nergÃ©tique d&#8217;une porte</p>
</li>
<li>
<p>\(\Delta P = \Delta C.\Delta V_{DD}^2.\Delta f = 0.7\times 0.7^2 \times \frac{1}{0.7} \approx 0.5\)</p>
</li>
</ul>
</div>
</li>
<li>
<p>La dissipation thermique par unitÃ© de surface reste constante.</p>
</li>
<li>
<p>Mais Ã  chaque gÃ©nÃ©ration les CPUs deviennent plus complexes.
Moore, 1966: Le nombre de transistors double tous les 1.5 ans Ã  coÃ»ts constants.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_puissance_statique"><a class="anchor" href="#_puissance_statique"></a><a class="link" href="#_puissance_statique">5.1.12. Puissance statique</a></h4>
<div class="paragraph">
<p>La technologie CMOS est bloquante sauf lors de transitions.
Mais un faible courant de fuite \(I_{fuite}\) traverse un transistor bloquant.</p>
</div>
<div class="paragraph">
<p>\(P_{sta} = V_{DD}.I_{fuite}\)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(I_{fuite}\) dÃ©pends de la tempÃ©rature dissipÃ©e et du voltage seuil sur les transistors.</p>
</li>
<li>
<p>\(P_{sta}\) augmente exponentiellement (Borkar et Chien, 2011) avec la miniaturisation et met un frein Ã  la loi de Moore.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_fin_de_la_loi_de_dennard"><a class="anchor" href="#_fin_de_la_loi_de_dennard"></a><a class="link" href="#_fin_de_la_loi_de_dennard">5.1.13. Fin de la loi de Dennard</a></h4>
<div class="ulist">
<ul>
<li>
<p>Avec l&#8217;augmentation des courants de fuite, la dissipation thermique par unitÃ© de surface augmente</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/end-of-dennards.png" alt="Fin de la loi de Dennard (S. Gai)" width="600"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Avec la miniaturisation, on a aussi une limite sur l&#8217;augmentation de frÃ©quence et une limite sur la rÃ©duction du voltage de seuil.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_limites_sur_la_conception_des_processeurs"><a class="anchor" href="#_limites_sur_la_conception_des_processeurs"></a><a class="link" href="#_limites_sur_la_conception_des_processeurs">5.1.14. Limites sur la conception des processeurs</a></h4>
<div class="paragraph">
<p>\(P = P_{dyn} + P_{sta} = \frac{1}{2}.C.V_{DD}^2.f + V_{DD}.I_{fuite}\)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jusqu&#8217;aux annÃ©es 2000, pour augmenter les capacitÃ©s de calcul les constructeurs ont augmentÃ© la frÃ©quence et le nombre de processeurs.</p>
</li>
<li>
<p>Avec l&#8217;augmentation des courants de fuite, la dissipation Ã©nergÃ©tique devient trop importante.</p>
</li>
<li>
<p>DorÃ©navant pour augmenter les capacitÃ©s de calcul, on multiplie le nombre de cÅurs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/clock-rate.png" alt="Ãvolution de la frÃ©quence nominale" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>PhÃ©nomÃ¨ne du <em>Dark Silicon</em>: pour limiter la dissipation thermique on n'Â«allumeÂ» pas l&#8217;ensemble du CPU en mÃªme temps.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Source: Hennessy-Patterson</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_comment_mesurer_lÃ©nergie_consommÃ©e"><a class="anchor" href="#_comment_mesurer_lÃ©nergie_consommÃ©e"></a><a class="link" href="#_comment_mesurer_lÃ©nergie_consommÃ©e">5.1.15. Comment mesurer l&#8217;Ã©nergie consommÃ©e</a></h4>
<div class="paragraph">
<p><strong>WattmÃ¨tre</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>combine un capteur d&#8217;intensitÃ© et de tension</p>
</li>
<li>
<p>mesure prÃ©cise mais basse rÃ©solution d&#8217;Ã©chantillonage (peu prÃ©cis sur des temps petits)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/yoko.png" alt="WattmÃ¨tre Yokogawa WT210" width="200"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_compteur_matÃ©riel_rapl"><a class="anchor" href="#_compteur_matÃ©riel_rapl"></a><a class="link" href="#_compteur_matÃ©riel_rapl">5.1.16. Compteur matÃ©riel RAPL</a></h4>
<div class="ulist">
<ul>
<li>
<p>Intel implÃ©mente les compteurs RAPL (Running Average Power Limit)</p>
</li>
<li>
<p>Ne mesure pas vraiment la puissance</p>
</li>
<li>
<p>Compte le nombre et le type d&#8217;instructions exÃ©cutÃ©es</p>
</li>
<li>
<p>Utilise un modÃ¨le de prÃ©diction de consommation</p>
</li>
<li>
<p>RÃ©solution Ã©levÃ©e d&#8217;Ã©chantillonage</p>
</li>
<li>
<p>Ne mesure pas les composants en dehors du CPU/GPU</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_comparaison_rapl_vs_wattmÃ¨tre_haswell"><a class="anchor" href="#_comparaison_rapl_vs_wattmÃ¨tre_haswell"></a><a class="link" href="#_comparaison_rapl_vs_wattmÃ¨tre_haswell">5.1.17. Comparaison RAPL vs. WattmÃ¨tre (Haswell)</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/calib-yoko.svg" alt="RAPL vs. WattmÃ¨tre" width="600"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>2 compteurs RAPL: pkg (CPU+caches) et ram (mÃ©moire)</p>
</li>
<li>
<p>prÃ©diction corrÃ©lÃ©e avec la mesure du wattmÃ¨tre sauf &#8230;&#8203;</p>
</li>
<li>
<p>&#8230;&#8203; dÃ©calage constant: consommation idle (ventilation, alimentation, carte mÃ¨re)&#8201;&#8212;&#8201;environ 30W</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_techniques_pour_rÃ©duire_la_consommation"><a class="anchor" href="#_techniques_pour_rÃ©duire_la_consommation"></a><a class="link" href="#_techniques_pour_rÃ©duire_la_consommation">5.1.18. Techniques pour rÃ©duire la consommation</a></h4>
<div class="ulist">
<ul>
<li>
<p>Meilleure conception technologique (rÃ©duire capacitance et courants de fuite)</p>
</li>
<li>
<p>Gate-clocking: extinction sÃ©lective des parties inactives du CPU.</p>
</li>
<li>
<p>Sleep-modes (P-state and C-state) &amp; DVFS (Dynamic Voltage Frequency Scaling)</p>
</li>
<li>
<p>Power gating (dÃ©sactivation d&#8217;un cÅur complet)</p>
</li>
<li>
<p>Consolidation de charge et extinction de nÅuds inactifs dans un cluster</p>
</li>
<li>
<p>Optimisations logicielles</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sleep_mode_dvfs"><a class="anchor" href="#_sleep_mode_dvfs"></a><a class="link" href="#_sleep_mode_dvfs">5.1.19. Sleep-mode &amp; DVFS</a></h4>
<div class="ulist">
<ul>
<li>
<p>DVFS: change dynamiquement le couple voltage-frÃ©quence du processeur.</p>
</li>
<li>
<p>Sur une architecture Haswell on a une variation quadratique de P.</p>
</li>
<li>
<p>Sur Intel: P-state (CPU qui calcule), C-state (Idle et mise en veille d&#8217;une partie des composants)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/DVFS-levels-and-Intel-P-states.png" alt="Intel P-states" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un gouverneur systÃ¨me choisit le point de fonctionnement optimal.</p>
</li>
<li>
<p>Par exemple pour un systÃ¨me peu chargÃ© on choisira la frÃ©quence la plus basse.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_race_to_idle"><a class="anchor" href="#_race_to_idle"></a><a class="link" href="#_race_to_idle">5.1.20. Race to Idle</a></h4>
<div class="ulist">
<ul>
<li>
<p>En raison de courants de fuite importants et de la consommation statique d&#8217;autres composants, une trÃ¨s bonne stratÃ©gie en pratique est le <em>Race to Idle</em> (ou course jusqu&#8217;au repos).</p>
</li>
<li>
<p>On fait notre calcul le plus rapidement possible, de maniÃ¨re Ã  pouvoir mettre le systÃ¨me en veille pour limiter la consommation statique.</p>
</li>
<li>
<p>Dans ce cas, optimiser l&#8217;Ã©nergie et le temps de calcul sont liÃ©s.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Racing and Pacing to Idle</em>, Kim, Ines, Hoffmann, 2005.</p>
</div>
</div>
<div class="sect3">
<h4 id="_embarquÃ©_vs_serveur"><a class="anchor" href="#_embarquÃ©_vs_serveur"></a><a class="link" href="#_embarquÃ©_vs_serveur">5.1.21. EmbarquÃ© vs. Serveur</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les politiques Ã©nergÃ©tiques ne vont pas Ãªtre les mÃªmes sur des calculateurs embarquÃ©s et des serveurs.</p>
</li>
<li>
<p>Serveur (trÃ¨s contraint en charge de travail)</p>
<div class="ulist">
<ul>
<li>
<p>On cherche Ã  avoir des frÃ©quences Ã©levÃ©es.</p>
</li>
<li>
<p>Race to Idle est souvent une bonne stratÃ©gie.</p>
</li>
</ul>
</div>
</li>
<li>
<p>EmbarquÃ© (trÃ¨s contraint en Ã©nergie)</p>
<div class="ulist">
<ul>
<li>
<p>Souvent on limite la frÃ©quence pour pouvoir baisser VDD et conserver le budget Ã©nergie.</p>
</li>
<li>
<p>On utilise des stratÃ©gies de limitation de puissance fines.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dvfs_selon_les_phases_de_calcul"><a class="anchor" href="#_dvfs_selon_les_phases_de_calcul"></a><a class="link" href="#_dvfs_selon_les_phases_de_calcul">5.1.22. DVFS selon les phases de calcul</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/dvfs-phases.png" alt="DVFS pendant les phases de communication d&#8217;un programme parallele" width="600"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Il peut-Ãªtre intÃ©ressant d&#8217;appliquer DVFS aux phases de communications d&#8217;un programme.</p>
</li>
<li>
<p>Si les communications sont synchrones, durant ces phases le CPU travaille peu.</p>
</li>
<li>
<p>DVFS sur le processeur permet donc d&#8217;Ã©conomiser de l&#8217;Ã©nergie sans ralentir le programme.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_effet_rebond"><a class="anchor" href="#_effet_rebond"></a><a class="link" href="#_effet_rebond">5.1.23. Effet rebond</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/koomey.png" alt="EfficacitÃ© ÃnergÃ©tique des PC - Koomey 2011" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>ÃfficacitÃ© Ã©nergÃ©tique doublÃ©e tous les 1.5 ans</p>
</li>
<li>
<p>Puissance de calcul doublÃ©e tous les 1.5 ans</p>
</li>
<li>
<p>Nombre de PCs utilisÃ©s double tous les trois ans (entre 1980 et 2008).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optimiser la consommation ne rÃ©duit pas l&#8217;impact total du calcul. On observe un Â« effet rebond Â» oÃ¹ l&#8217;efficacitÃ© gagnÃ©e est utilisÃ©e pour calculer plus.</p>
</div>
</div>
<div class="sect3">
<h4 id="_effet_rebond_2"><a class="anchor" href="#_effet_rebond_2"></a><a class="link" href="#_effet_rebond_2">5.1.24. Effet rebond</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/top500.png" alt="Ãvolution des 100 premiÃ¨res machines HPC - Koomey 2011" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>MalgrÃ© d&#8217;importantes amÃ©liorations de l&#8217;efficacitÃ©, l&#8217;empreinte Ã©nergÃ©tique totale augmente avec la demande en calcul.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulation_numÃ©rique_vers_un_calcul_sobre"><a class="anchor" href="#_simulation_numÃ©rique_vers_un_calcul_sobre"></a><a class="link" href="#_simulation_numÃ©rique_vers_un_calcul_sobre">5.1.25. Simulation numÃ©rique: vers un calcul sobre ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>Compromis entre justesse du modÃ¨le et coÃ»t Ã©nergÃ©tique. Exemple: RÃ©seaux de Neuronnes (Resnet), Green AI, Schwartz 2019.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/resnet.png" alt="FPO (Milliards d&#8217;OpÃ©rations Flottantes) vs. Justesse" width="Schwartz Green AI 2019" height="300"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pour une augmentation linÃ©aire du coÃ»t en calcul, on a une augmentation logarithmique de la justesse.</p>
</li>
<li>
<p>PhÃ©nomÃ¨ne similaire observÃ© aussi dans la simulation numÃ©rique (Masson &amp; Knutti 2011).</p>
</li>
<li>
<p>Â« Loi Â» des Retours DÃ©croissants ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bibliographie"><a class="anchor" href="#_bibliographie"></a><a class="link" href="#_bibliographie">5.1.26. Bibliographie</a></h4>
<div class="ulist">
<ul>
<li>
<p>Computer Architecture: A Quantitative Approach, Henessy, Patterson.</p>
</li>
<li>
<p>Introduction to Power Consumption in Dig. Int. Circuits, Tisserand, ECOFAC 2010.</p>
</li>
<li>
<p>Design Challenges of Technology Scaling. Borkar. IEEE. 1999.</p>
</li>
<li>
<p>The future of microprocessors. Borkar et Chien. ACM. 2011.</p>
</li>
<li>
<p>Dennard Scaling and other Power considerations, S. Gai 2020.</p>
</li>
<li>
<p>Benefits in Relaxing the Power Capping Constraint, C. Daniele et al. 2017.</p>
</li>
<li>
<p>Racing and Pacing to Idle: Theoretical and Empirical Analysis of Energy Optimization Heuristics, Kim, Ines, Hoffmann. IEEE 2015.</p>
</li>
<li>
<p>Adaptive, Transparent Frequency and Voltage Scaling of
Communication Phases in MPI Programs, Lim, Freeh, Lowenthal. ACM/IEEE SC 2006.</p>
</li>
<li>
<p>Green AI, Schwartz et al, 2019.</p>
</li>
<li>
<p>Speed Scale Depdence of Climate Model Performance in the CMPI3 Ensemble, Masson &amp; Knutti, 2011.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optimisations_de_code"><a class="anchor" href="#_optimisations_de_code"></a><a class="link" href="#_optimisations_de_code">5.2. Optimisations de code</a></h3>
<div class="sect3">
<h4 id="_mesure_de_performance"><a class="anchor" href="#_mesure_de_performance"></a><a class="link" href="#_mesure_de_performance">5.2.1. Mesure de performance</a></h4>
<div class="ulist">
<ul>
<li>
<p>On ne peut pas optimiser ce que l&#8217;on ne peut pas mesurer.</p>
</li>
<li>
<p>On peut mesurer le temps, l&#8217;Ã©nergie, la mÃ©moire, la qualitÃ© du code.</p>
</li>
<li>
<p>Souvent Ã©nergie et temps de calcul sont liÃ©s: <em>race to idle</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mesurer_la_performance"><a class="anchor" href="#_mesurer_la_performance"></a><a class="link" href="#_mesurer_la_performance">5.2.2. Mesurer la performance</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/performance1.png" alt="Mesure de performance" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>CPI: Cycles par Instruction. Plus les CPI sont bas plus le code est rapide.</p>
</li>
<li>
<p>Impact de la taille d&#8217;un tableau pour un accÃ¨s mÃ©moire.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mesurer_la_performance_2"><a class="anchor" href="#_mesurer_la_performance_2"></a><a class="link" href="#_mesurer_la_performance_2">5.2.3. Mesurer la performance</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/performance2.png" alt="Mesure de performance" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Importance d&#8217;explorer diffÃ©rents paramÃ¨tres en entrÃ©e</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_exemple_3"><a class="anchor" href="#_exemple_3"></a><a class="link" href="#_exemple_3">5.2.4. Exemple</a></h4>
<div class="ulist">
<ul>
<li>
<p>On mesure deux codes:</p>
<div class="ulist">
<ul>
<li>
<p>code 1 : 8.56 secondes</p>
</li>
<li>
<p>code 2 : 8.94 secondes</p>
</li>
</ul>
</div>
</li>
<li>
<p>AccÃ©lÃ©ration (<em>speedup</em>) (8.94-8.56)/8.94 = 4.2% ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_attention_au_bruit_de_mesure"><a class="anchor" href="#_attention_au_bruit_de_mesure"></a><a class="link" href="#_attention_au_bruit_de_mesure">5.2.5. Attention au bruit de mesure</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/dispersion.png" alt="Bruit de mesure" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Pas de diffÃ©rence significative avec 30 mesures</p>
</li>
<li>
<p>RÃ©pÃ©ter les mesures et Ã©tudier leur dispersion.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bruit_de_mesure"><a class="anchor" href="#_bruit_de_mesure"></a><a class="link" href="#_bruit_de_mesure">5.2.6. Bruit de mesure</a></h4>
<div class="ulist">
<ul>
<li>
<p>Importance de prendre en compte le bruit de mesure.</p>
</li>
<li>
<p>Sources d&#8217;indÃ©terminisme:</p>
<div class="ulist">
<ul>
<li>
<p>HiÃ©rarchie mÃ©moire: Caches, TLB, Buffers E/S, Disque dur, swap</p>
</li>
<li>
<p>Pipeline d&#8217;instructions</p>
</li>
<li>
<p>Entrelacement des threads</p>
</li>
<li>
<p>DVFS / C-States et P-States</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pour_stabiliser_les_mesures"><a class="anchor" href="#_pour_stabiliser_les_mesures"></a><a class="link" href="#_pour_stabiliser_les_mesures">5.2.7. Pour stabiliser les mesures</a></h4>
<div class="ulist">
<ul>
<li>
<p>ExÃ©cutez une premiÃ¨re fois votre programme pour charger les donnÃ©es dans le buffer E/S (sauf si vous souhaitez en mesurer l&#8217;effet).</p>
</li>
<li>
<p>Utiliser le <em>pinning</em> de processus (Ã©vite que les threads soient migrÃ©s en cours d&#8217;exÃ©cution).</p>
</li>
<li>
<p>DÃ©sactivez le DVFS de votre processeur (gouverneur performance)</p>
</li>
<li>
<p>Ãvitez de faire tourner d&#8217;autres processus et augmentez la prioritÃ© du processus mesurÃ© avec <code>nice -20</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_comment_mesurer"><a class="anchor" href="#_comment_mesurer"></a><a class="link" href="#_comment_mesurer">5.2.8. Comment mesurer ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>Insertion de sondes directement dans le code. Pour Rust, vous pouvez utiliser le crate <a href="https://doc.rust-lang.org/1.4.0/book/benchmark-tests.html"><code>Bencher</code></a>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub fn add_two(a: i32) -&gt; i32 {
    a + 2
}

#[cfg(test)]
mod tests {
    use super::*;
    use test::Bencher;

    #[bench]
    fn bench_add_two(b: &amp;mut Bencher) {
        b.iter(|| add_two(2));
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cargo bench
   Compiling adder v0.0.1 (file:///home/steve/tmp/adder)
     Running target/release/adder-91b3e234d4ed382a

running 2 tests
test tests::bench_add_two ... bench:         1 ns/iter (+/- 0)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comment_mesurer_2"><a class="anchor" href="#_comment_mesurer_2"></a><a class="link" href="#_comment_mesurer_2">5.2.9. Comment mesurer ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>Utiliser un outil externe. Par exemple pour mesurer des compteurs de performance: RAPL, cache misses, cycles, etc.</p>
</li>
<li>
<p>De nombreux outils disponibles (<strong>Perf</strong>, Likwid, MAQAO, PAPI, VTune, &#8230;&#8203;)</p>
</li>
<li>
<p>Sous Linux, l&#8217;outil <a href="https://perf.wiki.kernel.org/index.php/Tutorial">perf</a> permet d&#8217;interroger directement le noyau pour accÃ©der Ã  ces compteurs.</p>
</li>
<li>
<p>Exemple: pour mesurer les cycles, le nombre d&#8217;instructions, ainsi que les cache misses:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">perf stat -e cycles,instructions,cache-misses ./programme</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hiÃ©rarchie_mÃ©moire"><a class="anchor" href="#_hiÃ©rarchie_mÃ©moire"></a><a class="link" href="#_hiÃ©rarchie_mÃ©moire">5.2.10. HiÃ©rarchie MÃ©moire</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/arch.svg" alt="Architecture d&#8217;un ordinateur" width="500">
</div>
</div>
<div class="paragraph">
<p>Trois niveaux de cache (architectures serveur)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L3 (partagÃ©)</p>
</li>
<li>
<p>L2 (par cÅur)</p>
</li>
<li>
<p>L1 donnÃ©es et instruction</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_latences_nehalem"><a class="anchor" href="#_latences_nehalem"></a><a class="link" href="#_latences_nehalem">5.2.11. Latences (Nehalem)</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Niveau</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L1 (hit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~4 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L2 (hit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~10 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L3 (non partagÃ©e)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~40 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L3 (partagÃ©e)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65-75 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 120 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~300 000 cycles</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_fonctionnement_basique_dun_cache"><a class="anchor" href="#_fonctionnement_basique_dun_cache"></a><a class="link" href="#_fonctionnement_basique_dun_cache">5.2.12. Fonctionnement basique d&#8217;un Cache</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Le CPU demande une adresse mÃ©moire au L1.</p>
</li>
<li>
<p>Si l&#8217;adresse est disponible dans le L1, c&#8217;est un <strong>hit</strong>.</p>
</li>
<li>
<p>Sinon c&#8217;est un <strong>miss</strong>, le L1 demande au niveau supÃ©rieur, ici le L2, de lui transmettre la donnÃ©e.</p>
</li>
<li>
<p>La demande remonte la hiÃ©rarchie mÃ©moire jusqu&#8217;Ã  ce que la donnÃ©e soit trouvÃ©e.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_fonctionnement_basique_dun_cache_2"><a class="anchor" href="#_fonctionnement_basique_dun_cache_2"></a><a class="link" href="#_fonctionnement_basique_dun_cache_2">5.2.13. Fonctionnement basique d&#8217;un Cache</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour Ãªtre efficace les donnÃ©es sont dÃ©placÃ©es par paquets, les <strong>lignes de cache</strong> (typiquement 64 octets).</p>
</li>
<li>
<p>Le bus mÃ©moire dÃ©tecte les accÃ¨s linÃ©aires Ã  la mÃ©moire et rÃ©cupÃ¨re les donnÃ©es en avance (<em>prefetcher</em>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
    a[i] += 1;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/prefetch.png" alt="Prefetcher" width="200"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_politique_de_remplacement"><a class="anchor" href="#_politique_de_remplacement"></a><a class="link" href="#_politique_de_remplacement">5.2.14. Politique de remplacement</a></h4>
<div class="ulist">
<ul>
<li>
<p>LRU (Last Recently Used)</p>
</li>
<li>
<p>Les donnÃ©es les plus anciennement utilisÃ©es sont remplacÃ©es en premier.</p>
</li>
<li>
<p>Des politiques complexes permettent d&#8217;assurer la cohÃ©rence des donnÃ©es partagÃ©es en L3.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_problÃ¨me_de_capacitÃ©"><a class="anchor" href="#_problÃ¨me_de_capacitÃ©"></a><a class="link" href="#_problÃ¨me_de_capacitÃ©">5.2.15. ProblÃ¨me de capacitÃ©</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
  for j in 0..n {
    a[j][i] += 1;  // a[j][i] =&gt; a[j*n+i]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/capacity.png" alt="Capacity" width="600"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_importance_de_la_localitÃ©"><a class="anchor" href="#_importance_de_la_localitÃ©"></a><a class="link" href="#_importance_de_la_localitÃ©">5.2.16. Importance de la localitÃ©</a></h4>
<div class="paragraph">
<p>Pour optimiser l&#8217;accÃ¨s Ã  la mÃ©moire, on conÃ§oit notre algorithme pour maximiser</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LocalitÃ© spatiale: on accÃ¨de aux donnÃ©es dans l&#8217;ordre des adresses mÃ©moire</p>
</li>
<li>
<p>LocalitÃ© temporelle: si des donnÃ©es sont rÃ©utilisÃ©es, on diminue le temps entre deux rÃ©utilisations pour Ã©viter qu&#8217;elles soient remplacÃ©es entre temps dans le cache.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_un_exemple_doptimisation_transformations_de_boucles"><a class="anchor" href="#_un_exemple_doptimisation_transformations_de_boucles"></a><a class="link" href="#_un_exemple_doptimisation_transformations_de_boucles">5.2.17. Un exemple d&#8217;optimisation: transformations de boucles</a></h4>
<div class="ulist">
<ul>
<li>
<p>Transformations de boucles: souvent effectuÃ©es automatiquement par le compilateur.</p>
</li>
<li>
<p>Pour que la transformation soit faite, le compilateur doit prouver que la sÃ©mantique du code ne change pas.</p>
</li>
<li>
<p>Dans certains cas, le compilateur n&#8217;arrive pas Ã  faire tout seul la transformation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_interchange"><a class="anchor" href="#_loop_interchange"></a><a class="link" href="#_loop_interchange">5.2.18. Loop interchange</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
	for j in 0..n {
		a[j][i] = a[j][i]*a[j][i];
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_interchange_2"><a class="anchor" href="#_loop_interchange_2"></a><a class="link" href="#_loop_interchange_2">5.2.19. Loop interchange</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-interchange.png" alt="Loop interchange"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_invariant_code_motion"><a class="anchor" href="#_loop_invariant_code_motion"></a><a class="link" href="#_loop_invariant_code_motion">5.2.20. Loop-invariant code motion</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
	for j in 0..n {
		a[i][j] = c[i] + b[i][j]
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_invariant_code_motion_2"><a class="anchor" href="#_loop_invariant_code_motion_2"></a><a class="link" href="#_loop_invariant_code_motion_2">5.2.21. Loop-invariant code motion</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-invariant-cm.png" alt="Loop invariant code motion"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_if_hoisting"><a class="anchor" href="#_if_hoisting"></a><a class="link" href="#_if_hoisting">5.2.22. If hoisting</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 1..n {
  a[i] = a[i] + 1Â ;
  if i&lt;3 {
    b[i] = a[i]*c[i];
  } else {
    b[i] = a[i-1]*b[i-1];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_if_hoisting_2"><a class="anchor" href="#_if_hoisting_2"></a><a class="link" href="#_if_hoisting_2">5.2.23. If hoisting</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/if-hoisting.png" alt="If hoisting"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_fusion_fission"><a class="anchor" href="#_loop_fusion_fission"></a><a class="link" href="#_loop_fusion_fission">5.2.24. Loop fusion / fission</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-fusion-fission.png" alt="Loop fusion - fission"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Comment choisir ? Cela dÃ©pend de l&#8217;architecture. Les compilateurs utilisent des modÃ¨les de coÃ»t.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_peeling"><a class="anchor" href="#_loop_peeling"></a><a class="link" href="#_loop_peeling">5.2.25. Loop peeling</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
	a[i] = a[i] + 2;
}
for i in 2..n {
	a[i] = a[i] * 2;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_peeling_2"><a class="anchor" href="#_loop_peeling_2"></a><a class="link" href="#_loop_peeling_2">5.2.26. Loop peeling</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-peeling.png" alt="Loop Peeling"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_unroll"><a class="anchor" href="#_loop_unroll"></a><a class="link" href="#_loop_unroll">5.2.27. Loop unroll</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
    c[i] += b[i] + a[i];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_unroll_2"><a class="anchor" href="#_loop_unroll_2"></a><a class="link" href="#_loop_unroll_2">5.2.28. Loop unroll</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-unroll.png" alt="Loop Unroll"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>RÃ©duit le surcoÃ»t de contrÃ´le.</p>
</li>
<li>
<p>Parfois, permet de vectoriser le code.</p>
</li>
<li>
<p>Parfois, fait apparaÃ®tre des simplifications.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_blocking_ou_tiling"><a class="anchor" href="#_loop_blocking_ou_tiling"></a><a class="link" href="#_loop_blocking_ou_tiling">5.2.29. Loop blocking ou tiling</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-blocking.png" alt="Loop Blocking"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>n</code> grand: <code>b[]</code> ne rentre pas dans le cache.</p>
</li>
<li>
<p>LocalitÃ© spatiale: ok.</p>
</li>
<li>
<p>LocalitÃ© temporelle: problÃ¨me sur <code>b[j]</code>.</p>
</li>
<li>
<p>Comment optimiser ce code ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_blocking_ou_tiling_2"><a class="anchor" href="#_loop_blocking_ou_tiling_2"></a><a class="link" href="#_loop_blocking_ou_tiling_2">5.2.30. Loop blocking ou tiling</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-blocking2.png" alt="Loop Blocking"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_un_mot_rapide_sur_la_parallÃ©lisation"><a class="anchor" href="#_un_mot_rapide_sur_la_parallÃ©lisation"></a><a class="link" href="#_un_mot_rapide_sur_la_parallÃ©lisation">5.2.31. Un mot rapide sur la parallÃ©lisation</a></h4>
<div class="paragraph">
<p>Les architectures rÃ©centes sont multicÅurs, pour en tirer parti les programmes peuvent Ãªtre <em>parallÃ©lisÃ©s</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DÃ©composer le travail en parties indÃ©pendantes. Chaque partie sera effectuÃ©e par un <em>thread</em> dans un cÅur diffÃ©rent.</p>
</li>
<li>
<p>Limiter au maximum les communications et synchronisations entre threads (coÃ»teuses).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_exemple_de_parallÃ©lisation_en_rust"><a class="anchor" href="#_exemple_de_parallÃ©lisation_en_rust"></a><a class="link" href="#_exemple_de_parallÃ©lisation_en_rust">5.2.32. Exemple de parallÃ©lisation en rust</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">extern crate rayon;
use rayon::prelude::*;
fn main() {
    let mut v = vec![1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    v.par_chunks_mut(3).for_each(|chunk| {
        for x in chunk { *x *= 2; }
    });
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>par_chunks</code> et <code>par_chunks_mut</code> dÃ©composent un itÃ©rateur en morceaux (<code>chunks</code>) indÃ©pendants.</p>
</li>
<li>
<p>la mÃ©thode <code>for_each</code> va exÃ©cuter un traitement parallÃ¨le sur chaque morceau.</p>
</li>
<li>
<p><code>|chunk| { &#8230;&#8203; }</code> est une clÃ´ture. C&#8217;est une fonction anonyme qui peut capturer les variables de l&#8217;environnement oÃ¹ elle est dÃ©clarÃ©e.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2025-2026<br>
Last updated 2025-09-08 13:57:54 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>