<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Stéphane Lopes &lt;stephane.lopes@uvsq.fr&gt;, Pablo de Oliveira Castro &lt;pablo.oliveira@uvsq.fr&gt;">
<title>Programmation efficace</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Programmation efficace</h1>
<div class="details">
<span id="author" class="author">Stéphane Lopes &lt;stephane.lopes@uvsq.fr&gt;, Pablo de Oliveira Castro &lt;pablo.oliveira@uvsq.fr&gt;</span><br>
<span id="revnumber">version 2025-2026</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Sommaire</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_programmation_efficace">1.1. Programmation efficace</a></li>
<li><a href="#_caractéristiques_des_langages_de_programmation">1.2. Caractéristiques des langages de programmation</a></li>
<li><a href="#_rust_refcard">1.3. Rust RefCard</a></li>
</ul>
</li>
<li><a href="#_outils_de_développement">2. Outils de développement</a>
<ul class="sectlevel2">
<li><a href="#_au_delà_de_léditeur_et_du_compilateur">2.1. Au delà de l&#8217;éditeur et du compilateur</a></li>
<li><a href="#_au_niveau_du_système_dexploitation">2.2. Au niveau du système d&#8217;exploitation</a></li>
<li><a href="#_écrire_du_code_et_collaborer">2.3. Écrire du code et collaborer</a></li>
<li><a href="#_débogage_tests_et_profilage">2.4. Débogage, tests et profilage</a></li>
<li><a href="#_qualité_du_code_et_documentation">2.5. Qualité du code et documentation</a></li>
<li><a href="#_construction_dun_projet">2.6. Construction d’un projet</a></li>
<li><a href="#_vers_la_livraison_continue">2.7. Vers la livraison continue</a></li>
</ul>
</li>
<li><a href="#_rust">3. Rust</a>
<ul class="sectlevel2">
<li><a href="#_rust_types_composites_et_constructions_spécifiques">3.1. Rust: Types composites et constructions spécifiques</a></li>
<li><a href="#_concepts_objet_en_rust">3.2. Concepts objet en Rust</a></li>
</ul>
</li>
<li><a href="#_modèles_mémoire">4. Modèles Mémoire</a>
<ul class="sectlevel2">
<li><a href="#_gestion_de_la_mémoire_2">4.1. Gestion de la mémoire</a></li>
<li><a href="#_modèle_mémoire_rust_propriété_et_emprunts">4.2. Modèle mémoire Rust: propriété et emprunts</a></li>
</ul>
</li>
<li><a href="#_consommation_énergétique">5. Consommation Énergétique</a>
<ul class="sectlevel2">
<li><a href="#_consommation_énergétique_des_ordinateurs">5.1. Consommation énergétique des ordinateurs</a></li>
<li><a href="#_optimisations_de_code">5.2. Optimisations de code</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a><a class="link" href="#_introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_programmation_efficace"><a class="anchor" href="#_programmation_efficace"></a><a class="link" href="#_programmation_efficace">1.1. Programmation efficace</a></h3>
<div class="sect3">
<h4 id="_objectifs_du_cours_programmation_efficace"><a class="anchor" href="#_objectifs_du_cours_programmation_efficace"></a><a class="link" href="#_objectifs_du_cours_programmation_efficace">1.1.1. Objectifs du cours « Programmation efficace »</a></h4>
<div class="ulist">
<ul>
<li>
<p>Comprendre les mécanismes utilisés dans les langages de programmation et leur impact sur l&#8217;efficacité des applications</p>
</li>
<li>
<p>Découvrir les caractéristiques d&#8217;un langage statiquement typé et compilé</p>
</li>
<li>
<p>Présenter les outils de développement associés (compilateur, build, tests)</p>
</li>
<li>
<p>Sensibiliser aux difficultés liées à la gestion de la mémoire, à la gestion d&#8217;erreurs, aux I/O, au multi-threading</p>
</li>
<li>
<p>Mettre en évidence les différences d&#8217;efficacité liées aux points précédents</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_quentend_on_par_efficacité"><a class="anchor" href="#_quentend_on_par_efficacité"></a><a class="link" href="#_quentend_on_par_efficacité">1.1.2. Qu&#8217;entend-on par efficacité ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>La notion d&#8217;efficacité couvre un large spectre de critères</p>
<div class="ulist">
<ul>
<li>
<p>performances à l&#8217;exécution (temps d&#8217;exécution, cycles CPU, consommation mémoire)</p>
</li>
<li>
<p>performances énergétiques (consommation d&#8217;énergie, impact environnemental)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Certains de ces critères peuvent être antagonistes</p>
</li>
<li>
<p>Les choix finaux relèvent souvent d&#8217;un compromis</p>
</li>
<li>
<p>La question de l&#8217;efficacité peut aussi se poser pour le cycle de développement lui-même</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_références"><a class="anchor" href="#_références"></a><a class="link" href="#_références">1.1.3. Références</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://reberhardt.com/cs110l/">CS 110L: Safety in Systems Programming</a> (<a href="https://reberhardt.com/blog/2020/10/05/designing-a-new-class-at-stanford-safety-in-systems-programming.html">blog</a>)</p>
</li>
<li>
<p><em>Portegies Zwart, S.</em> <a href="https://arxiv.org/pdf/2009.11295.pdf">The Ecological Impact of High-performance Computing in Astrophysics</a>. Nat Astron 4, 819–822 (2020) : article dans Nature qui compare l&#8217;impact carbone de différents langages de programmation pour des codes d&#8217;astrophysique</p>
</li>
<li>
<p><em>Rui Pereira, and al.</em> <a href="https://greenlab.di.uminho.pt/wp-content/uploads/2017/09/paperSLE.pdf">Energy efficiency across Programming Languages</a>: how do energy, time, and memory relate? In Proceedings of the 10th ACM SIGPLAN International Conference on Software Language Engineering (SLE 2017). Association for Computing Machinery, New York, NY, USA, 256–267 : article dans SLE qui mesure l&#8217;efficacité énergétique de plusieurs langages de programmation</p>
</li>
<li>
<p><em>Cyrille Bonamy</em>, et al.. <a href="https://hal.archives-ouvertes.fr/hal-03009741/">Je code : les bonnes pratiques en éco-conception de service numérique à destination des développeurs de logiciels</a>. 2022, pp.1-19. ⟨hal-03009741v4⟩</p>
</li>
<li>
<p><em>Kheira Bettayeb</em>. <a href="https://lejournal.cnrs.fr/articles/comment-rendre-les-applications-moins-energivores">Comment rendre les applications moins énergivores ?</a>. CNRS Le journal, 2022.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_caractéristiques_des_langages_de_programmation"><a class="anchor" href="#_caractéristiques_des_langages_de_programmation"></a><a class="link" href="#_caractéristiques_des_langages_de_programmation">1.2. Caractéristiques des langages de programmation</a></h3>
<div class="sect3">
<h4 id="_implémentation_des_langages"><a class="anchor" href="#_implémentation_des_langages"></a><a class="link" href="#_implémentation_des_langages">1.2.1. Implémentation des langages</a></h4>
<div class="ulist">
<ul>
<li>
<p>Avec un <em>langage compilé</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Compiled_language"><i class="fa fa-wikipedia-w"></i></a></span></sup>, le <em>code source</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Code_source"><i class="fa fa-wikipedia-w"></i></a></span></sup> du programme est transformé en <em>code machine</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Code_objet"><i class="fa fa-wikipedia-w"></i></a></span></sup> par le <em>compilateur</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Compilateur"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>Dans un <em>langage interprété</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Interpreted_language"><i class="fa fa-wikipedia-w"></i></a></span></sup>, le code source du programme est exécuté « à la volée » par l'<em>interpréteur</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interpr%C3%A8te_(informatique)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>Certains langages sont à la fois compilés et interprétés</p>
</li>
<li>
<p>Il existe des approches intermédiaires (compilation <em>Just In Time</em> (JIT)<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Compilation_%C3%A0_la_vol%C3%A9e"><i class="fa fa-wikipedia-w"></i></a></span></sup>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_c_est_compilé"><a class="anchor" href="#_c_est_compilé"></a><a class="link" href="#_c_est_compilé">C est compilé</a></h5>
<div class="listingblock">
<div class="title">Compilation séparée (produit <code>util.o</code> et <code>main.o</code>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gcc -c util.c
$ gcc -c main.c</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Édition de liens (produit <code>monprog</code>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gcc -o monprog main.o util.o</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>monprog</code> est exécutable</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./monprog</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_python_est_interprété"><a class="anchor" href="#_python_est_interprété"></a><a class="link" href="#_python_est_interprété">Python est interprété</a></h5>
<div class="listingblock">
<div class="title">Exécution d&#8217;un programme Python</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ python3 monprog.py</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_java_est_compilé_puis_interprété_jit"><a class="anchor" href="#_java_est_compilé_puis_interprété_jit"></a><a class="link" href="#_java_est_compilé_puis_interprété_jit">Java est compilé puis interprété (JIT)</a></h5>
<div class="listingblock">
<div class="title">Compilation en <em>bytecode</em> (produit <code>Main.class</code>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ javac Main.java</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Exécution avec la JVM (<em>Java Virtual Machine</em>)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java Main</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_langage_de_scripts"><a class="anchor" href="#_langage_de_scripts"></a><a class="link" href="#_langage_de_scripts">1.2.2. Langage de scripts</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>script</em> est un programme destiné à automatiser l&#8217;enchaînement de tâches dans un environnement particulier</p>
</li>
<li>
<p>Un <em>langage de scripts</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Langage_de_script"><i class="fa fa-wikipedia-w"></i></a></span></sup> est un langage de programmation permettant de développer des scripts</p>
</li>
<li>
<p>Il permet d&#8217;invoquer les primitives du système sous-jacent</p>
</li>
<li>
<p>Il dispose en général d&#8217;un <em>REPL</em> (<em>Read-Eval-Print Loop</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop"><i class="fa fa-wikipedia-w"></i></a></span></sup>)</p>
</li>
<li>
<p>Quelques exemples</p>
<div class="ulist">
<ul>
<li>
<p>shells<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interpr%C3%A9teur_de_commandes"><i class="fa fa-wikipedia-w"></i></a></span></sup> pour les OS : <a href="https://www.gnu.org/software/bash/">Bash</a>, <a href="https://www.zsh.org/">Zsh</a>, <a href="https://www.tcsh.org/">tcsh</a></p>
</li>
<li>
<p><a href="https://www.ecma-international.org/publications-and-standards/standards/ecma-262/">ECMAScript</a> (Javascript) pour les navigateurs web</p>
</li>
<li>
<p><a href="https://www.lua.org/">Lua</a> embarqué dans une application (<a href="https://wiki.videolan.org/Documentation:Building_Lua_Playlist_Scripts/"><em>VLC Media Player</em></a>, jeu <a href="https://wiki.wesnoth.org/LuaWML"><em>Battle for Wesnoth</em></a>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_système_de_typage"><a class="anchor" href="#_système_de_typage"></a><a class="link" href="#_système_de_typage">1.2.3. Système de typage</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>système de typage</em> attribue des types aux éléments du langage</p>
</li>
<li>
<p>Attribuer un type à une expression permet de limiter les erreurs de programmation</p>
<div class="ulist">
<ul>
<li>
<p>en définissant ce qu&#8217;il est possible de faire avec une expression</p>
</li>
<li>
<p>en définissant les règles de compatibilité entre expressions</p>
</li>
<li>
<p>en vérifiant ces contraintes</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_typage_explicite_vs_implicite"><a class="anchor" href="#_typage_explicite_vs_implicite"></a><a class="link" href="#_typage_explicite_vs_implicite">Typage explicite vs. implicite</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le typage est <em>explicite</em> si les annotations de type sont visibles dans le code source</p>
<div class="listingblock">
<div class="title">En C, chaque déclaration de variable précise son type</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">int nombre = 1;
double pi = 3.141592;</code></pre>
</div>
</div>
</li>
<li>
<p>Le typage est <em>implicite</em> si les types ne sont pas précisés dans le code source</p>
<div class="listingblock">
<div class="title">En Python, la première affectation crée la variable</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">nombre = 1
pi = 3.141592</code></pre>
</div>
</div>
</li>
<li>
<p>Des langages à typage explicite peuvent faire appel à l'<em>inférence de types</em> dans certaines situations</p>
<div class="ulist">
<ul>
<li>
<p>permet la déduction automatique des types</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_typage_statique_vs_dynamique"><a class="anchor" href="#_typage_statique_vs_dynamique"></a><a class="link" href="#_typage_statique_vs_dynamique">Typage statique vs. dynamique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le typage est <em>statique</em> si l&#8217;information de type est associée à l&#8217;identificateur</p>
<div class="ulist">
<ul>
<li>
<p>&#8658; la vérification des types peut être réalisée lors de la compilation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le typage est <em>dynamique</em> si l&#8217;information de type est portée par l&#8217;objet lui-même</p>
<div class="ulist">
<ul>
<li>
<p>&#8658; la vérification se fait durant l&#8217;exécution</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_typage_statique"><a class="anchor" href="#_typage_statique"></a><a class="link" href="#_typage_statique">Typage statique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Améliore la fiabilité du programme (plus de vérifications plus précoces)</p>
</li>
<li>
<p>Meilleur support des outils (IDE)</p>
</li>
<li>
<p>Meilleures performances</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En C, les erreurs de type sont identifiées par le compilateur</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">double a = "une chaine";
// error: incompatible types when initializing type ‘double’ using type ‘char *’</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_typage_dynamique"><a class="anchor" href="#_typage_dynamique"></a><a class="link" href="#_typage_dynamique">Typage dynamique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Offre plus de souplesse dans l&#8217;écriture du code source</p>
<div class="ulist">
<ul>
<li>
<p><em>duck typing</em>, <em>data as code</em>, métaprogrammation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Permet le prototypage rapide</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En Python, les erreurs de type peuvent passer inaperçues</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">pi = 3.14_15_92
pi = 'π'
print(pi * 2) // affiche ππ</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_typage_fort_vs_faible"><a class="anchor" href="#_typage_fort_vs_faible"></a><a class="link" href="#_typage_fort_vs_faible">Typage fort vs. faible</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le typage est <em>fort</em> si les manipulations entre données de types différents sont limitées et contrôlées</p>
</li>
<li>
<p>Le typage est <em>faible</em> si les possibilités de transtypage sont nombreuses et implicites</p>
</li>
<li>
<p>Ces notions sont relativement floues</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Le C est à typage fort mais…</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">int a = "une chaine";
printf("%d\n", a); // 443215...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_support_des_paradigmes_de_programmation"><a class="anchor" href="#_support_des_paradigmes_de_programmation"></a><a class="link" href="#_support_des_paradigmes_de_programmation">1.2.4. Support des paradigmes de programmation</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <strong>paradigme de programmation</strong> représente la façon d&#8217;aborder un problème et d&#8217;en concevoir la solution.</p>
</li>
<li>
<p>Quelques paradigmes</p>
<div class="ulist">
<ul>
<li>
<p>Programmation impérative</p>
<div class="ulist">
<ul>
<li>
<p>Programmation structurée</p>
</li>
<li>
<p>Programmation modulaire</p>
</li>
<li>
<p>Programmation par abstraction de données</p>
</li>
<li>
<p>Programmation objet</p>
</li>
</ul>
</div>
</li>
<li>
<p>Programmation fonctionnelle</p>
</li>
<li>
<p>Programmation logique</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un langage <strong>supporte un paradigme</strong> quand il fournit les fonctionnalités pour utiliser ce style (de façon simple, sécurisée et efficace)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_programmation_logique_avec_prolog"><a class="anchor" href="#_exemple_programmation_logique_avec_prolog"></a><a class="link" href="#_exemple_programmation_logique_avec_prolog">Exemple - Programmation logique avec Prolog</a></h5>
<div class="paragraph">
<p>Prolog est un langage déclaratif qui permet de définir et d&#8217;interroger une <em>base de faits</em></p>
</div>
<div class="listingblock">
<div class="title">Un <em>fait</em> est une assertion simple</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- Idéfix est un chien
chien(idefix).</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Une <em>règle</em> décrit une inférence à partir des faits</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- Les chiens aiment les arbres
aimeLesArbres(X):- chien(X).</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Une <em>requête</em> est une question sur la <em>base de connaissance</em></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- Idéfix aime-t'il les arbres ?
?- aimeLesArbres(idefix)</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_requête"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_requête"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_requête">Solveur de Sudoku \(4 xx 4\) en Prolog - Requête</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- requête

| ?- sudoku([_, _, 2, 3,
             _, _, _, _,
             _, _, _, _,
             3, 4, _, _],
             Solution).</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_résolution_13"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_résolution_13"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_résolution_13">Solveur de Sudoku \(4 xx 4\) en Prolog - Résolution 1/3</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- la solution doit être unifiée avec le problème
- le problème comporte 16 chiffres
- chaque chiffre est compris entre 1 et 4 (fd_domain)

sudoku(Puzzle, Solution) :-
  Solution = Puzzle,
  Puzzle = [A1, A2, A3, A4,
            B1, B2, B3, B4,
            C1, C2, C3, C4,
            D1, D2, D3, D4],
  fd_domain(Puzzle, 1, 4),</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_résolution_23"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_résolution_23"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_résolution_23">Solveur de Sudoku \(4 xx 4\) en Prolog - Résolution 2/3</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- les blocs (lignes, colonnes et carrés) sont définis

  Row1 = [A1, A2, A3, A4],
  Row2 = [B1, B2, B3, B4],
  Row3 = [C1, C2, C3, C4],
  Row4 = [D1, D2, D3, D4],

  Col1 = [A1, B1, C1, D1],
  Col2 = [A2, B2, C2, D2],
  Col3 = [A3, B3, C3, D3],
  Col4 = [A4, B4, C4, D4],

  Square1 = [A1, A2, B1, B2],
  Square2 = [A3, A4, B3, B4],
  Square3 = [C1, C2, D1, D2],
  Square4 = [C3, C4, D3, D4],</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_solveur_de_sudoku_4_xx_4_en_prolog_résolution_33"><a class="anchor" href="#_solveur_de_sudoku_4_xx_4_en_prolog_résolution_33"></a><a class="link" href="#_solveur_de_sudoku_4_xx_4_en_prolog_résolution_33">Solveur de Sudoku \(4 xx 4\) en Prolog - Résolution 3/3</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-prolog hljs" data-lang="prolog">- le prédicat valid reçoit une liste de 12 blocs
- la liste vide est valide
- la tête de la liste ne comporte pas de doublons (fd_all_different)
- le reste de la liste doit être valide

valid([]).
valid([Head|Tail]) :-
  fd_all_different(Head),
  valid(Tail).

- une solution possède des blocs valides

  valid([Row1, Row2, Row3, Row4,
         Col1, Col2, Col3, Col4,
         Square1, Square2, Square3, Square4]).</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_programmation_fonctionnelle_avec_haskell"><a class="anchor" href="#_exemple_programmation_fonctionnelle_avec_haskell"></a><a class="link" href="#_exemple_programmation_fonctionnelle_avec_haskell">Exemple - Programmation fonctionnelle avec Haskell</a></h5>
<div class="ulist">
<ul>
<li>
<p>Haskell est un langage fonctionnel</p>
</li>
<li>
<p>Possède un système de typage statique, fort et principalement implicite (inférence de types)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_haskell_12"><a class="anchor" href="#_haskell_12"></a><a class="link" href="#_haskell_12">Haskell 1/2</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-haskell hljs" data-lang="haskell">-- Calcul de la fonction factorielle

-- Récursive
fact x = if x == 0 then 1 else fact (x - 1) * x

-- Pattern matching
fact 0 = 1
fact x = x * fact (x - 1)

-- Gardes
fact x
   | x &gt; 1 = x * fact (x - 1)
   | otherwise = 1

-- Liste et intervalle
fac x = product [1..x]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_haskell_22"><a class="anchor" href="#_haskell_22"></a><a class="link" href="#_haskell_22">Haskell 2/2</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-haskell hljs" data-lang="haskell">-- Fonctions d'ordre supérieure
mapList f [] = []
mapList f (x:xs) = f x : mapList f xs

-- Listes en compréhension et évaluation paresseuse
take 10 [ (i,j) | i &lt;- [1..], j &lt;- [1..], i &lt; j ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_langage_impératif"><a class="anchor" href="#_langage_impératif"></a><a class="link" href="#_langage_impératif">1.2.5. Langage impératif</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>langage impératif</em> représente un programme comme une séquence d&#8217;instructions qui modifient son état au cours de son exécution</p>
</li>
<li>
<p>Un programme décrit <strong>comment</strong> aboutir à la solution du problème</p>
</li>
<li>
<p>Proche de l&#8217;architecture matérielle des ordinateurs (<em>architecture de von Neumann</em>)</p>
</li>
<li>
<p>De nombreux langages populaires sont de ce type (C, Java, Python)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_langage_déclaratif"><a class="anchor" href="#_langage_déclaratif"></a><a class="link" href="#_langage_déclaratif">1.2.6. Langage déclaratif</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>langage déclaratif</em> permet de décrire ce que le programme doit faire (le <strong>quoi</strong>) et non pas comment il doit le faire (le <strong>comment</strong>)</p>
</li>
<li>
<p>Un programme respectant ce style décrit le problème à traiter</p>
</li>
<li>
<p>Quelques exemples : Prolog, SQL</p>
</li>
<li>
<p>Certains langages impératifs embarquent des constructions déclaratives</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_de_la_mémoire"><a class="anchor" href="#_gestion_de_la_mémoire"></a><a class="link" href="#_gestion_de_la_mémoire">1.2.7. Gestion de la mémoire</a></h4>
<div class="ulist">
<ul>
<li>
<p>La gestion de la mémoire dans un langage de programmation décrit comment les objets inutilisés sont identifiés et désalloués</p>
<div class="ulist">
<ul>
<li>
<p>nécessaire pour éviter les <em>fuites de mémoire</em> (<em>memory leaks</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>La plupart des langages ont une gestion automatique de la mémoire et s&#8217;appuient sur un <em>ramasse-miettes</em> (<em>garbage collector</em>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">En Java, le ramasse-miettes est chargé de libérer la mémoire allouée dynamiquement</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">int[] tableau = new int[10]; // allocation d'un tableau de 10 cases
// la désallocation est automatique</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Les langages C et C++ ont une gestion manuelle de la mémoire</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-C hljs" data-lang="C">int[] tableau = malloc(10 * sizeof(int)); // allocation d'un tableau de 10 cases
// ...
free(tableau); // libération de la mémoire</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_caractéristiques_de_quelques_langages"><a class="anchor" href="#_caractéristiques_de_quelques_langages"></a><a class="link" href="#_caractéristiques_de_quelques_langages">1.2.8. Caractéristiques de quelques langages</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Langage</th>
<th class="tableblock halign-left valign-top">Implémentation</th>
<th class="tableblock halign-left valign-top">Scripts</th>
<th class="tableblock halign-left valign-top">Typage</th>
<th class="tableblock halign-left valign-top">Paradigme</th>
<th class="tableblock halign-left valign-top">Mémoire</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compilé</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">explicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">procédural</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">manuelle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compilé, interprété</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">explicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OO, fonc., générique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PHP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interprété</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, dynamique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proc., OO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Python</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compilé, Interprété</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, dynamique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proc., OO, fonc.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rust</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compilé</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">proc., fonc., générique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">manuelle</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scala</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Compilé, interprété</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oui</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">implicite, statique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OO, fonc., générique</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">auto</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_rust_refcard"><a class="anchor" href="#_rust_refcard"></a><a class="link" href="#_rust_refcard">1.3. Rust RefCard</a></h3>
<div class="sect3">
<h4 id="_le_langage_rust"><a class="anchor" href="#_le_langage_rust"></a><a class="link" href="#_le_langage_rust">1.3.1. Le langage Rust</a></h4>
<div class="sect4">
<h5 id="_historique"><a class="anchor" href="#_historique"></a><a class="link" href="#_historique">Historique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Conçu et développé initialement par Graydon Hoare (Mozilla Research) en 2010</p>
</li>
<li>
<p>Première version stable en 2015</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_caractéristiques_du_langage"><a class="anchor" href="#_caractéristiques_du_langage"></a><a class="link" href="#_caractéristiques_du_langage">Caractéristiques du langage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Langage compilé à typage statique fort</p>
</li>
<li>
<p>Supporte les paradigmes impératif, fonctionnel et concurrent</p>
</li>
<li>
<p>Gestion manuelle de la mémoire (pas de <em>garbage collector</em>)</p>
</li>
<li>
<p>Accès mémoire validés statiquement par le compilateur (<em>borrow checker</em>)</p>
</li>
<li>
<p>Est accompagné de <em>cargo</em> pour la gestion de la compilation et des bibliothèques</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_quelques_domaines_dapplication"><a class="anchor" href="#_quelques_domaines_dapplication"></a><a class="link" href="#_quelques_domaines_dapplication">1.3.2. Quelques domaines d&#8217;application</a></h4>
<div class="ulist">
<div class="title">Parfois vu comme un possible successeur de C/C++</div>
<ul>
<li>
<p>Programmation système</p>
</li>
<li>
<p>Applications en ligne de commande</p>
</li>
<li>
<p>Applications Web (via WebAssembly)</p>
</li>
<li>
<p>Services réseaux</p>
</li>
<li>
<p>Systèmes embarqués.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_quelques_outils_de_développement"><a class="anchor" href="#_quelques_outils_de_développement"></a><a class="link" href="#_quelques_outils_de_développement">1.3.3. Quelques outils de développement</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le compilateur <a href="https://doc.rust-lang.org/rustc/index.html"><code>rustc</code></a> ainsi que l&#8217;environnement de développement est préférentiellement installé avec l&#8217;outil de distribution <a href="https://github.com/rust-lang/rustup"><code>rustup</code></a></p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/cargo/index.html"><code>cargo</code></a> est le gestionnaire de compilation et de dépendance</p>
</li>
<li>
<p><a href="https://crates.io/"><code>crates.io</code></a> est le dépôt central des bibliothèques du langage</p>
</li>
<li>
<p><a href="https://github.com/rust-lang/rustfmt"><code>rustfmt</code></a> formate les fichiers sources</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/rustdoc/index.html"><code>rustdoc</code></a> génère la documentation de l&#8217;API d&#8217;une application</p>
</li>
<li>
<p><a href="https://github.com/rust-lang/rust-clippy"><code>clippy</code></a> est un <em>linter</em> pour le code Rust</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_hello_world_en_rust"><a class="anchor" href="#_hello_world_en_rust"></a><a class="link" href="#_hello_world_en_rust">1.3.4. « Hello World » en Rust</a></h4>
<div class="listingblock">
<div class="title">src/intro/exemples/hello.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() { <i class="conum" data-value="1"></i><b>(1)</b>
    println!("Hello world!"); <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Le programme principal est représenté par la fonction <code>main</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La macro <code>println!</code> affiche un texte sur la sortie standard</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_compilation"><a class="anchor" href="#_compilation"></a><a class="link" href="#_compilation">1.3.5. Compilation</a></h4>
<div class="sect4">
<h5 id="_compilateur"><a class="anchor" href="#_compilateur"></a><a class="link" href="#_compilateur">Compilateur</a></h5>
<div class="listingblock">
<div class="title">Le compilateur Rust se nomme <a href="https://doc.rust-lang.org/rustc/index.html"><code>rustc</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ rustc hello.rs</code></pre>
</div>
</div>
<div class="hdlist">
<div class="title">Quelques options</div>
<table>
<tr>
<td class="hdlist1">
<code>-L</code>
</td>
<td class="hdlist2">
<p>ajoute un répertoire au chemin de recherche des bibliothèques</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--edition</code>
</td>
<td class="hdlist2">
<p>précise l&#8217;<a href="https://doc.rust-lang.org/edition-guide/introduction.html">édition</a> de Rust à utiliser (2015|2018|2021)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--emit</code>
</td>
<td class="hdlist2">
<p>spécifie le type de fichiers de sortie à générer</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>-g</code>
</td>
<td class="hdlist2">
<p>inclut les informations de débogage</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>-O</code>
</td>
<td class="hdlist2">
<p>optimise le code</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--explain</code>
</td>
<td class="hdlist2">
<p>donne des détails sur un message d&#8217;erreur</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>--test</code>
</td>
<td class="hdlist2">
<p>génère un programme pour exécuter les tests à la place du <code>main</code></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exécuter_le_programme"><a class="anchor" href="#_exécuter_le_programme"></a><a class="link" href="#_exécuter_le_programme">Exécuter le programme</a></h5>
<div class="listingblock">
<div class="title">Le programme généré est un exécutable natif du système cible</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./hello</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_débuter_un_projet_rust"><a class="anchor" href="#_débuter_un_projet_rust"></a><a class="link" href="#_débuter_un_projet_rust">1.3.6. Débuter un projet Rust</a></h4>
<div class="listingblock">
<div class="title">L&#8217;initialisation d&#8217;un projet Rust s&#8217;appuie sur <a href="https://doc.rust-lang.org/cargo/index.html"><code>cargo</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cargo new hello
$ tree hello
hello
├── Cargo.toml
└── src
    └── main.rs</code></pre>
</div>
</div>
<div class="ulist">
<div class="title"><code>cargo</code> initialise un projet Rust avec</div>
<ul>
<li>
<p>un nouveau répertoire du nom du projet,</p>
</li>
<li>
<p>un dépôt <code>git</code>,</p>
</li>
<li>
<p>un fichier <code>Cargo.toml</code> décrivant le projet,</p>
</li>
<li>
<p>un sous-répertoire pour le code source,</p>
</li>
<li>
<p>un fichier <code>main.rs</code> contenant le <code>main</code> du <em>crate</em></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_système_de_build"><a class="anchor" href="#_système_de_build"></a><a class="link" href="#_système_de_build">Système de build</a></h5>
<div class="listingblock">
<div class="title">Le système de build intégré avec Rust se nomme <a href="https://doc.rust-lang.org/cargo/index.html"><code>cargo</code></a></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd src/intro/exemples/hello
$ cargo build
   Compiling hello v0.1.0 (src/intro/exemples/hello)
    Finished dev [unoptimized + debuginfo] target(s) in 0.42s
$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.01s
     Running `target/debug/hello`
Hello, world!</code></pre>
</div>
</div>
<div class="hdlist">
<div class="title">Quelques commandes et options</div>
<table>
<tr>
<td class="hdlist1">
<code>build</code>
</td>
<td class="hdlist2">
<p>construit le <em>crate</em> en mode débogage</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>--release</code></dt>
<dd>
<p>optimise le code et génère en mode distribution</p>
</dd>
</dl>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>check</code>
</td>
<td class="hdlist2">
<p>vérifie le <em>crate</em> sans générer d&#8217;exécutable</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>run</code>
</td>
<td class="hdlist2">
<p>exécute le <em>crate</em></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>test</code>
</td>
<td class="hdlist2">
<p>compile et exécute les tests</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_notions_de_base"><a class="anchor" href="#_notions_de_base"></a><a class="link" href="#_notions_de_base">1.3.7. Notions de base</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un code source Rust est une séquence de caractères Unicode UTF-8</p>
</li>
<li>
<p>Une unité de compilation Rust est dénommée un <a href="https://doc.rust-lang.org/reference/crates-and-source-files.html"><em>crate</em></a> (<em>caisse</em>)</p>
</li>
<li>
<p>Un <em>crate</em> contient des <a href="https://doc.rust-lang.org/reference/items/modules.html"><em>modules</em></a> imbriqués</p>
</li>
<li>
<p>Un fichier source (extension <code>.rs</code>) est un module</p>
</li>
<li>
<p>La plupart des instructions se terminent par un <code>;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_commentaires"><a class="anchor" href="#_commentaires"></a><a class="link" href="#_commentaires">1.3.8. Commentaires</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/reference/comments.html">Commentaires</a></p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>/* &#8230;&#8203; */</code>
</td>
<td class="hdlist2">
<p>le texte entre <code>/*</code> et <code>*/</code> est ignoré (peuvent être imbriqués)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/** &#8230;&#8203; */</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation (équiv. à l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/*! &#8230;&#8203; */</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation interne (équiv. à l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>// &#8230;&#8203;</code>
</td>
<td class="hdlist2">
<p>le texte jusqu&#8217;à la fin de la ligne est ignoré</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>/// &#8230;&#8203;</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation (équiv. à l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>//! &#8230;&#8203;</code>
</td>
<td class="hdlist2">
<p>commentaire de documentation interne (équiv. à l&#8217;<a href="https://doc.rust-lang.org/rustdoc/the-doc-attribute.html">attribut doc</a> <code>#[doc="&#8230;&#8203;"]</code>)</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_système_de_typage_2"><a class="anchor" href="#_système_de_typage_2"></a><a class="link" href="#_système_de_typage_2">1.3.9. Système de typage</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <a href="https://doc.rust-lang.org/reference/types.html">type</a> d&#8217;une valeur définit l&#8217;interprétation de l&#8217;emplacement mémoire la contenant ainsi que les opérations qu&#8217;on peut lui appliquer</p>
</li>
<li>
<p>Chaque variable ou expression possède un type</p>
</li>
<li>
<p>Rust est un langage à <em>typage statique</em></p>
</li>
<li>
<p>Le compilateur peut en général inférer le type d&#8217;une variable à partir de son contenu</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_types_primitifs"><a class="anchor" href="#_types_primitifs"></a><a class="link" href="#_types_primitifs">1.3.10. Types primitifs</a></h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.bool.html"><code>bool</code></a>
</td>
<td class="hdlist2">
<p>Booléen (<code>true</code> ou <code>false</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.i8.html"><code>i8</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i16.html"><code>i16</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i32.html"><code>i32</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i64.html"><code>i64</code></a>, <a href="https://doc.rust-lang.org/std/primitive.i128.html"><code>i128</code></a>, <a href="https://doc.rust-lang.org/std/primitive.isize.html"><code>isize</code></a>
</td>
<td class="hdlist2">
<p>Entier signé (8, 16, 32, 64, 128 bits ou dépendant de l&#8217;architecture)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.u8.html"><code>u8</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u16.html"><code>u16</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u32.html"><code>u32</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u64.html"><code>u64</code></a>, <a href="https://doc.rust-lang.org/std/primitive.u128.html"><code>u128</code></a>, <a href="https://doc.rust-lang.org/std/primitive.usize.html"><code>usize</code></a>
</td>
<td class="hdlist2">
<p>Entier non signé (8, 16, 32, 64, 128 bits ou dépendant de l&#8217;architecture)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.f32.html"><code>f32</code></a>, <a href="https://doc.rust-lang.org/std/primitive.f64.html"><code>f64</code></a>
</td>
<td class="hdlist2">
<p>Nombre en virgule flottante (simple ou double précision)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.char.html"><code>char</code></a>
</td>
<td class="hdlist2">
<p>Caractère Unicode (32 bits)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.str.html"><code>str</code></a>
</td>
<td class="hdlist2">
<p>Chaîne de caractères UTF-8</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.array.html"><code>array</code></a>
</td>
<td class="hdlist2">
<p>Tableau de taille fixe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.tuple.html"><code>tuple</code></a>
</td>
<td class="hdlist2">
<p>Séquence d&#8217;éléments hétérogènes</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/04_primitive_types">rustlings</a>, <a href="https://practice.course.rs//basic-types/numbers.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_littéraux"><a class="anchor" href="#_littéraux"></a><a class="link" href="#_littéraux">1.3.11. Littéraux</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/reference/tokens.html#literals">littéral</a> représente la valeur d&#8217;un type</p>
</li>
<li>
<p>Quelques littéraux</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>'C'</code>
</td>
<td class="hdlist2">
<p>Caractère Unicode (<code>b&#8217;C'</code> pour un caractère ASCII)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>"chaîne"</code>
</td>
<td class="hdlist2">
<p>Chaîne de caractères Unicode (<code>b"chaîne"</code> pour une chaîne ASCII)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>12345</code>
</td>
<td class="hdlist2">
<p>Entier (<code>0xFF</code> en hexa, <code>0o77</code> en octal, <code>0b1111</code> en binaire)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>123.0E+77</code>
</td>
<td class="hdlist2">
<p>Nombre à virgule flottante</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Le caractère <code>_</code> peut être utilisé pour rendre les nombres plus lisibles</p>
</li>
<li>
<p>Un suffixe de type sur un nombre permet de préciser le type souhaité (<code>123u64</code>, <code>12E+99_f64</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_variables"><a class="anchor" href="#_variables"></a><a class="link" href="#_variables">1.3.12. Variables</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les variables en Rust sont par défaut immuables</p>
<div class="ulist">
<ul>
<li>
<p>quand une valeur est attachée à une variable, elle ne peut plus être modifiée</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le mot-clé <code>let</code> permet de déclarer une variable</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x = 5;</code></pre>
</div>
</div>
</li>
<li>
<p>Une variable peut être rendue modifiable avec le mot-clé <code>mut</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut x = 5;</code></pre>
</div>
</div>
</li>
<li>
<p>Le nom d&#8217;une variable peut être réutilisé (<a href="https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#shadowing"><em>Shadowing</em></a>)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x = 5;
let x = x * 2;</code></pre>
</div>
</div>
</li>
<li>
<p>Chaque variable possède un type qui est inféré la plupart du temps</p>
</li>
<li>
<p>Le type d&#8217;une variable peut aussi être précisé</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x: u32 = 5;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/01_variables">rustlings</a>, <a href="https://practice.course.rs//variables.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/variable_bindings.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_constantes"><a class="anchor" href="#_constantes"></a><a class="link" href="#_constantes">1.3.13. Constantes</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <a href="https://doc.rust-lang.org/reference/items/constant-items.html">constante</a> est introduite par le mot-clé <code>const</code> et doit être annotée par son type</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">const MAX_POINTS: u32 = 100_000;</code></pre>
</div>
</div>
</li>
<li>
<p>Une constante peut être déclarée dans n&#8217;importe quelle portée et doit être initialisée par une expression constante</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://doc.rust-lang.org/stable/rust-by-example/custom_types/constants.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_référence"><a class="anchor" href="#_référence"></a><a class="link" href="#_référence">1.3.14. Référence</a></h4>
<div class="ulist">
<ul>
<li>
<p>En Rust, toute valeur <em>appartient</em> à une variable (<a href="https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html"><em>ownership</em></a>)</p>
<div class="ulist">
<ul>
<li>
<p>à un instant donné, il ne peut y avoir qu&#8217;un unique propriétaire</p>
</li>
<li>
<p>quand le propriétaire sort de sa portée, la valeur est détruite</p>
</li>
</ul>
</div>
</li>
<li>
<p>Il est possible d'<em>emprunter</em> (<em>borrow</em>) la valeur d&#8217;une variable avec une référence (<code>&amp;</code>)</p>
<div class="ulist">
<ul>
<li>
<p>la propriété n&#8217;est alors pas transférée</p>
</li>
<li>
<p>pour pouvoir modifier une valeur par l&#8217;intermédiaire d&#8217;une référence, il faut que cette dernière soit modifiable (<code>&amp;mut</code>)</p>
</li>
<li>
<p>quand il existe une référence mutable pour une valeur, aucune autre référence ne peut pointer sur la valeur</p>
</li>
</ul>
</div>
</li>
<li>
<p>Pour déréférencer une référence, on utilise l&#8217;opérateur <code>*</code></p>
<div class="ulist">
<ul>
<li>
<p>la plupart du temps, le déréférencement se fait implicitement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Voir l&#8217;exemple sur les chaînes de caractères</p>
</li>
<li>
<p>Expérimentez (<a href="https://practice.course.rs//ownership/borrowing.html">Rust By Practice</a>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_slice"><a class="anchor" href="#_slice"></a><a class="link" href="#_slice">1.3.15. Slice</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/book/ch04-03-slices.html"><em>slice</em></a> (<code>[T]</code>) est un type primitif permettant de référencer une portion d&#8217;une séquence contiguëe d&#8217;éléments</p>
<div class="ulist">
<ul>
<li>
<p>c&#8217;est une vue sur un bloc de mémoire représentée par un pointeur et une taille</p>
</li>
<li>
<p>cf. le type primitif <a href="https://doc.rust-lang.org/std/primitive.slice.html">slice</a></p>
</li>
<li>
<p>cf. le module <a href="https://doc.rust-lang.org/std/slice/index.html"><code>std::slice</code></a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Un slice est une sorte de référence (donc n&#8217;est pas propriétaire)</p>
</li>
<li>
<p>Un slice peut être immuable (<code>&amp;[T]</code>) ou modifiable (<code>&amp;mut [T]</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Voir l&#8217;exemple sur les chaînes de caractères</p>
</li>
<li>
<p>Expérimentez (<a href="https://practice.course.rs//compound-types/slice.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives/array.html">Rust by Example</a>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointers"><a class="anchor" href="#_smart_pointers"></a><a class="link" href="#_smart_pointers">1.3.16. <em>Smart pointers</em></a></h4>
<div class="hdlist">
<div class="title">En plus des références, la bibliothèque standard propose différents types de <em>smart pointers</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Smart_pointer"><i class="fa fa-wikipedia-w"></i></a></span></sup></div>
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/boxed/index.html"><code>Box&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour allouer des valeurs sur le tas</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/rc/index.html"><code>Rc&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>un type de comptage de références pour gérer les propriétaires multiples</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/index.html"><code>Ref&lt;T&gt;</code>, <code>RefMut&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>accédé par <code>RefCell&lt;T&gt;</code>, un type pour gérer les emprunts lors de l&#8217;exécution au lieu de la compilation</p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://doc.rust-lang.org/stable/rust-by-example/std/box.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_chaînes_de_caractères"><a class="anchor" href="#_chaînes_de_caractères"></a><a class="link" href="#_chaînes_de_caractères">1.3.17. Chaînes de caractères</a></h4>
<div class="sect4">
<h5 id="_type_primitif_str"><a class="anchor" href="#_type_primitif_str"></a><a class="link" href="#_type_primitif_str">Type primitif <a href="https://doc.rust-lang.org/1.54.0/std/primitive.str.html"><code>str</code></a></a></h5>
<div class="ulist">
<ul>
<li>
<p>Le type primitif <a href="https://doc.rust-lang.org/1.54.0/std/primitive.str.html"><code>str</code></a> est un slice de type <code>[u8]</code> (séquence d&#8217;octet)</p>
<div class="ulist">
<ul>
<li>
<p>la plupart des fonctions suppose qu&#8217;une valeur de type <code>str</code> contient une chaîne UTF-8</p>
</li>
</ul>
</div>
</li>
<li>
<p>Généralement manipulé sous la forme empruntée <code>&amp;str</code></p>
</li>
<li>
<p>Un littéral est de type <code>&amp;'static str</code></p>
</li>
<li>
<p>Le module <a href="https://doc.rust-lang.org/std/str/index.html">std::str</a> permet la manipulation des variables de ce type</p>
</li>
<li>
<p>Quelques opérations :
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.chars"><code>chars</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.contains"><code>contains</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.find"><code>find</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.get"><code>get</code></a>
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.is_empty"><code>is_empty</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.len"><code>len</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.replace"><code>replace</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.split"><code>split</code></a>,
<a href="https://doc.rust-lang.org/std/primitive.str.html#method.trim"><code>trim</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple"><a class="anchor" href="#_exemple"></a><a class="link" href="#_exemple">Exemple</a></h5>
<div class="listingblock">
<div class="title">src/intro/exemples/strings.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let hello = "Hello, world!"; <i class="conum" data-value="1"></i><b>(1)</b>
assert!(!hello.is_empty());
assert_eq!(13, hello.len());

assert_eq!("Hello", &amp;hello[0..5]); <i class="conum" data-value="2"></i><b>(2)</b>
assert_eq!(Some("world"), hello.get(7..12));

println!("{}", hello); <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>hello</code> est de type <code>&amp;'static str</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Extraction d&#8217;un sous-slice</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>La macro <code>println!</code> formate et affiche une chaîne sur la sortie standard</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_type_stdstringstring"><a class="anchor" href="#_type_stdstringstring"></a><a class="link" href="#_type_stdstringstring">Type <a href="https://doc.rust-lang.org/std/string/struct.String.html">std::string::String</a></a></h5>
<div class="ulist">
<ul>
<li>
<p>Le type <a href="https://doc.rust-lang.org/std/string/struct.String.html">std::string::String</a> est le type chaîne de caractères proposé par la bibliothèque standard</p>
</li>
<li>
<p>Une instance de ce type possède la propriété du contenu de la chaîne</p>
</li>
<li>
<p>Quelques opérations :
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.new"><code>new</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.with_capacity"><code>with_capacity</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#impl-From%3C%26str%3E"><code>from</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.capacity"><code>capacity</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.clear"><code>clear</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.insert"><code>insert</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.is_empty"><code>is_empty</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.len"><code>len</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#method.push_str"><code>push_str</code></a>,
<a href="https://doc.rust-lang.org/std/string/struct.String.html#impl-Add%3C%26str%3E"><code>+</code></a> (concaténation),
<a href="https://doc.rust-lang.org/std/macro.format.html"><code>format!</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_2"><a class="anchor" href="#_exemple_2"></a><a class="link" href="#_exemple_2">Exemple</a></h5>
<div class="listingblock">
<div class="title">src/intro/exemples/strings.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let hello = "Hello".to_string(); <i class="conum" data-value="1"></i><b>(1)</b>
assert!(!hello.is_empty());
assert_eq!(5, hello.len());

let mut world = String::from("world");
assert_eq!(5, world.len());

let msg = hello + &amp;world;  <i class="conum" data-value="2"></i><b>(2)</b>
assert_eq!("Helloworld", msg);

world.insert_str(0, "Hello");
assert_eq!("Helloworld", world);

world.insert_str(5, ", ");
assert_eq!("Hello, world", world);

world.push_str(" !");
assert_eq!("Hello, world !", world);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>hello</code> et <code>world</code> sont de type <code>String</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Concatène les deux variables (<code>hello</code> est déplacé, <code>world</code> est emprunté)</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/09_strings">rustlings</a>, <a href="https://practice.course.rs//compound-types/string.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/str.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_structures_de_contrôle"><a class="anchor" href="#_structures_de_contrôle"></a><a class="link" href="#_structures_de_contrôle">1.3.18. Structures de contrôle</a></h4>
<div class="sect4">
<h5 id="_conditionnelle"><a class="anchor" href="#_conditionnelle"></a><a class="link" href="#_conditionnelle">Conditionnelle</a></h5>
<div class="sect5">
<h6 id="_expression_if"><a class="anchor" href="#_expression_if"></a><a class="link" href="#_expression_if">Expression <a href="https://doc.rust-lang.org/reference/expressions/if-expr.html"><code>if</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let celsius = true; // false -&gt; Fahrenheit

let freeze_temp = if celsius { 0 } else { 32 }; <i class="conum" data-value="1"></i><b>(1)</b>
assert_eq!(0, freeze_temp);

let temperature = 12;
assert!(temperature &gt; freeze_temp);

if temperature &lt; freeze_temp { <i class="conum" data-value="2"></i><b>(2)</b>
    println!("Freezing");
} else {
    println!("Not freezing");
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>if</code> est une expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>if</code> peut être utilisée comme une instruction</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_expression_match"><a class="anchor" href="#_expression_match"></a><a class="link" href="#_expression_match">Expression <a href="https://doc.rust-lang.org/reference/expressions/match-expr.html"><code>match</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let message = match temperature {
    -20 ..= -1 =&gt; "Froid", <i class="conum" data-value="1"></i><b>(1)</b>
    0 =&gt; "Limite", <i class="conum" data-value="2"></i><b>(2)</b>
    1 ..= 10 =&gt; "Frais",
    11 ..= 25 =&gt; "Idéal",
    _ =&gt; "Insupportable", <i class="conum" data-value="3"></i><b>(3)</b>
};
assert_eq!("Idéal", message);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/reference/expressions/range-expr.html">Intervalle</a> [-20, -1]</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La valeur 0</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Toutes les autres valeurs</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_boucles"><a class="anchor" href="#_boucles"></a><a class="link" href="#_boucles">Boucles</a></h5>
<div class="sect5">
<h6 id="_expression_loop"><a class="anchor" href="#_expression_loop"></a><a class="link" href="#_expression_loop">Expression <a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#infinite-loops"><code>loop</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut counter = 0;
let result = loop { <i class="conum" data-value="1"></i><b>(1)</b>
    counter += 1;
    if counter == 10 {
        break counter * 2; <i class="conum" data-value="2"></i><b>(2)</b>
    }
};
assert_eq!(20, result);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>la boucle se poursuit tant que le mot-clé <code>break</code> n&#8217;est pas utilisé</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>une expression <code>loop</code> terminée par <code>break</code> accepte une valeur de retour</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_expression_while"><a class="anchor" href="#_expression_while"></a><a class="link" href="#_expression_while">Expression <a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#predicate-loops"><code>while</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut number = 5;
while number != 0 { <i class="conum" data-value="1"></i><b>(1)</b>
    println!("{}", number);
    number -= 1;
}
assert_eq!(0, number);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>la boucle se poursuit tant que la condition est vraie</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="_expression_for"><a class="anchor" href="#_expression_for"></a><a class="link" href="#_expression_for">Expression <a href="https://doc.rust-lang.org/reference/expressions/loop-expr.html#iterator-loops"><code>for</code></a></a></h6>
<div class="listingblock">
<div class="title">src/intro/exemples/control.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let elements = [10, 20, 30, 40, 50];

for element in elements.iter() { <i class="conum" data-value="1"></i><b>(1)</b>
    println!("the value is: {}", element);
}

for number in (1..4).rev() { <i class="conum" data-value="2"></i><b>(2)</b>
    println!("{}!", number);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>for</code> permet d&#8217;itérer sur les éléments d&#8217;une collection</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>en utilisant le type <a href="https://doc.rust-lang.org/std/ops/struct.Range.html"><code>Range</code></a>, on peut manipuler des indices</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/03_if">rustlings</a>, <a href="https://practice.course.rs//flow-control.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fonction"><a class="anchor" href="#_fonction"></a><a class="link" href="#_fonction">1.3.19. Fonction</a></h4>
<div class="ulist">
<ul>
<li>
<p>La définition d&#8217;une <a href="https://doc.rust-lang.org/book/ch03-03-how-functions-work.html">fonction</a> est introduite par le mot-clé <code>fn</code></p>
</li>
<li>
<p>Par convention, le nom de la fonction est écrit en <em>snake case</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Snake_case"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>Les paramètres sont entre parenthèses et leurs types doivent être précisés</p>
</li>
<li>
<p>Le corps de la fonction est entre accolades <code>{ }</code></p>
<div class="listingblock">
<div class="title">src/intro/exemples/function.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn another_function(x: i32) {
    println!("The value of x is: {}", x);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Une fonction retourne la valeur de la dernière expression ou l&#8217;argument de <code>return</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn five() -&gt; i32 { <i class="conum" data-value="1"></i><b>(1)</b>
    5
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>l&#8217;annotation de type après <code>&#8594;</code> précise le type de retour
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
pour pouvoir être retournée, la dernière ligne d&#8217;une fonction <strong>doit être une expression</strong> (pas de <code>;</code>). Une instruction (terminée par un <code>;</code>) provoquerait une erreur de compilation.
</td>
</tr>
</table>
</div></td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/02_functions">rustlings</a>, <a href="https://practice.course.rs//basic-types/functions.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/fn.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_système_de_modules"><a class="anchor" href="#_système_de_modules"></a><a class="link" href="#_système_de_modules">1.3.20. Système de modules</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust supporte différents moyens pour organiser un projet</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Package
</td>
<td class="hdlist2">
<p>permet de construire, tester et partager des crates avec Cargo</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Crate
</td>
<td class="hdlist2">
<p>est un arbre de modules produisant une bibliothèque ou un exécutable</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Module
</td>
<td class="hdlist2">
<p>permet de contrôler l&#8217;organisation, l&#8217;encapsulation et la portée des <em>paths</em> (avec <code>use</code>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Path
</td>
<td class="hdlist2">
<p>est un moyen de nommer un item (fonction, module, …)</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Le mot-clé <code>use</code> importe un <em>path</em> dans la portée courante</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use std::fmt::Result;
use std::io::Result as IoResult;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Expérimentez (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/10_modules">rustlings</a>, <a href="https://practice.course.rs//crate-module/intro.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/mod.html">Rust by Example</a>)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_bibliothèques"><a class="anchor" href="#_bibliothèques"></a><a class="link" href="#_bibliothèques">1.3.21. Bibliothèques</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust est distribué avec une riche <a href="https://doc.rust-lang.org/std/index.html">bibliothèque standard</a></p>
<div class="ulist">
<ul>
<li>
<p>accessible par le <em>path</em> <code>std</code></p>
</li>
<li>
<p>le module <a href="https://doc.rust-lang.org/std/prelude/index.html"><code>std::prelude</code></a> est automatiquement importé dans chaque programme</p>
</li>
<li>
<p>contient entre autre des types importants comme <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> et <a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>Option&lt;T&gt;</code></a>, des <a href="https://doc.rust-lang.org/std/index.html#primitives">opérations</a> sur les types primitifs, des <a href="https://doc.rust-lang.org/std/index.html#macros">macros</a> et des abstractions pour les <a href="https://doc.rust-lang.org/std/io/index.html">I/O</a> et le <a href="https://doc.rust-lang.org/std/thread/index.html">multithreading</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Bibliothèques externes avec Cargo et <a href="https://crates.io/">crates.io</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_quelques_types_et_modules_importants"><a class="anchor" href="#_quelques_types_et_modules_importants"></a><a class="link" href="#_quelques_types_et_modules_importants">1.3.22. Quelques types et modules importants</a></h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/ops/struct.Range.html"><code>Range</code></a>
</td>
<td class="hdlist2">
<p>représente un intervalle (littéral <code>start..end</code>) (<a href="https://doc.rust-lang.org/stable/rust-by-example/flow_control/for.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/primitive.tuple.html"><code>Tuple</code></a>
</td>
<td class="hdlist2">
<p>une séquence finie et hétérogène d&#8217;éléments (littéral <code>("hello", 5, 'c')</code>) (<a href="https://practice.course.rs//compound-types/tuple.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives/tuples.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/1.54.0/std/primitive.array.html"><code>Tableau</code></a>
</td>
<td class="hdlist2">
<p>un tableau de taille fixe d&#8217;éléments de même type (littéral <code>[x, y, z]</code> ou <code>[x; N]</code>) (<a href="https://practice.course.rs//compound-types/array.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/primitives/array.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>un tableau de taille variable (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/05_vecs">rustlings</a>, <a href="https://practice.course.rs//collections/vector.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/vec.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/result/index.html"><code>Result&lt;T, E&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour retourner et propager une erreur (<a href="https://practice.course.rs//result-panic/result.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/result.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/option/index.html"><code>Option&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour représenter une valeur optionnel (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/12_options">rustlings</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/std/option.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/collections/index.html">std::collections</a>
</td>
<td class="hdlist2">
<p>manipulation de collections</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/fmt/index.html">std::fmt</a>
</td>
<td class="hdlist2">
<p>formatage de chaînes de caractères (<a href="https://practice.course.rs//formatted-output/formatting.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/hello/print.html">Rust by Example</a>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/io/index.html">std::io</a>
</td>
<td class="hdlist2">
<p>gestion des I/O (<a href="https://doc.rust-lang.org/stable/rust-by-example/std_misc/file.html">Rust by Example</a>)</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_références_2"><a class="anchor" href="#_références_2"></a><a class="link" href="#_références_2">1.3.23. Références</a></h4>
<div class="sect4">
<h5 id="_documentation_officielle"><a class="anchor" href="#_documentation_officielle"></a><a class="link" href="#_documentation_officielle">Documentation officielle</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.rust-lang.org/fr/">Site officiel</a></p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/book/">The Rust Programming Language</a>, <em>Steve Klabnik and Carol Nichols</em></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://rust-book.cs.brown.edu/">version avec quizz</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://doc.rust-lang.org/std/index.html">Documentation</a> de la bibliothèque standard</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/reference/index.html">Référence</a> du langage</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/nomicon/intro.html">The Rustonomicon</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_autres_documents"><a class="anchor" href="#_autres_documents"></a><a class="link" href="#_autres_documents">Autres documents</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://google.github.io/comprehensive-rust/">Comprehensive Rust</a>, Google</p>
</li>
<li>
<p><a href="https://stevedonovan.github.io/rust-gentle-intro/">A Gentle Introduction To Rust</a>, <em>Steve Donovan</em></p>
</li>
<li>
<p><a href="https://blog.guillaume-gomez.fr/Rust/">Tutoriel Rust</a>, <em>Guillaume Gomez</em></p>
</li>
<li>
<p><a href="https://www.lurklurk.org/effective-rust/title-page.html">Effective Rust</a>, <em>David Drysdale</em>, 2024</p>
</li>
<li>
<p><a href="https://cliffle.com/p/dangerust/">Learn Rust the Dangerous Way</a>, <em>Cliff L. Biffle</em>, 2024</p>
</li>
<li>
<p><a href="https://cheats.rs/">Rust Language Cheat Sheet</a>, <em>Ralf Biedert</em></p>
</li>
<li>
<p><a href="https://serokell.io/blog/learn-rust">17 Resources to Help You Learn Rust in 2022</a>, <em>Gints Dreimanis</em>, 2022</p>
</li>
<li>
<p><a href="https://grasland.pages.in2p3.fr/rust-cpp-intro/">Rust vu du C++</a>, <em>Hadrien Grasland</em>, 2023</p>
</li>
<li>
<p><a href="https://blog.jetbrains.com/fr/rust/2024/11/22/comment-se-former-a-rust-en-2024-un-guide-complet-pour-aider-les-debutants-a-maitriser-la-programmation-rust/">Comment se former à Rust en 2024</a>, <em>JetBrains</em>, 2024</p>
</li>
<li>
<p><a href="https://discord.com/blog/why-discord-is-switching-from-go-to-rust">Pourquoi Discord passe de Go à Rust</a>, <em>Jesse Howarth</em>, 2020</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_apprendre_en_codant"><a class="anchor" href="#_apprendre_en_codant"></a><a class="link" href="#_apprendre_en_codant">Apprendre en codant</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://play.rust-lang.org/">Playground</a> (coder dans le navigateur)</p>
</li>
<li>
<p><a href="https://github.com/rust-lang/rustlings/">rustlings</a> (ensemble d&#8217;exercices pour apprendre le langage)</p>
</li>
<li>
<p><a href="https://doc.rust-lang.org/stable/rust-by-example/">Rust by Example</a> (exemples exécutables dans le navigateur)</p>
</li>
<li>
<p><a href="https://practice.course.rs//why-exercise.html">Rust by practice</a></p>
</li>
<li>
<p><a href="https://rust-unofficial.github.io/too-many-lists/">Learn Rust With Entirely Too Many Linked Lists</a></p>
</li>
<li>
<p><a href="https://jrdngr.github.io/pngme_book/">PNGme: An Intermediate Rust Project</a>, 2024</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_sujets_spécifiques"><a class="anchor" href="#_sujets_spécifiques"></a><a class="link" href="#_sujets_spécifiques">Sujets spécifiques</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://corrode.dev/blog/prototyping/">Prototyping in Rust</a>, <em>Matthias Endler</em>, 2025</p>
</li>
<li>
<p><a href="https://www.howtocodeit.com/articles/ultimate-guide-rust-newtypes#what-are-newtype-wrappers-in-rust">The ultimate guide to Rust newtypes</a>, <em>How To Code It</em>, 2023</p>
</li>
<li>
<p><a href="https://www.howtocodeit.com/articles/the-definitive-guide-to-rust-error-handling">The definitive guide to error handling in Rust</a>, <em>How To Code It</em>, 2024</p>
</li>
<li>
<p><a href="https://sabrinajewson.org/blog/errors">Modular Errors in Rust</a>, <em>Sabrina Jewson</em>, 2023</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_outils_de_développement"><a class="anchor" href="#_outils_de_développement"></a><a class="link" href="#_outils_de_développement">2. Outils de développement</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_au_delà_de_léditeur_et_du_compilateur"><a class="anchor" href="#_au_delà_de_léditeur_et_du_compilateur"></a><a class="link" href="#_au_delà_de_léditeur_et_du_compilateur">2.1. Au delà de l&#8217;éditeur et du compilateur</a></h3>
<div class="ulist">
<ul>
<li>
<p>Les outils à la disposition d&#8217;un développeur de logiciels ne se limite pas à un éditeur de texte et un compilateur/interpréteur</p>
</li>
<li>
<p>De nombreux outils existent pour assister le développeur dans ses multiples tâches:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Écrire du code et collaborer
</td>
<td class="hdlist2">
<p>éditeurs de texte, environnements de développement intégrés, gestion de versions</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exécution contrôlée d&#8217;un programme
</td>
<td class="hdlist2">
<p>débogage, tests et profilage</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Qualité du code et documentation
</td>
<td class="hdlist2">
<p>styles de codage, génération de documentation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Construction d’un projet
</td>
<td class="hdlist2">
<p>automatisation de la gestion de la compilation et des dépendances</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Livraison et déploiement
</td>
<td class="hdlist2">
<p>automatisations et livraison continue</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_au_niveau_du_système_dexploitation"><a class="anchor" href="#_au_niveau_du_système_dexploitation"></a><a class="link" href="#_au_niveau_du_système_dexploitation">2.2. Au niveau du système d&#8217;exploitation</a></h3>
<div class="sect3">
<h4 id="_introduction_2"><a class="anchor" href="#_introduction_2"></a><a class="link" href="#_introduction_2">2.2.1. Introduction</a></h4>
<div class="ulist">
<ul>
<li>
<p>De nombreux outils généralistes peuvent être d&#8217;une grande aide pour le développeur</p>
</li>
<li>
<p>Certains sont directement intégrés à l&#8217;OS</p>
</li>
<li>
<p>D&#8217;autres peuvent y être avantageusement ajoutés</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shells"><a class="anchor" href="#_shells"></a><a class="link" href="#_shells">2.2.2. Shells</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>Shell</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interface_syst%C3%A8me"><i class="fa fa-wikipedia-w"></i></a></span></sup> (ou <em>interpréteur de commandes</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interpr%C3%A9teur_de_commandes"><i class="fa fa-wikipedia-w"></i></a></span></sup>) est l&#8217;interface en ligne de commande<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Interface_en_ligne_de_commande"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Command Line Interface</em> ou <em>CLI</em>) permettant d&#8217;interagir avec le système d&#8217;exploitation</p>
</li>
<li>
<p>C&#8217;est un outil important que doit maîtriser un développeur</p>
</li>
<li>
<p>À l&#8217;aide du langage de script qu&#8217;il intègre, le shell fournit un puissant moyen pour l&#8217;automatisation de tâches récurrentes</p>
</li>
<li>
<p>Il peut être largement personnalisé et adapté grâce aux fichiers d&#8217;initialisation (<em>dot files</em> sous Unix)</p>
</li>
</ul>
</div>
<div class="hdlist">
<div class="title">Quelques shells</div>
<table>
<tr>
<td class="hdlist1">
Unix/Linux/Mac OS
</td>
<td class="hdlist2">
<p><a href="http://www.gnu.org/software/bash/">bash</a> <sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Bourne-Again_shell"><i class="fa fa-wikipedia-w"></i></a></span></sup>, <a href="https://www.zsh.or/">zsh</a> <sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Z_Shell"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Windows
</td>
<td class="hdlist2">
<p><a href="https://docs.microsoft.com/en-us/powershell/">PowerShell</a> <sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Windows_PowerShell"><i class="fa fa-wikipedia-w"></i></a></span></sup>, cmd<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Cmd"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Shell
</td>
<td class="hdlist2">
<p><a href="https://github.com/alebcay/awesome-shell">Awesome Shell</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
bash
</td>
<td class="hdlist2">
<p><a href="https://opensource.com/article/19/12/bash-resources">10 resources to become a better Bash user</a>,
<a href="https://github.com/awesome-lists/awesome-bash">Awesome Bash</a>,
<a href="https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html">Bash Guide for Beginners</a>,
<a href="https://tldp.org/LDP/abs/html/">Advanced Bash-Scripting Guide</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
zsh
</td>
<td class="hdlist2">
<p><a href="https://ohmyz.sh/">Oh My Zsh</a>,
<a href="https://github.com/unixorn/awesome-zsh-plugins">awesome-zsh-plugins</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Dotfiles
</td>
<td class="hdlist2">
<p><a href="https://medium.com/@webprolific/getting-started-with-dotfiles-43c3602fd789">Getting Started With Dotfiles</a>,
<a href="https://github.com/webpro/awesome-dotfiles">Awesome dotfiles</a>,
<a href="https://dotfiles.github.io/">Unofficial guide to dotfiles on GitHub</a>,
<a href="https://wiki.archlinux.org/index.php/Dotfiles">Dotfiles</a> (ArchWiki)</p>
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_outils_en_ligne_de_commande"><a class="anchor" href="#_outils_en_ligne_de_commande"></a><a class="link" href="#_outils_en_ligne_de_commande">2.2.3. Outils en ligne de commande</a></h4>
<div class="sect4">
<h5 id="_manipulation_de_fichiers"><a class="anchor" href="#_manipulation_de_fichiers"></a><a class="link" href="#_manipulation_de_fichiers">Manipulation de fichiers</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://the.exa.website/">exa</a> / ls<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Ls"><i class="fa fa-wikipedia-w"></i></a></span></sup> / tree<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Tree_(command)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>bat<sup><span class="icon"><a class="image" href="https://github.com/sharkdp/bat"><i class="fa fa-github"></i></a></span></sup> / cat<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Cat_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>fzf<sup><span class="icon"><a class="image" href="https://github.com/junegunn/fzf"><i class="fa fa-github"></i></a></span></sup></p>
</li>
<li>
<p>fd<sup><span class="icon"><a class="image" href="https://github.com/sharkdp/fd"><i class="fa fa-github"></i></a></span></sup> / <a href="https://www.gnu.org/software/findutils/">find</a></p>
</li>
<li>
<p>rg<sup><span class="icon"><a class="image" href="https://github.com/BurntSushi/ripgrep"><i class="fa fa-github"></i></a></span></sup> / skim<sup><span class="icon"><a class="image" href="https://github.com/lotabout/skim"><i class="fa fa-github"></i></a></span></sup> / <a href="https://www.gnu.org/software/grep/">grep</a></p>
</li>
<li>
<p>dust<sup><span class="icon"><a class="image" href="https://github.com/bootandy/dust"><i class="fa fa-github"></i></a></span></sup> / <a href="https://dev.yorhel.nl/ncdu">ncdu</a> / du<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Du_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>duf<sup><span class="icon"><a class="image" href="https://github.com/muesli/duf"><i class="fa fa-github"></i></a></span></sup> / df<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Df_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>sd<sup><span class="icon"><a class="image" href="https://github.com/chmln/sd"><i class="fa fa-github"></i></a></span></sup> / sed<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Stream_Editor"><i class="fa fa-wikipedia-w"></i></a></span></sup> / awk<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Awk"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>tokei<sup><span class="icon"><a class="image" href="https://github.com/XAMPPRocky/tokei"><i class="fa fa-github"></i></a></span></sup></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_gestion_de_processusmémoire"><a class="anchor" href="#_gestion_de_processusmémoire"></a><a class="link" href="#_gestion_de_processusmémoire">Gestion de processus/mémoire</a></h5>
<div class="ulist">
<ul>
<li>
<p>hyperfine<sup><span class="icon"><a class="image" href="https://github.com/sharkdp/hyperfine"><i class="fa fa-github"></i></a></span></sup> / time<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Time_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>procs<sup><span class="icon"><a class="image" href="https://github.com/dalance/procs"><i class="fa fa-github"></i></a></span></sup> / ps<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Ps_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p><a href="https://htop.dev/">htop</a> / bottom<sup><span class="icon"><a class="image" href="https://github.com/ClementTsang/bottom"><i class="fa fa-github"></i></a></span></sup> / top<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Top_(software)"><i class="fa fa-wikipedia-w"></i></a></span></sup> / free<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Free_(Unix)"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_outils_réseaux"><a class="anchor" href="#_outils_réseaux"></a><a class="link" href="#_outils_réseaux">Outils réseaux</a></h5>
<div class="ulist">
<ul>
<li>
<p>ssh<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Secure_Shell"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
<li>
<p>tmux<sup><span class="icon"><a class="image" href="https://github.com/tmux/tmux/wiki"><i class="fa fa-github"></i></a></span></sup> / tmuxinator<sup><span class="icon"><a class="image" href="https://github.com/tmuxinator/tmuxinator"><i class="fa fa-github"></i></a></span></sup> / Oh my tmux!<sup><span class="icon"><a class="image" href="https://github.com/gpakosz/.tmux"><i class="fa fa-github"></i></a></span></sup> / <a href="https://www.byobu.org/">byobu</a> / <a href="https://www.gnu.org/software/screen/">screen</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_références_3"><a class="anchor" href="#_références_3"></a><a class="link" href="#_références_3">2.2.4. Références</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://zaiste.net/posts/shell-commands-rust/">Rewritten in Rust: Modern Alternatives of Command-Line Tools</a></p>
</li>
<li>
<p><a href="https://www.wezm.net/technical/2019/10/useful-command-line-tools/">An Illustrated Guide to Some Useful Command Line Tools</a></p>
</li>
<li>
<p><a href="https://bios-blog.com/handy-shell-tools/">Handy Shell Tools</a></p>
</li>
<li>
<p><a href="https://ivergara.github.io/Supercharging-shell.html">Supercharging the shell</a></p>
</li>
<li>
<p><a href="https://missing.csail.mit.edu/2020/shell-tools/">Shell Tools and Scripting</a></p>
</li>
<li>
<p><a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html">Command-line Tools can be 235x Faster than your Hadoop Cluster</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_écrire_du_code_et_collaborer"><a class="anchor" href="#_écrire_du_code_et_collaborer"></a><a class="link" href="#_écrire_du_code_et_collaborer">2.3. Écrire du code et collaborer</a></h3>
<div class="sect3">
<h4 id="_éditeur_de_texte"><a class="anchor" href="#_éditeur_de_texte"></a><a class="link" href="#_éditeur_de_texte">2.3.1. Éditeur de texte</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>éditeur de texte</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Text_editor"><i class="fa fa-wikipedia-w"></i></a></span></sup> permet l&#8217;édition de fichiers en texte brut (par opposition aux traitements de texte).</p>
</li>
<li>
<p>C&#8217;est un outil indispensable pour rédiger le code source d&#8217;un programme.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Fonctionnalités d&#8217;un éditeur de texte pour développer</div>
<ul>
<li>
<p>Support des jeux de caractères étendus<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res"><i class="fa fa-wikipedia-w"></i></a></span></sup> (UTF-8<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/UTF-8"><i class="fa fa-wikipedia-w"></i></a></span></sup>, Latin-1<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/ISO/CEI_8859-1"><i class="fa fa-wikipedia-w"></i></a></span></sup>, …)</p>
</li>
<li>
<p>Défaire/refaire, couper/copier/coller, rechercher/remplacer, …</p>
</li>
<li>
<p>Support des expressions rationnelles<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Expression_r%C3%A9guli%C3%A8re"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>regex</em>)</p>
</li>
<li>
<p>Aides à la saisie (coloration syntaxique, indentation automatique, reformatage, …)</p>
</li>
<li>
<p>Pliage (<em>folding</em>)/dépliage (<em>unfolding</em>) de texte</p>
</li>
<li>
<p><em>Snippet</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Snippet_(programming)"><i class="fa fa-wikipedia-w"></i></a></span></sup> (insertion de texte type)</p>
</li>
<li>
<p>Index des fonctions (<em>ctags</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Ctags"><i class="fa fa-wikipedia-w"></i></a></span></sup>, …)</p>
</li>
<li>
<p>Appel de programmes externes (compilateur, …)</p>
</li>
<li>
<p>Support de projets (ensemble de fichiers avec une configuration)</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Quelques éditeurs de texte</div>
<ul>
<li>
<p><a href="https://code.visualstudio.com/">Visual Studio Code</a></p>
</li>
<li>
<p><a href="https://www.vim.org/">Vim</a>, <a href="http://en.wikipedia.org/wiki/Vi">Vi</a></p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/Emacs">Emacs</a></p>
</li>
<li>
<p><a href="http://notepad-plus.sourceforge.net">Notepad++</a></p>
</li>
<li>
<p><a href="https://www.sublimetext.com/">Sublime Text</a></p>
</li>
<li>
<p><a href="https://atom.io/">Atom</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_environnement_de_développement_intégré"><a class="anchor" href="#_environnement_de_développement_intégré"></a><a class="link" href="#_environnement_de_développement_intégré">2.3.2. Environnement de développement intégré</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>environnement de développement intégré</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Integrated_development_environment"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Integrated Development Environment</em> ou <em>IDE</em>) regroupe et intègre un ensemble d&#8217;outils de développement</p>
<div class="ulist">
<ul>
<li>
<p>éditeur de code source,</p>
</li>
<li>
<p>compilateur/interpréteur,</p>
</li>
<li>
<p>débogueur,</p>
</li>
<li>
<p>un navigateur de classes,</p>
</li>
<li>
<p>un ou plusieurs systèmes de gestion de versions</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Principales fonctionnalités d&#8217;un IDE</div>
<ul>
<li>
<p>Gestion de projets (fichiers, dépendances, configuration, …)</p>
</li>
<li>
<p>Auto-complétion de code</p>
</li>
<li>
<p>Navigation dans les classes</p>
</li>
<li>
<p><em>Refactoring</em></p>
</li>
<li>
<p>Débogage</p>
</li>
<li>
<p>Profiling</p>
</li>
<li>
<p>Gestion de versions</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Quelques IDE</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://marketplace.visualstudio.com/items?itemName=rust-lang.rust">Rust support for Visual Studio Code</a>,
<a href="https://plugins.jetbrains.com/plugin/8182-rust">Plugin</a> Rust pour IntelliJ,
<a href="https://www.rust-lang.org/tools">Rust tools</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.bluej.org/">BlueJ</a>,
<a href="https://www.jetbrains.com/idea/">IntelliJ IDEA</a>,
<a href="https://www.eclipse.org">Eclipse</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://pythonhosted.org/spyder/">Spyder</a>,
<a href="https://www.jetbrains.com/pycharm/">PyCharm</a>,
<a href="http://www.pydev.org/">PyDev</a>,
<a href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.python">Python pour VS Code</a>,
<a href="https://microsoft.github.io/PTVS/">Python Tools for Visual Studio</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_gestion_des_versions"><a class="anchor" href="#_gestion_des_versions"></a><a class="link" href="#_gestion_des_versions">2.3.3. Gestion des versions</a></h4>
<div class="ulist">
<ul>
<li>
<p>La <em>gestion de versions</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Version_control"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>version control</em>, <em>revision control</em>, <em>source control</em> ou <em>source code management (SCM)</em>) consiste à maintenir l&#8217;ensemble des versions d&#8217;un ou plusieurs documents</p>
</li>
<li>
<p>La gestion de versions concerne principalement le développement logiciel mais peut être utilisée pour tout document informatique</p>
</li>
<li>
<p>C&#8217;est une activité fastidieuse et source d&#8217;erreurs qui bénéficie d&#8217;une façon importante d&#8217;un support logiciel (<em>système de gestion de versions</em>, <em>version control system (VCS)</em>)</p>
</li>
<li>
<p>De nombreuses applications proposent ce genre de fonction (<em>Wiki</em>, <em>LibreOffice</em>, <em>Microsoft Word</em>, …)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_système_de_gestion_de_versions"><a class="anchor" href="#_système_de_gestion_de_versions"></a><a class="link" href="#_système_de_gestion_de_versions">Système de gestion de versions</a></h5>
<div class="ulist">
<div class="title">Un <em>système de gestion de versions</em> (VCS)</div>
<ul>
<li>
<p>Permet la gestion des versions successives d&#8217;un ensemble de documents</p>
<div class="ulist">
<ul>
<li>
<p>conserve toutes les versions successives dans un <em>référentiel</em> ou <em>dépôt</em> (<em>repository</em>)
·** permet de naviguer entre les versions</p>
</li>
</ul>
</div>
</li>
<li>
<p>Permet le travail collaboratif</p>
<div class="ulist">
<ul>
<li>
<p>chaque utilisateur travaille sur une copie locale</p>
</li>
<li>
<p>le système signale les conflits</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_périmètre_dutilisation_des_vcs"><a class="anchor" href="#_périmètre_dutilisation_des_vcs"></a><a class="link" href="#_périmètre_dutilisation_des_vcs">Périmètre d&#8217;utilisation des VCS</a></h5>
<div class="ulist">
<ul>
<li>
<p>Gestion d&#8217;un ensemble de fichiers textes</p>
<div class="ulist">
<ul>
<li>
<p>code source</p>
</li>
<li>
<p>pages html, xml, …</p>
</li>
<li>
<p>documents LaTeX</p>
</li>
</ul>
</div>
</li>
<li>
<p>Supportent l&#8217;organisation en hiérarchie de répertoires et les métadonnées (permissions, …)</p>
</li>
<li>
<p>Supportent également les fichiers binaires (moins adapté)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_modèles_pour_la_gestion_de_version"><a class="anchor" href="#_modèles_pour_la_gestion_de_version"></a><a class="link" href="#_modèles_pour_la_gestion_de_version">Modèles pour la gestion de version</a></h5>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Sans contrôle, la modification d&#8217;un même fichier par plusieurs personnes au même moment risque de générer des incohérences.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Approche par verrouillage (<em>locking</em>)</div>
<ul>
<li>
<p>un fichier doit être verrouillé avant une modification</p>
</li>
<li>
<p>une seule personne peut le modifier à un instant donné (approche <em>pessimiste</em>)</p>
</li>
<li>
<p>simple mais réduit considérablement la concurrence</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approche par fusion (<em>merging</em>)</div>
<ul>
<li>
<p>plusieurs personnes peuvent modifier un fichier en parallèle (approche <em>optimiste</em>)</p>
</li>
<li>
<p>le système s&#8217;occupe de fusionner les différentes modifications</p>
</li>
<li>
<p>certains cas ne peuvent pas être traités automatiquement (<em>conflits</em>)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_architecture_des_vcs"><a class="anchor" href="#_architecture_des_vcs"></a><a class="link" href="#_architecture_des_vcs">Architecture des VCS</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les premiers VCS ne supportaient qu&#8217;un mode local</p>
</li>
<li>
<p>La seconde génération fonctionnait selon un mode client/serveur (mode centralisé)</p>
<div class="ulist">
<ul>
<li>
<p>le référentiel est centralisé</p>
</li>
<li>
<p>tout doit être reporté sur ce référentiel</p>
</li>
<li>
<p>nécessite donc un accès au référentiel pour la plupart des opérations</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les nouveaux VCS (<em>Distributed VCS</em> ou <em>DVCS</em>) supportent un mode pair à pair (mode réparti)</p>
<div class="ulist">
<ul>
<li>
<p>chaque développeur possède son propre référentiel</p>
</li>
<li>
<p>un utilisateur peut récupérer une partie d&#8217;un référentiel accessible (<em>pull</em>)</p>
</li>
<li>
<p>un utilisateur peut publier une partie de son référentiel dans un autre (<em>push</em>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_quelques_outils"><a class="anchor" href="#_quelques_outils"></a><a class="link" href="#_quelques_outils">Quelques outils</a></h5>
<div class="paragraph">
<div class="title">Distribué</div>
<p><a href="http://git-scm.com/">Git</a>,
<a href="https://www.mercurial-scm.org/">Mercurial</a>,</p>
</div>
<div class="paragraph">
<div class="title">Client-serveur</div>
<p><a href="http://subversion.apache.org/">Subversion</a>,
<a href="http://www.nongnu.org/cvs/">CVS</a>,</p>
</div>
<div class="paragraph">
<div class="title">Mode local</div>
<p><a href="http://cssc.sourceforge.net/">SCCS</a>,
<a href="http://www.cs.purdue.edu/homes/trinkle/RCS/">RCS</a>,</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_forge_logicielle"><a class="anchor" href="#_forge_logicielle"></a><a class="link" href="#_forge_logicielle">2.3.4. Forge logicielle</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <em>forge logicielle</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Forge_(software)"><i class="fa fa-wikipedia-w"></i></a></span></sup> est un système de gestion de développement collaboratif.</p>
</li>
<li>
<p>Elle intègre un ensemble d&#8217;outils dans une interface web et permet d&#8217;héberger un projet informatique à l&#8217;aide d&#8217;un système de gestion de versions.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Outils intégrés</div>
<ul>
<li>
<p>un système de gestion de version</p>
</li>
<li>
<p>des outils de collaboration (fils de discussion, …)</p>
</li>
<li>
<p>du suivi de tickets (bogues, …)</p>
</li>
<li>
<p>un gestionnaire de documentation (wiki par exemple)</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Quelques forges</div>
<ul>
<li>
<p><a href="https://github.com/">GitHub</a></p>
</li>
<li>
<p><a href="https://bitbucket.org/">Bitbucket</a></p>
</li>
<li>
<p><a href="https://gitlab.com/">GitLab</a></p>
</li>
<li>
<p><a href="https://sourceforge.net/">SourceForge</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_débogage_tests_et_profilage"><a class="anchor" href="#_débogage_tests_et_profilage"></a><a class="link" href="#_débogage_tests_et_profilage">2.4. Débogage, tests et profilage</a></h3>
<div class="sect3">
<h4 id="_débogage"><a class="anchor" href="#_débogage"></a><a class="link" href="#_débogage">2.4.1. Débogage</a></h4>
<div class="sect4">
<h5 id="_bogue_débogage_et_débogueur"><a class="anchor" href="#_bogue_débogage_et_débogueur"></a><a class="link" href="#_bogue_débogage_et_débogueur">Bogue, débogage et débogueur</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un <em>bogue</em> (<em>bug</em>) est un défaut dans un programme qui l&#8217;empêche de fonctionner correctement</p>
</li>
<li>
<p>Le <em>débogage</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Debugging"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>debugging</em>) est une activité ayant pour objectif de localiser les bogues dans un programme</p>
</li>
<li>
<p>Le débogage est basé sur la <em>confirmation</em></p>
<div class="ulist">
<ul>
<li>
<p>c&#8217;est un processus destiné à confirmer les choses que l&#8217;on croit vrai jusqu&#8217;à en trouver une qui ne l&#8217;est pas</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un <em>débogueur</em> (<em>debugger</em>) est un outil fournissant une aide pour le débogage</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pourquoi_utiliser_un_débogueur"><a class="anchor" href="#_pourquoi_utiliser_un_débogueur"></a><a class="link" href="#_pourquoi_utiliser_un_débogueur">Pourquoi utiliser un débogueur ?</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Pour gagner du temps !</strong></p>
</li>
<li>
<p>Les alternatives sont moins efficaces (mais parfois utiles tout de même)</p>
<div class="ulist">
<ul>
<li>
<p>utiliser des affichages (<code>printf</code>, …)</p>
<div class="ulist">
<ul>
<li>
<p>perte de temps</p>
</li>
<li>
<p>beaucoup d&#8217;éditions/compilations pour ajouter/enlever les affichages</p>
</li>
<li>
<p>moins informatif</p>
</li>
</ul>
</div>
</li>
<li>
<p>utiliser une bibliothèque de journalisation<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Historique_(informatique)"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>logging</em>)</p>
<div class="ulist">
<ul>
<li>
<p>plus pratique que les affichages</p>
</li>
<li>
<p>moins informatif que le débogueur</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_fonctionnalités_dun_débogueur"><a class="anchor" href="#_fonctionnalités_dun_débogueur"></a><a class="link" href="#_fonctionnalités_dun_débogueur">Fonctionnalités d&#8217;un débogueur</a></h5>
<div class="ulist">
<ul>
<li>
<p>Exécution contrôlée du programme</p>
<div class="ulist">
<ul>
<li>
<p>pas à pas sommaire (sans entrer dans les fonctions)</p>
</li>
<li>
<p>pas à pas détaillé</p>
</li>
<li>
<p>retour en arrière (plus rare)</p>
</li>
</ul>
</div>
</li>
<li>
<p><em>Points d&#8217;arrêt</em> (<em>breakpoints</em>)</p>
<div class="ulist">
<ul>
<li>
<p>repère sur une instruction signalant au débogueur qu&#8217;il doit faire un pause dans l&#8217;exécution lorsqu&#8217;il arrive à cette instruction</p>
</li>
<li>
<p>peut être également associé à une condition</p>
</li>
<li>
<p>un <em>point d&#8217;observation</em> (<em>watchpoint</em>) stoppe le programme lorsque l&#8217;état d&#8217;une expression change</p>
</li>
<li>
<p>un <em>catchpoint</em> fait de même quand un événement se déclenche</p>
</li>
</ul>
</div>
</li>
<li>
<p>Visualisation de l&#8217;état du programme</p>
<div class="ulist">
<ul>
<li>
<p>variables, pile d&#8217;appel, …</p>
</li>
<li>
<p>certains débogueurs  permettent l&#8217;affichage de structure de données complexes</p>
</li>
</ul>
</div>
</li>
<li>
<p>Modification de l&#8217;état du programme</p>
</li>
<li>
<p>Débogage à distance</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_processus_de_débogage"><a class="anchor" href="#_processus_de_débogage"></a><a class="link" href="#_processus_de_débogage">Processus de débogage</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Tenter de reproduire le bogue</p>
</li>
<li>
<p>Simplifier les entrées du programme</p>
</li>
<li>
<p>Exécuter le programme sous le contrôle du débogueur</p>
</li>
<li>
<p>Se positionner à l&#8217;endroit de l&#8217;erreur signalée ou au milieu du programme (pose d&#8217;un breakpoint) si aucune erreur n&#8217;est signalée</p>
</li>
<li>
<p>Examiner le contexte pour confirmer que les variables possèdent les valeurs attendues</p>
</li>
<li>
<p>Déterminer la position suivante à étudier et retourner en 5</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Nécessite de compiler le programme avec les informations de débogage (option <code>-g</code> de <code>rustc</code>, <code>javac</code> ou de <code>gcc</code>)
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Quelques débogueurs</div>
<ul>
<li>
<p><a href="http://www.gnu.org/software/gdb/gdb.html">GDB</a>/ <a href="http://www.gnu.org/software/ddd/">DDD</a></p>
</li>
<li>
<p><a href="https://blog.logrocket.com/debugging-rust-apps-with-gdb/">rust-gdb</a></p>
</li>
<li>
<p><a href="https://docs.python.org/3/library/pdb.html">pdb</a>/ <a href="https://github.com/gotcha/ipdb">ipdb</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tests"><a class="anchor" href="#_tests"></a><a class="link" href="#_tests">2.4.2. Tests</a></h4>
<div class="sect4">
<h5 id="_définition_et_intérêt"><a class="anchor" href="#_définition_et_intérêt"></a><a class="link" href="#_définition_et_intérêt">Définition et intérêt</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les <em>tests</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Software_testing"><i class="fa fa-wikipedia-w"></i></a></span></sup> visent à mettre en évidence des défauts de l&#8217;élément testé</p>
</li>
<li>
<p>L&#8217;objectif final est bien sûr de réduire le nombre de bogues présents dans un programme</p>
</li>
<li>
<p>Un test est un ensemble de <em>cas à tester</em> (conditions initiales, entrées, observations attendues)</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Un test ne permet pas de prouver l&#8217;absence de bogue (≠ des méthodes formelles).</strong></p>
</div>
<div class="paragraph">
<p><em>Program testing can be a very effective way to show the presence of bugs, but it is hopelessly inadequate for showing their absence.</em> Edsger W. Dijkstra, « The Humble Programmer » (1972)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Il est impossible d&#8217;exécuter des tests exhaustifs dans la plupart des cas</p>
</li>
<li>
<p>Les tests sont toutefois une aide précieuse pour améliorer la qualité du logiciel</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_quelques_types_de_tests"><a class="anchor" href="#_quelques_types_de_tests"></a><a class="link" href="#_quelques_types_de_tests">Quelques types de tests</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un test <em>boite blanche</em> (<em>white box</em>) s&#8217;appuie sur une connaissance de la structure interne de l&#8217;élément à tester</p>
</li>
<li>
<p>Un test <em>boite noire</em> (<em>black box</em>) s&#8217;appuie sur les spécifications de l&#8217;élément</p>
</li>
<li>
<p>Un test de <em>non régression</em> vérifie que le système ne se dégrade pas lors de ses évolutions</p>
</li>
<li>
<p>Un test <em>fonctionnel</em> s&#8217;assure que les résultats attendus sont bien obtenus</p>
</li>
<li>
<p>Un test <em>non fonctionnel</em> analyse les propriétés non fonctionnelles d&#8217;un système</p>
<div class="ulist">
<ul>
<li>
<p>test <em>des performances</em> pour vérifier l&#8217;efficacité du système</p>
</li>
<li>
<p>test <em>de sécurité</em> pour s&#8217;assurer du respect des règles de confidentialité</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_granularité_de_tests"><a class="anchor" href="#_granularité_de_tests"></a><a class="link" href="#_granularité_de_tests">Granularité de tests</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Unitaire
</td>
<td class="hdlist2">
<p>Les tests unitaires vérifient la conformité des éléments de base d&#8217;un programme (fonctions, classes, …) et sont en général réalisés par le développeur.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Intégration
</td>
<td class="hdlist2">
<p>Les tests d&#8217;intégration vérifient la cohérence des différents modules et la bonne communication entre eux.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Système
</td>
<td class="hdlist2">
<p>Les tests systèmes concernent l&#8217;ensemble du projet et son intégration dans son environnement.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Recette
</td>
<td class="hdlist2">
<p>Les tests de recette (ou d&#8217;acceptation) confirment la conformité du système avec les besoins.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_intégration_au_processus_de_développement"><a class="anchor" href="#_intégration_au_processus_de_développement"></a><a class="link" href="#_intégration_au_processus_de_développement">Intégration au processus de développement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Généralement (cycle de développement en V par exemple), les tests sont réalisés par un groupe de testeurs après la réalisation des fonctionnalités</p>
</li>
<li>
<p>Une pratique encouragée par les méthodes Agiles et XP consiste à débuter le processus par les tests (<em>Développement dirigé par les tests</em>)</p>
</li>
</ul>
</div>
<div class="hdlist">
<div class="title">Quelques outils pour les tests</div>
<table>
<tr>
<td class="hdlist1">
Unitaires et d&#8217;intégration
</td>
<td class="hdlist2">
<p>cf. ci-dessous.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Fonctionnel<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Functional_testing"><i class="fa fa-wikipedia-w"></i></a></span></sup>
</td>
<td class="hdlist2">
<p><a href="http://fit.c2.com/">Fit</a>, <a href="http://fitnesse.org/">FitNesse</a>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Non fonctionnels<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Non-functional_testing"><i class="fa fa-wikipedia-w"></i></a></span></sup>
</td>
<td class="hdlist2">
<p><a href="http://jakarta.apache.org/jmeter/">Apache JMeter</a>, <a href="http://www.clarkware.com/software/JUnitPerf.html">JUnitPerf</a>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tests_unitaires"><a class="anchor" href="#_tests_unitaires"></a><a class="link" href="#_tests_unitaires">2.4.3. Tests unitaires</a></h4>
<div class="sect4">
<h5 id="_définition_et_objectifs"><a class="anchor" href="#_définition_et_objectifs"></a><a class="link" href="#_définition_et_objectifs">Définition et objectifs</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un <em>test unitaire</em> (<em>unit test</em>) vise à augmenter la confiance du programmeur dans des portions du code source</p>
</li>
<li>
<p>Une <em>unité</em> fait référence à la plus petite partie testable de l&#8217;application (fonction, méthode)</p>
</li>
<li>
<p>Le but des tests unitaires est d&#8217;isoler chaque partie du programme pour la tester indépendamment</p>
<div class="ulist">
<ul>
<li>
<p>isoler les différents éléments nécessite souvent d&#8217;avoir recours à du code de substitution (<em>stub</em>, <em>fake</em> ou <em>mock object</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ces tests peuvent être réalisés à la main (affichages et vérification visuel, débogueur) ou avec un framework spécialisé par exemple de type <code>xUnit</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Quelques frameworks de test unitaire (<span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Unit_testing"><i class="fa fa-wikipedia-w"></i></a></span>)</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
<th class="tableblock halign-left valign-top">Bash</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.junit.org/">JUnit</a>,
<a href="http://testng.org/">TestNG</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.python.org/3/library/unittest.html">unittest</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/sstephenson/bats">Bats</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_principe"><a class="anchor" href="#_principe"></a><a class="link" href="#_principe">Principe</a></h5>
<div class="ulist">
<ul>
<li>
<p>Pour chaque unité, on écrit une ou plusieurs méthodes de test</p>
<div class="ulist">
<ul>
<li>
<p>un outil de gestion est nécessaire vu le nombre de tests</p>
</li>
</ul>
</div>
</li>
<li>
<p>Une possibilité intéressante est d&#8217;écrire le test avant la méthode</p>
<div class="ulist">
<ul>
<li>
<p>précise d&#8217;abord ce que doit faire la méthode</p>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;ensemble des tests peut ensuite être répété autant que nécessaire</p>
<div class="ulist">
<ul>
<li>
<p>l&#8217;exécution des tests après chaque modification permet de vérifier la non régression</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_caractéristiques_des_tests_unitaires"><a class="anchor" href="#_caractéristiques_des_tests_unitaires"></a><a class="link" href="#_caractéristiques_des_tests_unitaires">Caractéristiques des tests unitaires</a></h5>
<div class="ulist">
<ul>
<li>
<p>Petits (analyse d&#8217;un point précis) et rapides (exécutés souvent)</p>
</li>
<li>
<p>Totalement automatisés</p>
</li>
<li>
<p>Toujours au niveau de l&#8217;unité</p>
</li>
<li>
<p>Indépendants les uns des autres (pas de contraintes d&#8217;ordre)</p>
</li>
<li>
<p>N&#8217;utilisent pas de ressources externes (SGBD, …)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_doublure_de_tests"><a class="anchor" href="#_doublure_de_tests"></a><a class="link" href="#_doublure_de_tests">Doublure de tests</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un test unitaire se focalise sur un élément particulier</p>
</li>
<li>
<p>Ce dernier peut être dépendant d&#8217;autres éléments</p>
</li>
<li>
<p>Une <em>doublure de test</em> permet de remplacer ces dépendances</p>
</li>
</ul>
</div>
<div class="hdlist">
<div class="title">Plusieurs types de doublure (cf. <a href="https://martinfowler.com/articles/mocksArentStubs.html">Mocks Aren&#8217;t Stubs</a>, Martin Fowler, 2007)</div>
<table>
<tr>
<td class="hdlist1">
Fantôme
</td>
<td class="hdlist2">
<p>un objet <em>fantôme</em> (<em>dummy</em>) sert juste à remplir des listes de paramètres</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Substitut
</td>
<td class="hdlist2">
<p>un objet <em>substitut</em> (<em>fake</em>) fournit une implémentation simplifiée</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Bouchon
</td>
<td class="hdlist2">
<p>un objet <em>bouchon</em> (<em>stub</em>) retourne des réponses prédéfinies spécifiques aux tests</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Simulacre
</td>
<td class="hdlist2">
<p>un objet <em>simulacre</em> (<em>mock</em>) est préprogrammé par des attentes, i.e. une spécification du comportement attendu</p>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Quelques frameworks de <em>doublure de test</em> (<span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Test_double"><i class="fa fa-wikipedia-w"></i></a></span>)</caption>
<colgroup>
<col style="width: 100%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://site.mockito.org/">Mockito</a>,
<a href="http://jmockit.org/index.html">JMockit</a>,
<a href="http://easymock.org/">EasyMock</a>,
<a href="https://github.com/jayway/powermock">PowerMock</a>,</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_tests_unitaires_en_rust"><a class="anchor" href="#_tests_unitaires_en_rust"></a><a class="link" href="#_tests_unitaires_en_rust">2.4.4. Tests unitaires en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un test est une fonction qui vérifie qu&#8217;une portion de code fonctionne de la manière attendue.</p>
</li>
<li>
<p>Le corps de la fonction réalise les actions suivantes:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Initialiser le contexte du test</p>
</li>
<li>
<p>Exécuter le code à tester</p>
</li>
<li>
<p>Vérifier (<em>assert</em>) les résultats</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_fonction_de_test"><a class="anchor" href="#_fonction_de_test"></a><a class="link" href="#_fonction_de_test">Fonction de test</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test] <i class="conum" data-value="1"></i><b>(1)</b>
fn it_adds_two() { <i class="conum" data-value="2"></i><b>(2)</b>
    assert_eq!(4, add_two(2)); <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La fonction est annotée avec l&#8217;attribut <code>test</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La fonction ne prend pas de paramètre</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Le résultat est vérifié avec la macro <code>assert!</code>, <code>assert_eq!</code> ou <code>assert_ne!</code>
<div class="ulist">
<ul>
<li>
<p>L&#8217;annotation <code>should_panic</code> précise que le test réussit si la fonction provoque une erreur (<em>panic</em>)</p>
</li>
<li>
<p>L&#8217;annotation <code>ignore</code> ignore l&#8217;exécution de la fonction de test</p>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exécuter_les_tests"><a class="anchor" href="#_exécuter_les_tests"></a><a class="link" href="#_exécuter_les_tests">Exécuter les tests</a></h5>
<div class="ulist">
<ul>
<li>
<p><code>rustc --test</code> compile le programme en générant un exécutable qui lance les tests</p>
</li>
<li>
<p><code>cargo test</code> fait de même puis exécute les tests</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_organiser_les_tests"><a class="anchor" href="#_organiser_les_tests"></a><a class="link" href="#_organiser_les_tests">Organiser les tests</a></h5>
<div class="ulist">
<ul>
<li>
<p>Par convention, les tests unitaires sont placés dans le module <code>tests</code> du fichier testé</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[cfg(test)] <i class="conum" data-value="1"></i><b>(1)</b>
mod tests { <i class="conum" data-value="2"></i><b>(2)</b>
    use super::*; <i class="conum" data-value="3"></i><b>(3)</b>

    #[test]
    fn it_works() {
        //...
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>L&#8217;annotation <code>cfg(test)</code> permet de compiler ce module uniquement pour les tests</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Les tests sont placés dans le module <code>tests</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Donne accès au contenu du module englobant</td>
</tr>
</table>
</div>
</li>
<li>
<p>Les tests d&#8217;intégration sont en général placés dans le répertoire <code>tests</code> au même niveau que <code>src</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_tests_et_documentation"><a class="anchor" href="#_tests_et_documentation"></a><a class="link" href="#_tests_et_documentation">Tests et documentation</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les exemples mentionnés dans la documentation de l&#8217;API d&#8217;une fonction sont automatiquement exécutés</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_couverture_de_code"><a class="anchor" href="#_couverture_de_code"></a><a class="link" href="#_couverture_de_code">2.4.5. Couverture de code</a></h4>
<div class="ulist">
<ul>
<li>
<p>L&#8217;objectif est de vérifier que les tests unitaires couvrent bien l&#8217;ensemble du code écrit</p>
</li>
<li>
<p>La <em>couverture de code</em> (<em>code coverage</em>) est un outil de mesure de la qualité des tests effectués</p>
</li>
<li>
<p>Le degré de couverture est mesuré par des indices statistiques</p>
</li>
<li>
<p>Les portions de codes non testées sont mises en évidence</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_quelques_métriques"><a class="anchor" href="#_quelques_métriques"></a><a class="link" href="#_quelques_métriques">Quelques métriques</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le <em>Statement Coverage</em> (ou <em>Line Coverage</em>) mesure le degré d&#8217;exécution de chaque ligne</p>
<div class="ulist">
<ul>
<li>
<p>simple mais ignore un certain nombre d&#8217;erreurs (ne prend pas en compte la logique du programme)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <em>Condition Coverage</em> indique si toutes les conditions ont été évaluées</p>
<div class="ulist">
<ul>
<li>
<p>les conditions doivent être évaluées à vrai et à faux pour obtenir un taux de 100%</p>
</li>
<li>
<p>aide à résoudre les problèmes de la mesure précédente</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <em>Path coverage</em> examine si chaque chemin a été parcouru</p>
</li>
<li>
<p>Le <em>Function Coverage</em> vérifie si chaque fonction a été appelée</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>Un score de 100% ne garantit pas la correction du programme. Ce n&#8217;est même pas un objectif !</strong>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Couverture des tests<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Code_coverage"><i class="fa fa-wikipedia-w"></i></a></span></sup></caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/mozilla/grcov">grcov</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://cobertura.sourceforge.net/">Cobertura</a>,
<a href="http://emma.sourceforge.net">EMMA</a>,
<a href="http://www.atlassian.com/software/clover/">Clover</a>,</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_développement_piloté_par_les_tests"><a class="anchor" href="#_développement_piloté_par_les_tests"></a><a class="link" href="#_développement_piloté_par_les_tests">2.4.6. Développement piloté par les tests</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>développement piloté par les tests</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Test_driven_development"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Test Driven Development</em> ou <em>TDD</em>) est une méthode de développement mettant l&#8217;accent sur les tests unitaires</p>
</li>
<li>
<p>Cette méthode préconise d&#8217;écrire les tests avant le code</p>
<div class="ulist">
<ul>
<li>
<p><em>Only ever write code to fix a failing test</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Cette approche permet de spécifier ce que l&#8217;on attend du système avant de le réaliser</p>
</li>
<li>
<p>Elle est basée sur les tests et le <a href="http://www.refactoring.com/">refactoring</a></p>
</li>
<li>
<p>Le refactoring consiste à améliorer la conception du programme sans en changer le comportement (les fonctionnalités)</p>
</li>
<li>
<p>Le TDD n&#8217;est pas limité aux tests unitaires mais s&#8217;applique aussi aux tests de recette (<em>Acceptance TDD</em>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_cycle_de_développement"><a class="anchor" href="#_cycle_de_développement"></a><a class="link" href="#_cycle_de_développement">Cycle de développement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le TDD s&#8217;appuie sur de courtes itérations</p>
</li>
<li>
<p>Chaque itération possède cinq étapes</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Écrire un test</p>
</li>
<li>
<p>Exécuter les tests et vérifier que le nouveau échoue</p>
</li>
<li>
<p>Écrire juste le code nécessaire pour faire passer le test</p>
</li>
<li>
<p>Réexécuter les tests et vérifier que tous les tests passent</p>
</li>
<li>
<p>Corriger la conception du système (<em>refactoring</em>)</p>
</li>
</ol>
</div>
</li>
<li>
<p>La phase de refactoring s&#8217;applique aussi bien au code de l&#8217;application qu&#8217;au code des tests</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_programmation_pilotée_par_le_comportement"><a class="anchor" href="#_programmation_pilotée_par_le_comportement"></a><a class="link" href="#_programmation_pilotée_par_le_comportement">Programmation pilotée par le comportement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les pratiques de TDD peuvent être étendues vers la Programmation pilotée par le comportement<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Programmation_pilot%C3%A9e_par_le_comportement"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Behaviour-Driven Development</em> ou <em>BDD</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Quelques frameworks de BDD</div>
<p><a href="http://cukes.info/">Cucumber</a>,
<a href="http://spockframework.org/">Spock</a>,
<a href="http://jbehave.org/">JBehave</a>,</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_optimisation_et_profilage"><a class="anchor" href="#_optimisation_et_profilage"></a><a class="link" href="#_optimisation_et_profilage">2.4.7. Optimisation et profilage</a></h4>
<div class="ulist">
<ul>
<li>
<p>L'<em>optimisation</em> est la pratique qui consiste à modifier un système pour qu&#8217;il fonctionne plus efficacement</p>
<div class="ulist">
<ul>
<li>
<p>par exemple plus rapidement ou en consommant moins de ressources</p>
</li>
<li>
<p>L&#8217;optimisation est souvent un compromis entre différents facteurs</p>
</li>
</ul>
</div>
</li>
<li>
<p>L'<em>analyse dynamique</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>profiling</em>) d&#8217;un programme a pour objectif de collecter des informations sur le comportement d&#8217;une application pendant son exécution</p>
<div class="ulist">
<ul>
<li>
<p>Les éléments à surveiller sont l&#8217;utilisation des CPU, l&#8217;utilisation de la mémoire, les <em>threads</em>, …</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Ce type d&#8217;analyse a un impact sur le comportement de l&#8217;application.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_mise_en_œuvre"><a class="anchor" href="#_mise_en_œuvre"></a><a class="link" href="#_mise_en_œuvre">Mise en œuvre</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un outil d&#8217;analyse dynamique permet de collecter et de présenter les informations résultant de l&#8217;analyse de l&#8217;exécution</p>
</li>
<li>
<p>Utilisé pour l&#8217;analyse de performances, un tel outil permet de localiser les <em>points chauds</em> (<em>hot spots</em>) du programme</p>
<div class="ulist">
<ul>
<li>
<p>point chaud : portion de code longue à exécuter</p>
</li>
<li>
<p>rapports sur les fonctions appelées, temps passé dans chaque fonction, …</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Quelques outils</div>
<p><a href="http://sourceware.org/binutils/docs-2.18/gprof">gprof</a> (GNU Profiler), <a href="http://valgrind.org/">Valgrind</a>, <a href="https://visualvm.github.io/index.html">VisualVM</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_a_propos_de_loptimisation_prématurée"><a class="anchor" href="#_a_propos_de_loptimisation_prématurée"></a><a class="link" href="#_a_propos_de_loptimisation_prématurée">A propos de l&#8217;optimisation prématurée</a></h5>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
La phase d&#8217;optimisation ne doit intervenir qu&#8217;une fois que le programme fonctionne et répond aux spécifications fonctionnelles.
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Quelques citations</div>
<ul>
<li>
<p><em>More computing sins are committed in the name of efficiency (without necessarily achieving it) than for any other single reason - including blind stupidity.</em>, <a href="http://en.wikipedia.org/wiki/W.A._Wulf">W.A. Wulf</a></p>
</li>
<li>
<p><em>We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil. Yet we should not pass up our opportunities in that critical 3%.</em>, <a href="http://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a></p>
</li>
<li>
<p><em>Bottlenecks occur in surprising places, so don&#8217;t try to second guess and put in a speed hack until you have proven that&#8217;s where the bottleneck is.</em>, <a href="http://en.wikipedia.org/wiki/Rob_Pike">Rob Pike</a></p>
</li>
<li>
<p><em>The First Rule of Program Optimization: Don&#8217;t do it. The Second Rule of Program Optimization (for experts only!): Don&#8217;t do it yet.</em>, <a href="http://en.wikipedia.org/wiki/Michael_A._Jackson">Michael A. Jackson</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_optimisation_à_différents_niveaux"><a class="anchor" href="#_optimisation_à_différents_niveaux"></a><a class="link" href="#_optimisation_à_différents_niveaux">Optimisation à différents niveaux</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Conception
</td>
<td class="hdlist2">
<p>algorithmes, architecture de l&#8217;application, …</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Code source
</td>
<td class="hdlist2">
<p>utilisation d&#8217;idiomes adaptés au langage</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Attention de ne pas perturber les optimisations du compilateur
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Compilateur
</td>
<td class="hdlist2">
<p>utiliser les optimisations fournies par le compilateur</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Assembleur
</td>
<td class="hdlist2">
<p>spécifique à une plateforme</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Exécution
</td>
<td class="hdlist2">
<p>compilateur <em>just in time</em></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_marche_à_suivre_pour_loptimisation"><a class="anchor" href="#_marche_à_suivre_pour_loptimisation"></a><a class="link" href="#_marche_à_suivre_pour_loptimisation">Marche à suivre pour l&#8217;optimisation</a></h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choisir un paramètre à optimiser (temps CPU, occupation mémoire, …)</p>
</li>
<li>
<p>Localiser les portions de code les plus coûteuses vis à vis de ce paramètre</p>
<div class="ulist">
<ul>
<li>
<p>permet d&#8217;obtenir le meilleur rendement</p>
</li>
<li>
<p>règle des 80/20<sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Principe_de_Pareto"><i class="fa fa-wikipedia-w"></i></a></span></sup></p>
</li>
</ul>
</div>
</li>
<li>
<p>Appliquer les optimisations puis <strong>mesurer le résultat</strong></p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_qualité_du_code_et_documentation"><a class="anchor" href="#_qualité_du_code_et_documentation"></a><a class="link" href="#_qualité_du_code_et_documentation">2.5. Qualité du code et documentation</a></h3>
<div class="sect3">
<h4 id="_conventions_de_codage"><a class="anchor" href="#_conventions_de_codage"></a><a class="link" href="#_conventions_de_codage">2.5.1. Conventions de codage</a></h4>
<div class="sect4">
<h5 id="_styles_de_codage"><a class="anchor" href="#_styles_de_codage"></a><a class="link" href="#_styles_de_codage">Styles de codage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Améliore la lisibilité du code source</p>
<div class="ulist">
<ul>
<li>
<p>le code est plus facile à comprendre</p>
</li>
<li>
<p>le code est plus facile à maintenir</p>
</li>
</ul>
</div>
</li>
<li>
<p>On s&#8217;appuie généralement sur l&#8217;éditeur de texte et/ou un outil de vérification</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
L&#8217;important est de choisir un style et de s&#8217;y tenir !
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_un_extrait_de_code_java_ne_respectant_pas_de_convention"><a class="anchor" href="#_exemple_un_extrait_de_code_java_ne_respectant_pas_de_convention"></a><a class="link" href="#_exemple_un_extrait_de_code_java_ne_respectant_pas_de_convention">Exemple : un extrait de code Java ne respectant pas de convention</a></h5>
<div class="listingblock">
<div class="title">Que fait cet extrait de code ?</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public static &lt;T extends Comparable&lt;? super T&gt;&gt; void f(List&lt;T&gt; l) {
int s=l.size();
int i,j;
for(i=0;i&lt;s-1;++i)
{
for(j=0;j&lt;s-1-i;++j){
if(l.get(j+1).compareTo(l.get(j))&lt;0){
T t=l.get(j);
l.set(j,l.get(j+1));l.set(j+1,t);
}}}
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_un_extrait_de_code_java_respectant_une_convention"><a class="anchor" href="#_exemple_un_extrait_de_code_java_respectant_une_convention"></a><a class="link" href="#_exemple_un_extrait_de_code_java_respectant_une_convention">Exemple : un extrait de code Java respectant une convention</a></h5>
<div class="listingblock">
<div class="title">Que fait cet extrait de code ?</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">/**
  * Tri la liste passée en paramètre en ordre croissant
  * en respectant l'ordre naturel de ses éléments.
  * Les éléments de la liste doivent implémenter
  * l'interface &lt;code&gt;Comparable&lt;/code&gt;.
  * Cet méthode utilise un algorithme de tri a bulle.
  *
  * @param aList la liste à trier
  */
public static &lt;T extends Comparable&lt;? super T&gt;&gt; void bubbleSort(List&lt;T&gt; aList) {
int size = aList.size();
for (int i = 0; i &lt; size - 1; ++i) {
    for (int j = 0; j &lt; size - 1 - i; ++j) {
    if (aList.get(j+1).compareTo(aList.get(j)) &lt; 0) { // compare les deux voisins
        // échange les deux voisins
        T tmp = aList.get(j);
        aList.set(j, aList.get(j + 1));
        aList.set(j + 1, tmp);
    }}
}}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_quelques_conventions"><a class="anchor" href="#_quelques_conventions"></a><a class="link" href="#_quelques_conventions">Quelques conventions</a></h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Style de codage par langage</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Plusieurs</th>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
<th class="tableblock halign-left valign-top">C++</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://google.github.io/styleguide/">Google Style Guides</a>, Google, 2014.
<a href="https://www.pearson.com/us/higher-education/program/Martin-Clean-Code-A-Handbook-of-Agile-Software-Craftsmanship/PGM63937.html">Clean Code: A Handbook of Agile Software Craftsmanship</a>, Robert C. Martin, Pearson, 2009.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/1.0.0/style/">Rust Style Guidelines</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.oracle.com/java/technologies/javase/codeconventions-contents.html">Java code conventions</a>, SUN, 1999.
<a href="http://www.ambysoft.com/essays/javaCodingStandards.html">Coding standards for Java</a>, AmbySoft, 2007.
<a href="http://fluxens.com/javastyle.html">Java Programming Style Guidelines</a>, Fluxens.
<a href="https://horstmann.com/bigj/style.html">Java Language Coding Guidelines</a>, <a href="http://horstmann.com/">Cay Horstmann</a>, 2004.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.python.org/dev/peps/pep-0008/">PEP 8</a>,
<a href="http://pep8.org/">PEP 8 — the Style Guide for Python Code</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.pearson.com/uk/educators/higher-education-educators/program/Sutter-C-Coding-Standards-101-Rules-Guidelines-and-Best-Practices/PGM543690.html">C++ Coding Standards: 101 Rules, Guidelines, and Best Practices</a>, Herb Sutter, Andrei Alexandrescu, Pearson, 2005.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_thèmes_abordés_par_les_conventions"><a class="anchor" href="#_thèmes_abordés_par_les_conventions"></a><a class="link" href="#_thèmes_abordés_par_les_conventions">Thèmes abordés par les conventions</a></h5>
<div class="dlist">
<dl>
<dt class="hdlist1">Structure et contenu d&#8217;un fichier source</dt>
<dd>
<p><em>Files longer than 2000 lines are cumbersome and should be avoided.</em></p>
</dd>
<dt class="hdlist1">Conventions de nommage</dt>
<dd>
<p><em>Class names should be nouns, in mixed case with the first letter of each internal word capitalized.</em></p>
</dd>
<dt class="hdlist1">Format et emplacement des commentaires</dt>
<dd>
<p><em>Short comments can appear on a single line indented to the level of the code that follows.</em></p>
</dd>
<dt class="hdlist1">Indentation des lignes</dt>
<dd>
<p><em>Four spaces should be used as the unit of indentation.</em></p>
</dd>
<dt class="hdlist1">Format des déclarations, des instructions et emplacement des espaces</dt>
<dd>
<p><em>Each line should contain at most one statement.</em></p>
</dd>
<dt class="hdlist1">Quelques bonnes pratiques</dt>
<dd>
<p><em>Don&#8217;t make any instance or class variable public without good reason.</em></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_audit_des_conventions_de_codage"><a class="anchor" href="#_audit_des_conventions_de_codage"></a><a class="link" href="#_audit_des_conventions_de_codage">Audit des conventions de codage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Des outils permettent de réaliser un audit des fichiers sources</p>
</li>
<li>
<p>Génèrent un rapport des violations des conventions de codage</p>
</li>
<li>
<p>Sont généralement configurables pour différentes conventions</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Outils de vérification des conventions par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rust-lang/rust-clippy">clippy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://checkstyle.sourceforge.net/">CheckStyle</a>,
<a href="http://jcsc.sourceforge.net/">JCSC</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.pylint.org/">Pylint</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_outils_de_reformatage"><a class="anchor" href="#_outils_de_reformatage"></a><a class="link" href="#_outils_de_reformatage">Outils de reformatage</a></h5>
<div class="ulist">
<ul>
<li>
<p>Mettre en conformité le code source avec des conventions</p>
</li>
<li>
<p>Concerne uniquement la mise en forme du code (indentation, espaces, …)</p>
</li>
<li>
<p>La plupart des IDE assurent également ce service</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Outils</div>
<ul>
<li>
<p><a href="https://github.com/rust-lang/rustfmt">rustfmt</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_documenter_un_code_source"><a class="anchor" href="#_documenter_un_code_source"></a><a class="link" href="#_documenter_un_code_source">2.5.2. Documenter un code source</a></h4>
<div class="sect4">
<h5 id="_quest_ce_quune_bonne_documentation"><a class="anchor" href="#_quest_ce_quune_bonne_documentation"></a><a class="link" href="#_quest_ce_quune_bonne_documentation">Qu&#8217;est-ce qu&#8217;une bonne documentation<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Software_documentation#Technical_documentation"><i class="fa fa-wikipedia-w"></i></a></span></sup> ?</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un commentaire doit clarifier le code</p>
<div class="ulist">
<ul>
<li>
<p>la documentation du code doit permettre à une autre personne de mieux comprendre le code</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentez pourquoi les choses sont faites et pas simplement ce qui est fait</p>
<div class="ulist">
<ul>
<li>
<p>ne paraphrasez pas le code</p>
</li>
</ul>
</div>
</li>
<li>
<p>Rédigez des commentaires simples et concis</p>
</li>
<li>
<p>Écrivez la documentation avant d&#8217;écrire le code</p>
<div class="ulist">
<ul>
<li>
<p>permet de définir l&#8217;objectif en premier</p>
</li>
</ul>
</div>
</li>
<li>
<p>Évitez les commentaires décoratifs (bannières, …)</p>
<div class="ulist">
<ul>
<li>
<p>ajoute peu de valeurs à la documentation</p>
</li>
<li>
<p>est une perte de temps</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Idéalement, un code bien écrit doit se suffire à lui-même, i.e. doit se lire (et se comprendre) facilement sans commentaire.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_intérêt_des_outils_de_génération_de_la_documentation"><a class="anchor" href="#_intérêt_des_outils_de_génération_de_la_documentation"></a><a class="link" href="#_intérêt_des_outils_de_génération_de_la_documentation">Intérêt des outils de génération de la documentation</a></h5>
<div class="ulist">
<ul>
<li>
<p>Générer automatiquement la documentation (dans diverses formats) du code source</p>
</li>
<li>
<p>Permet de garder plus facilement la documentation en phase avec le code</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Outils de documentation par langage</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Plusieurs</th>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.doxygen.org">Doxygen</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/rustdoc/index.html">rustdoc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://java.sun.com/j2se/javadoc/">JavaDoc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.python.org/3/library/pydoc.html">pydoc</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_documenter_une_api_rust"><a class="anchor" href="#_documenter_une_api_rust"></a><a class="link" href="#_documenter_une_api_rust">Documenter une API Rust</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les commentaires de documentation débutent par <code>///</code> et concerne l&#8217;élément suivant le commentaire (<code>//!</code> pour documenter l&#8217;élément englobant)</p>
</li>
<li>
<p>Cette syntaxe est un raccourci pour définir l&#8217;attribut <code>doc</code> (<code>#[doc = " This is a doc comment."]</code>)</p>
</li>
<li>
<p>Ces commentaires supportent une syntaxe <a href="https://fr.wikipedia.org/wiki/Markdown">Markdown</a> pour la mise en forme</p>
</li>
<li>
<p>La documentation au format HTML est ensuite générée avec <code>cargo doc</code> (qui invoque <a href="https://doc.rust-lang.org/rustdoc/what-is-rustdoc.html"><code>rustdoc</code></a>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Adds one to the number given.
///
/// # Examples
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -&gt; i32 {
    x + 1
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_audit_de_code_source_et_analyse_statique"><a class="anchor" href="#_audit_de_code_source_et_analyse_statique"></a><a class="link" href="#_audit_de_code_source_et_analyse_statique">2.5.3. Audit de code source et Analyse statique</a></h4>
<div class="sect4">
<h5 id="_audit_de_code_source"><a class="anchor" href="#_audit_de_code_source"></a><a class="link" href="#_audit_de_code_source">Audit de code source</a></h5>
<div class="ulist">
<ul>
<li>
<p>L'<em>audit</em> ou <em>revue</em><sup><span class="icon"><a class="image" href="http://en.wikipedia.org/wiki/Software_inspection"><i class="fa fa-wikipedia-w"></i></a></span></sup> de code consiste à étudier attentivement un code source afin de détecter et de corriger des erreurs</p>
</li>
<li>
<p>L&#8217;objectif est d&#8217;améliorer la qualité du logiciel et l&#8217;expérience des développeurs</p>
</li>
<li>
<p>Peut prendre différentes formes</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="http://en.wikipedia.org/wiki/Fagan_inspection">Fagan inspection</a>
</td>
<td class="hdlist2">
<p>est un processus formel pour l&#8217;audit de code</p>
</td>
</tr>
<tr>
<td class="hdlist1">
"par dessus l&#8217;épaule"
</td>
<td class="hdlist2">
<p>un développeur suit en temps réel ce qu&#8217;un autre écrit</p>
</td>
</tr>
<tr>
<td class="hdlist1">
programmation par binôme
</td>
<td class="hdlist2">
<p>deux développeurs travaillent de concert et échange leur rôle régulièrement (vient de <a href="http://en.wikipedia.org/wiki/Extreme_programming">eXtreme Programming</a> (XP))</p>
</td>
</tr>
<tr>
<td class="hdlist1">
assisté par un outil
</td>
<td class="hdlist2">
<p>s&#8217;appuie sur des outils pour une analyse systématique</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_analyse_statique_du_code"><a class="anchor" href="#_analyse_statique_du_code"></a><a class="link" href="#_analyse_statique_du_code">Analyse statique du code</a></h5>
<div class="ulist">
<ul>
<li>
<p>Certaines erreurs se reproduisent fréquemment dans un fichier source (<code>;</code> après un <code>for</code>, …)</p>
</li>
<li>
<p>La plupart de ces erreurs peuvent être recherchées de façon systématique</p>
</li>
<li>
<p>L'<em>analyse statique</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Analyse_statique_de_programmes"><i class="fa fa-wikipedia-w"></i></a></span></sup> permet d&#8217;obtenir des informations sur un programme sans l&#8217;exécuter</p>
</li>
<li>
<p>Elle est un bon complément aux tests</p>
</li>
<li>
<p>En général, elle n&#8217;a pas connaissance de ce que le programme doit faire (recherche de motifs généraux)</p>
</li>
<li>
<p>Des outils proposent un moteur ainsi qu&#8217;un ensemble de règles permettant de trouver ce type d&#8217;erreurs dans un fichier source</p>
</li>
<li>
<p>L&#8217;ensemble de règles peut éventuellement être modifiable</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Outils d&#8217;analyse statique par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Shell</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/rust-lang/rust-clippy">clippy</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://findbugs.sourceforge.net/">FindBugs</a>,
<a href="http://pmd.sourceforge.net">Pmd</a>,
<a href="http://www.sonarqube.org/">SonarQube</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.shellcheck.net/">ShellCheck</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_quelques_bogues_courants"><a class="anchor" href="#_quelques_bogues_courants"></a><a class="link" href="#_quelques_bogues_courants">Quelques bogues courants</a></h5>
<div class="ulist">
<ul>
<li>
<p>Boucle récursive infinie</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MaClasse() {
  MaClasse m = new MaClasse();
}</code></pre>
</div>
</div>
</li>
<li>
<p>Déréférencement d&#8217;une référence null</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">if (c == null &amp;&amp; c.uneMethode()) //...</code></pre>
</div>
</div>
</li>
<li>
<p>Auto affectation d&#8217;attribut</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public MaClasse(String uneChaine) {
  this.chaine = chaine;
}</code></pre>
</div>
</div>
</li>
<li>
<p>Valeur de retour ignorée</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String nom = //...
nom.replace('/', '.');</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_catégories_de_bogues"><a class="anchor" href="#_catégories_de_bogues"></a><a class="link" href="#_catégories_de_bogues">Catégories de bogues</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Correction
</td>
<td class="hdlist2">
<p>le code ne fait clairement pas ce qui est attendu</p>
<div class="ulist">
<ul>
<li>
<p><em>déréférencement d&#8217;une référence null</em></p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Mauvaise pratique
</td>
<td class="hdlist2">
<p>le code ne respecte pas les bonnes pratiques</p>
<div class="ulist">
<ul>
<li>
<p>redéfinition d'<em>equals</em> sans <em>hashCode</em>, comparaison de chaîne avec <em>==</em></p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Problème de sécurité
</td>
<td class="hdlist2">
<p>le code est vulnérable à un usage malveillant</p>
<div class="ulist">
<ul>
<li>
<p><em>injection SQL</em></p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Code suspect
</td>
<td class="hdlist2">
<p>le code utilise des pratiques non usuelles</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Performance
</td>
<td class="hdlist2">
<p>le code est inefficace</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Correction multithread
</td>
<td class="hdlist2">
<p>il y a un problème de correction en environnement multithread</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_mise_en_œuvre_de_lanalyse_statique"><a class="anchor" href="#_mise_en_œuvre_de_lanalyse_statique"></a><a class="link" href="#_mise_en_œuvre_de_lanalyse_statique">Mise en œuvre de l&#8217;analyse statique</a></h5>
<div class="ulist">
<ul>
<li>
<p>Intégration au processus de développement</p>
<div class="ulist">
<ul>
<li>
<p><em>intégration à l&#8217;IDE, exécution comme les tests unitaires, …</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Réglage de l&#8217;outil utilisé</p>
<div class="ulist">
<ul>
<li>
<p><em>éviter les faux positifs, paramétrer le niveau de détail, …</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>Réfléchir à la prise de décision</p>
<div class="ulist">
<ul>
<li>
<p><em>consultation des rapports, processus pour la correction du bogue, ne pas corriger le bogue, …</em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_agrégation_des_rapports"><a class="anchor" href="#_agrégation_des_rapports"></a><a class="link" href="#_agrégation_des_rapports">2.5.4. Agrégation des rapports</a></h4>
<div class="ulist">
<ul>
<li>
<p>La difficulté est de visualiser l&#8217;ensemble des rapports produits</p>
</li>
<li>
<p>Il peut être utile d&#8217;agréger les différentes mesures pour générer des indicateurs synthétiques</p>
</li>
<li>
<p>Ces indicateurs doivent ensuite être disponibles pour l&#8217;ensemble des membres du projet</p>
</li>
<li>
<p>Les réactions face à ces rapports doivent aussi être anticipées</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_construction_dun_projet"><a class="anchor" href="#_construction_dun_projet"></a><a class="link" href="#_construction_dun_projet">2.6. Construction d’un projet</a></h3>
<div class="sect3">
<h4 id="_implémentation_et_distribution"><a class="anchor" href="#_implémentation_et_distribution"></a><a class="link" href="#_implémentation_et_distribution">2.6.1. Implémentation et distribution</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour la plupart des langages, plusieurs <em>implémentations</em> sont disponibles</p>
<div class="ulist">
<ul>
<li>
<p>certaines sont généralistes</p>
</li>
<li>
<p>d&#8217;autres sont spécialisées pour un type particulier de situation</p>
</li>
</ul>
</div>
</li>
<li>
<p>De même, pour plus de simplicité d&#8217;usage, les langages sont proposées sous la forme d&#8217;une <em>distribution</em></p>
</li>
<li>
<p>Une distribution va regrouper une implémentation du langage avec les bibliothèques standards ainsi que des outils de développement</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Implémentations par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/rustc/index.html">rustc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://openjdk.java.net/groups/hotspot/">HotSpot</a> (<a href="http://openjdk.java.net/">OpenJdk</a>),
<a href="https://www.eclipse.org/openj9/">OpenJ9</a> (<a href="https://www.eclipse.org/">Eclipse</a>),
<a href="https://www.graalvm.org/">GraalVM</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://fr.wikipedia.org/wiki/CPython">CPython</a>,
<a href="http://www.jython.org/">Jython</a>,
<a href="http://ironpython.net/">IronPython</a>,
<a href="http://pypy.org/">PyPy</a></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Distributions par langage</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.rust-lang.org/tools/install">rustup</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://openjdk.java.net/">OpenJdk</a>/ <a href="https://adoptopenjdk.net/">AdoptOpenJDK</a>,
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle Java SE</a>,
<a href="https://www.microsoft.com/openjdk">Microsoft Build of OpenJDK</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.python.org/downloads/">Distribution de référence</a>,
<a href="https://www.continuum.io/anaconda-overview">Anaconda</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_automatisation_du_build"><a class="anchor" href="#_automatisation_du_build"></a><a class="link" href="#_automatisation_du_build">2.6.2. Automatisation du <em>build</em></a></h4>
<div class="ulist">
<ul>
<li>
<p>La gestion de la compilation<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Build_automation"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>Build automation</em>) consiste à automatiser les tâches répétitives des développeurs</p>
<div class="ulist">
<ul>
<li>
<p>compilation (mode normal, mode débogage, …), génération de la version de distribution, génération de la documentation et des notes de version, lancement des tests, déploiement</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ces tâches sont alors réalisées plus efficacement et moins sujettes aux erreurs</p>
<div class="ulist">
<ul>
<li>
<p>évite les fastidieuses lignes de commande</p>
</li>
<li>
<p>permet une compilation « intelligente »</p>
</li>
<li>
<p>rend le processus reproductible</p>
</li>
</ul>
</div>
</li>
<li>
<p>Peut être déclenché</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
à la demande
</td>
<td class="hdlist2">
<p>l&#8217;utilisateur exécute un script</p>
</td>
</tr>
<tr>
<td class="hdlist1">
par un ordonnanceur
</td>
<td class="hdlist2">
<p>exécuté à un instant donné</p>
</td>
</tr>
<tr>
<td class="hdlist1">
par un événement
</td>
<td class="hdlist2">
<p>provoqué par un événement particulier</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. Outils de build par langage</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Rust</th>
<th class="tableblock halign-left valign-top">Java/Scala</th>
<th class="tableblock halign-left valign-top">C/C++</th>
<th class="tableblock halign-left valign-top">Autres</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://doc.rust-lang.org/cargo/index.html">Cargo</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://gradle.org/">Gradle</a>,
<a href="https://maven.apache.org/">Maven</a>,
<a href="http://ant.apache.org">Ant</a>,
<a href="http://www.scala-sbt.org/">sbt</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://www.gnu.org/software/make">Make</a>,
<a href="https://cmake.org/">CMake</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://docs.seattlerb.org/rake/">Rake</a>,
<a href="https://waf.io/">Waf</a>,
<a href="http://www.scons.org/">SCons</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_cargo"><a class="anchor" href="#_cargo"></a><a class="link" href="#_cargo">2.6.3. Cargo</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/cargo/index.html">Cargo</a> est le système de build et le gestionnaire de dépendances de Rust</p>
</li>
<li>
<p>Cargo permet de simplifier certaines tâches comme</p>
<div class="ulist">
<ul>
<li>
<p>la construction du projet,</p>
</li>
<li>
<p>la gestion des bibliothèques.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Il propose également une manière standard (<em>conventions</em>) d&#8217;organiser un projet Rust</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_créer_un_projet"><a class="anchor" href="#_créer_un_projet"></a><a class="link" href="#_créer_un_projet">Créer un projet</a></h5>
<div class="ulist">
<ul>
<li>
<p>La commande <a href="https://doc.rust-lang.org/cargo/commands/cargo-new.html"><code>cargo new hello_cargo</code></a> permet de créer un projet</p>
<div class="ulist">
<ul>
<li>
<p>crée un répertoire <code>hello_cargo</code>,</p>
</li>
<li>
<p>initialise un dépôt <code>git</code> (option <code>--vcs</code>),</p>
</li>
<li>
<p>ajoute la description du projet dans <code>Cargo.toml</code></p>
</li>
<li>
<p>ajoute un fichier source dans <code>src/main.rs</code> (ou <code>src.lib.rs</code> avec l&#8217;option <code>--lib</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>La commande <a href="https://doc.rust-lang.org/cargo/commands/cargo-init.html"><code>cargo init</code></a> initialise un projet Cargo dans le répertoire courant</p>
</li>
<li>
<p>Un projet Cargo respecte des <a href="https://doc.rust-lang.org/cargo/guide/project-layout.html">conventions d&#8217;organisation</a> de l&#8217;arborescence du projet</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_description_du_projet"><a class="anchor" href="#_description_du_projet"></a><a class="link" href="#_description_du_projet">Description du projet</a></h5>
<div class="ulist">
<ul>
<li>
<p>La <a href="https://doc.rust-lang.org/cargo/reference/manifest.html">description du projet</a> se trouve dans le fichier <code>Cargo.toml</code> qui est au format <a href="https://toml.io/">TOML</a> (Tom’s Obvious Minimal Language)</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-toml hljs" data-lang="toml">[package] <i class="conum" data-value="1"></i><b>(1)</b>
name = "hello_cargo"
version = "0.1.0"
edition = "2018"

[dependencies] <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La section <code>package</code> décrit le projet (un <em>package</em> Rust)</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>La section <code>dependencies</code> liste les bibliothèques dont dépend le projet</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_principales_commandes_cargo"><a class="anchor" href="#_principales_commandes_cargo"></a><a class="link" href="#_principales_commandes_cargo">Principales commandes Cargo</a></h5>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-build.html">build</a>
</td>
<td class="hdlist2">
<p>construit le projet avec le <a href="https://doc.rust-lang.org/book/ch14-01-release-profiles.html#customizing-builds-with-release-profiles">profil</a> par défaut (par exemple <code>target/debug/hello_cargo</code>)</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Les versions des bibliothèques sont entérinées dans le fichier <code>Cargo.lock</code> (<em>reproductibilité</em> du build)</p>
</li>
<li>
<p>L&#8217;option <code>--release</code> génère un exécutable optimisé dans <code>target/release</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-run.html">run</a>
</td>
<td class="hdlist2">
<p>construit puis exécute le programme</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-check.html">check</a>
</td>
<td class="hdlist2">
<p>vérifie que le programme compile sans générer d&#8217;exécutable</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-update.html">update</a>
</td>
<td class="hdlist2">
<p>met à jour les versions des dépendances</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-test.html">test</a>
</td>
<td class="hdlist2">
<p>construit et exécute les tests</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-clean.html">clean</a>
</td>
<td class="hdlist2">
<p>supprime les artefacts issus de la compilation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/cargo/commands/cargo-doc.html">doc</a>
</td>
<td class="hdlist2">
<p>construit la documentation du projet</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_gestion_des_dépendances"><a class="anchor" href="#_gestion_des_dépendances"></a><a class="link" href="#_gestion_des_dépendances">Gestion des dépendances</a></h5>
<div class="ulist">
<ul>
<li>
<p>L&#8217;ajout d&#8217;une bibliothèque dans le projet se fait en ajoutant une ligne dans la section <code>dependencies</code> de <code>Cargo.toml</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-toml hljs" data-lang="toml">[dependencies]
rand = "0.8.3"</code></pre>
</div>
</div>
</li>
<li>
<p>La ligne pour intégrer une bibliothèque précise:</p>
<div class="ulist">
<ul>
<li>
<p>le nom du <em>crate</em> disponible sur <a href="https://crates.io/"><code>crates.io</code></a>,</p>
</li>
<li>
<p>la version dont dépend le projet.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <a href="https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html">schéma d&#8217;une version</a> suppose que la bibliothèque respecte une gestion sémantique des versions (<a href="http://semver.org/">SemVer</a>)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vers_la_livraison_continue"><a class="anchor" href="#_vers_la_livraison_continue"></a><a class="link" href="#_vers_la_livraison_continue">2.7. Vers la livraison continue</a></h3>
<div class="sect3">
<h4 id="_collaborer_avec_un_vcs_et_une_forge"><a class="anchor" href="#_collaborer_avec_un_vcs_et_une_forge"></a><a class="link" href="#_collaborer_avec_un_vcs_et_une_forge">2.7.1. Collaborer avec un VCS et une forge</a></h4>

</div>
<div class="sect3">
<h4 id="_intégration_continue"><a class="anchor" href="#_intégration_continue"></a><a class="link" href="#_intégration_continue">2.7.2. Intégration continue</a></h4>
<div class="sect4">
<h5 id="_introduction_3"><a class="anchor" href="#_introduction_3"></a><a class="link" href="#_introduction_3">Introduction</a></h5>
<div class="ulist">
<ul>
<li>
<p>L'<em>intégration continue</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Continuous_integration"><i class="fa fa-wikipedia-w"></i></a></span></sup> (<em>continuous Integration</em>) est une pratique de développement où les membres d&#8217;une équipe intègrent fréquemment (au moins une fois par jour) leur travail</p>
</li>
<li>
<p>Un outil automatique est chargé de vérifier et de détecter les problèmes d&#8217;intégration au plus tôt</p>
</li>
<li>
<p>Est issu d'<em>Extreme Programming</em></p>
</li>
<li>
<p>S&#8217;appuie généralement sur un <em>serveur d&#8217;intégration continue</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Quelques outils</div>
<p><a href="https://github.com/features/actions">GitHub Actions</a>,
<a href="https://about.gitlab.com/features/gitlab-ci-cd/">GitLab-CI</a>,
<a href="http://jenkins-ci.org/">Jenkins</a>,
<a href="https://drone.io/">drone.io</a>,
<a href="https://travis-ci.org/">Travis CI</a>,
<a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a>,</p>
</div>
</div>
<div class="sect4">
<h5 id="_pratiques_recommandées"><a class="anchor" href="#_pratiques_recommandées"></a><a class="link" href="#_pratiques_recommandées">Pratiques recommandées</a></h5>
<div class="sect5">
<h6 id="_maintenir_un_référentiel_unique_des_sources"><a class="anchor" href="#_maintenir_un_référentiel_unique_des_sources"></a><a class="link" href="#_maintenir_un_référentiel_unique_des_sources">Maintenir un référentiel unique des sources</a></h6>
<div class="ulist">
<ul>
<li>
<p>en général avec un outil de gestion de versions</p>
</li>
<li>
<p>tous les développeurs doivent utiliser ce référentiel</p>
</li>
<li>
<p>tout ce qui est nécessaire à la compilation doit se trouver dans le référentiel (tests, fichier de propriétés, scripts SQL, …)</p>
</li>
<li>
<p>limiter l&#8217;utilisation des branches (favoriser la branche principale)</p>
</li>
<li>
<p>ne placer aucun produit de la compilation dans le référentiel</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_automatiser_les_compilations"><a class="anchor" href="#_automatiser_les_compilations"></a><a class="link" href="#_automatiser_les_compilations">Automatiser les compilations</a></h6>
<div class="ulist">
<ul>
<li>
<p>chaque tâche répétitive doit être automatisée (création de la BD, …)</p>
<div class="ulist">
<ul>
<li>
<p><em>à partir d&#8217;une machine vierge, un checkout et une unique commande doit permettre d&#8217;obtenir un système utilisable</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>l&#8217;outil doit permettre de ne recompiler que ce qui est nécessaire</p>
</li>
<li>
<p>l&#8217;outil doit permettre de définir différentes cibles</p>
</li>
<li>
<p>le système de compilation de l&#8217;IDE ne suffit pas</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_rendre_les_compilations_auto_testantes"><a class="anchor" href="#_rendre_les_compilations_auto_testantes"></a><a class="link" href="#_rendre_les_compilations_auto_testantes">Rendre les compilations auto-testantes</a></h6>
<div class="ulist">
<ul>
<li>
<p>un ensemble de tests automatisés doit être disponible</p>
</li>
<li>
<p>la compilation doit inclure l&#8217;exécution des tests</p>
</li>
<li>
<p>l&#8217;échec d&#8217;un test doit être reporté comme un échec de la compilation</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_tout_le_monde_valide_chaque_jour"><a class="anchor" href="#_tout_le_monde_valide_chaque_jour"></a><a class="link" href="#_tout_le_monde_valide_chaque_jour">Tout le monde valide chaque jour</a></h6>
<div class="ulist">
<ul>
<li>
<p>des validations fréquentes favorisent une détection rapide des problèmes d&#8217;intégration</p>
<div class="ulist">
<ul>
<li>
<p>moins d&#8217;endroits où les conflits peuvent se produire</p>
</li>
<li>
<p>détection plus rapide des problèmes</p>
</li>
<li>
<p>encouragent les développeurs à découper leur travail en tâches plus courtes</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_chaque_validation_doit_compiler_la_branche_principale_sur_une_machine_dintégration"><a class="anchor" href="#_chaque_validation_doit_compiler_la_branche_principale_sur_une_machine_dintégration"></a><a class="link" href="#_chaque_validation_doit_compiler_la_branche_principale_sur_une_machine_dintégration">Chaque validation doit compiler la branche principale sur une machine d&#8217;intégration</a></h6>
<div class="ulist">
<ul>
<li>
<p>permet d&#8217;avoir une compilation de référence</p>
</li>
<li>
<p>la validation dépend de la réussite de cette compilation</p>
</li>
<li>
<p>c&#8217;est en général le rôle du serveur d&#8217;intégration continue</p>
</li>
<li>
<p>le serveur notifie le développeur de la réussite de la compilation</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_maintenir_une_compilation_courte"><a class="anchor" href="#_maintenir_une_compilation_courte"></a><a class="link" href="#_maintenir_une_compilation_courte">Maintenir une compilation courte</a></h6>
<div class="ulist">
<ul>
<li>
<p>pour obtenir un feedback rapide</p>
</li>
<li>
<p>XP recommande un maximum de 10mn</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_tester_dans_un_environnement_de_production_cloné"><a class="anchor" href="#_tester_dans_un_environnement_de_production_cloné"></a><a class="link" href="#_tester_dans_un_environnement_de_production_cloné">Tester dans un environnement de production cloné</a></h6>
<div class="ulist">
<ul>
<li>
<p>chaque différence avec l&#8217;environnement de production peut conduire à des résultats de tests différents</p>
</li>
<li>
<p>parfois difficile mais il faut s&#8217;en approcher au maximum</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_rendre_disponible_facilement_le_dernier_exécutable"><a class="anchor" href="#_rendre_disponible_facilement_le_dernier_exécutable"></a><a class="link" href="#_rendre_disponible_facilement_le_dernier_exécutable">Rendre disponible facilement le dernier exécutable</a></h6>
<div class="ulist">
<ul>
<li>
<p>chacun doit pouvoir utiliser la dernière version du système</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_tout_le_monde_peut_voir_ce_qui_se_passe"><a class="anchor" href="#_tout_le_monde_peut_voir_ce_qui_se_passe"></a><a class="link" href="#_tout_le_monde_peut_voir_ce_qui_se_passe">Tout le monde peut voir ce qui se passe</a></h6>
<div class="ulist">
<ul>
<li>
<p>le but de l&#8217;intégration continue est de faciliter la communication</p>
</li>
<li>
<p>tout le monde doit voir l&#8217;état de la branche principale (compilation en cours, échec de la compilation, …)</p>
</li>
<li>
<p>et les changements apportés</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_automatiser_le_déploiement"><a class="anchor" href="#_automatiser_le_déploiement"></a><a class="link" href="#_automatiser_le_déploiement">Automatiser le déploiement</a></h6>
<div class="ulist">
<ul>
<li>
<p>la copie des exécutables dans les différents environnements doit être automatique</p>
</li>
<li>
<p>il peut être nécessaire de mettre aussi en place un mécanisme pour annuler un déploiement (en production par exemple)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_intégration_continue_vs_outils_dintégration_continue"><a class="anchor" href="#_intégration_continue_vs_outils_dintégration_continue"></a><a class="link" href="#_intégration_continue_vs_outils_dintégration_continue">Intégration continue vs. outils d&#8217;intégration continue</a></h5>
<div class="ulist">
<ul>
<li>
<p>L&#8217;intégration continue ne dépend pas d&#8217;un outil</p>
</li>
<li>
<p>C&#8217;est une pratique qui doit être acceptée par l&#8217;équipe de développement</p>
<div class="ulist">
<ul>
<li>
<p>la dernière version du code dans le référentiel doit toujours compiler et passer tous les tests</p>
</li>
<li>
<p>le code doit être validé fréquemment</p>
</li>
</ul>
</div>
</li>
<li>
<p>Processus</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>avant la validation, s&#8217;assurer que la compilation et les tests réussissent</p>
</li>
<li>
<p>prévenir l&#8217;équipe de ne pas mettre à jour le référentiel à cause de l&#8217;intégration en cours</p>
</li>
<li>
<p>valider</p>
</li>
<li>
<p>aller sur la machine d&#8217;intégration, récupérer la dernière version du référentiel et s&#8217;assurer que la compilation et les tests réussissent</p>
</li>
<li>
<p>prévenir l&#8217;équipe que les mises à jour peuvent reprendre</p>
</li>
</ol>
</div>
</li>
<li>
<p>Un outil d&#8217;intégration continue permet d&#8217;automatiser l&#8217;étape 4</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_des_binaires"><a class="anchor" href="#_gestion_des_binaires"></a><a class="link" href="#_gestion_des_binaires">2.7.3. Gestion des binaires</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>dépôt de binaires</em><sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Binary_repository_manager"><i class="fa fa-wikipedia-w"></i></a></span></sup> permet de centraliser l&#8217;entreposage et la distribution des résultats de la compilation</p>
</li>
<li>
<p>Il doit s&#8217;intégrer avec:</p>
<div class="ulist">
<ul>
<li>
<p>le serveur d&#8217;intégration continue,</p>
</li>
<li>
<p>le système de build utilisé.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Il gère également le contrôle d&#8217;accès aux différents paquets</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Outils de gestion des binaires par langage</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Java</th>
<th class="tableblock halign-left valign-top">Python</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://archiva.apache.org/">Archiva</a>,
<a href="http://www.sonatype.org/nexus/">Nexus</a>,
<a href="https://www.jfrog.com/artifactory/">Artifactory</a>,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://pip.pypa.io/en/stable/">pip</a>,
<a href="https://pypi.python.org/pypihttps://pypi.python.org/pypi">PyPI</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_déploiement"><a class="anchor" href="#_déploiement"></a><a class="link" href="#_déploiement">2.7.4. Déploiement<sup><span class="icon"><a class="image" href="https://en.wikipedia.org/wiki/Software_deployment"><i class="fa fa-wikipedia-w"></i></a></span></sup></a></h4>
<div class="sect4">
<h5 id="_livraison_continue"><a class="anchor" href="#_livraison_continue"></a><a class="link" href="#_livraison_continue">Livraison continue</a></h5>
<div class="ulist">
<ul>
<li>
<p>La <em>livraison continue</em> (<em>continuous delivery</em>) est une approche visant à</p>
<div class="ulist">
<ul>
<li>
<p>produire un logiciel en cycles courts,</p>
</li>
<li>
<p>pouvoir livrer le logiciel à tout moment.</p>
</li>
</ul>
</div>
</li>
<li>
<p>La construction, les tests et la distribution doivent être plus fréquents</p>
</li>
<li>
<p>Cette approche s&#8217;appuie sur un déploiement fiable et reproductible</p>
</li>
<li>
<p>La décision de déployer reste manuelle</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_pipeline_de_déploiement"><a class="anchor" href="#_pipeline_de_déploiement"></a><a class="link" href="#_pipeline_de_déploiement">Pipeline de déploiement</a></h5>
<div class="ulist">
<ul>
<li>
<p>Un <em>pipeline de déploiement</em> couvre trois aspects</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Visibilité
</td>
<td class="hdlist2">
<p>Toutes les phases du processus de la livraison sont visibles par tous les membres de l&#8217;équipe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Feedback
</td>
<td class="hdlist2">
<p>Les problèmes doivent être remontés au plus tôt à l&#8217;équipe</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Automatisation
</td>
<td class="hdlist2">
<p>Toute version du logiciel peut être déployée sur n&#8217;importe quelle plate-forme automatiquement</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>La construction du projet est décomposée en étapes successives</p>
<div class="ulist">
<ul>
<li>
<p>chaque étape améliore la confiance dans le logiciel</p>
</li>
<li>
<p>les premières étapes fournissent un feedback rapidement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_déploiement_continu"><a class="anchor" href="#_déploiement_continu"></a><a class="link" href="#_déploiement_continu">Déploiement continu</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le <em>déploiement continu</em> (<em>continuous deployment</em>) doit permettre de déployer <strong>automatiquement</strong> en production tout changement</p>
</li>
<li>
<p>Peut conduire à mettre à jour le système en production plusieurs fois par jour</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="ulist">
<div class="title">Quelques exemples</div>
<ul>
<li>
<p><a href="https://netflixtechblog.com/deploying-the-netflix-api-79b6176cc3f0">Deploying the Netflix API</a></p>
</li>
<li>
<p><a href="https://www.infoq.com/presentations/Facebook-Release-Process/">The Facebook Mobile Release Process</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_infrastructure_as_code"><a class="anchor" href="#_infrastructure_as_code"></a><a class="link" href="#_infrastructure_as_code">Infrastructure as code</a></h5>
<div class="ulist">
<ul>
<li>
<p>L'<em>Infrastructure as code</em> consiste à gérer et installer les infrastructures (serveur physique, machine virtuelle, …) en utilisant des fichiers de description exécutables par la machine</p>
</li>
<li>
<p>Ces descriptions sont ensuite ajoutées dans le VCS pour maintenir les différentes versions</p>
</li>
<li>
<p>C&#8217;est une réponse à la question du passage à l&#8217;échelle pour l&#8217;installation de machines</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Infrastructure as code</div>
<p><a href="https://www.ansible.com/">Ansible</a>/Ansible Tower,
<a href="https://puppet.com/">Puppet</a>/ <a href="https://theforeman.org/">Foreman</a>,
<a href="https://www.chef.io/">Chef</a>,</p>
</div>
</div>
<div class="sect4">
<h5 id="_machine_virtuelle"><a class="anchor" href="#_machine_virtuelle"></a><a class="link" href="#_machine_virtuelle">Machine virtuelle</a></h5>
<div class="ulist">
<ul>
<li>
<p>Une <em>machine virtuelle</em> (VM) est une émulation d&#8217;un système informatique</p>
</li>
<li>
<p>Elles permettent d&#8217;optimiser l&#8217;usage des serveurs physiques et apportent de la souplesse</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Machine virtuelle</div>
<p><a href="https://www.virtualbox.org/">Virtualbox</a>,
<a href="https://en.wikipedia.org/wiki/QEMU">QEMU</a>,</p>
</div>
<div class="paragraph">
<p><a href="https://www.packer.io/">Packer</a>,
<a href="https://www.vagrantup.com/">Vagrant</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_conteneur_logiciel"><a class="anchor" href="#_conteneur_logiciel"></a><a class="link" href="#_conteneur_logiciel">Conteneur logiciel</a></h5>
<div class="ulist">
<ul>
<li>
<p>La virtualisation au niveau du système d&#8217;exploitation permet de mettre en place des espaces isolés nommés <em>conteneur</em></p>
</li>
<li>
<p>Dans un conteneur, les processus sont isolés et l&#8217;OS propose un mécanisme de gestion des ressources</p>
</li>
<li>
<p>C&#8217;est une version évoluées du mécanisme de <em>chroot</em><sup><span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Chroot"><i class="fa fa-wikipedia-w"></i></a></span></sup> disponible sous Unix</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Conteneur</div>
<p><a href="https://podman.io/">podman</a>,
<a href="https://www.docker.com/">Docker</a>,
<a href="https://linuxcontainers.org/">Linux Containers</a>,
<a href="https://openvz.org/Main_Page">OpenVZ</a>,</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rust"><a class="anchor" href="#_rust"></a><a class="link" href="#_rust">3. Rust</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_rust_types_composites_et_constructions_spécifiques"><a class="anchor" href="#_rust_types_composites_et_constructions_spécifiques"></a><a class="link" href="#_rust_types_composites_et_constructions_spécifiques">3.1. Rust: Types composites et constructions spécifiques</a></h3>
<div class="sect3">
<h4 id="_tableaux"><a class="anchor" href="#_tableaux"></a><a class="link" href="#_tableaux">3.1.1. Tableaux</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type primitif <a href="https://doc.rust-lang.org/std/primitive.array.html">tableau</a> permet de manipuler</p>
<div class="ulist">
<ul>
<li>
<p>des collections de taille fixe</p>
</li>
<li>
<p>allouées sur la pile</p>
</li>
<li>
<p>d&#8217;éléments de même type</p>
</li>
</ul>
</div>
</li>
<li>
<p>La création d&#8217;un tableau se fait :</p>
<div class="ulist">
<ul>
<li>
<p>à partir d&#8217;une liste d&#8217;éléments entre <code>[]</code> (<code>[1, 3, 5, 7]</code>), ou</p>
</li>
<li>
<p>à partir d&#8217;une expression et d&#8217;un nombre de copies (<code>[x; N]</code> <em>N</em> copies de <em>x</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;accès aux éléments se fait par indice (<code>t[0]</code>)</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/array.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut array: [i32; 3] = [0; 3];
array[1] = 1;
array[2] = 2;

assert_eq!([1, 2], &amp;array[1..]);

for x in array {
    print!("{} ", x);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_les_vecteurs"><a class="anchor" href="#_les_vecteurs"></a><a class="link" href="#_les_vecteurs">3.1.2. Les vecteurs</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour représenter un tableau de valeurs de taille variable, Rust propose le type <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a></p>
</li>
<li>
<p>Les vecteurs sont alloués dynamiquement sur le tas.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">création d&#8217;un vecteur (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v: Vec&lt;i32&gt; = Vec::new();
v.push(5);
v.push(6);
v.push(7);

let w: Vec&lt;i32&gt; = vec![5, 6, 7]; //macro équivalent</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Accéder aux éléments d&#8217;un vecteur (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v = vec![1, 2, 3, 4, 5];

let x: &amp;i32 = &amp;v[2]; // panique si l'index n'existe pas

match v.get(2) {
    Some(y) =&gt; println!("v[3] == {}", y),
    None =&gt; println!("index non-existant")
}

v[2] = 42; // car le vecteur v est mutable</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Initialisation avec une taille connue (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let n : usize = 100; <i class="conum" data-value="1"></i><b>(1)</b>
let zero_v = vec![0; n];
let one_v = vec![1; n];</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>usize</code> est le type entier pour les positions d&#8217;un vecteur.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Itérer sur un vecteur (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v = vec![1, 2, 3, 4, 5];

// itération non-mutable, i est de type &amp;i32
for i in &amp;v {
    println!("{}", i);
}

// itération mutable, i est de type &amp;mut i32
// on peut incrémenter chaque élément du vecteur
for i in &amp;mut v {
    *i += 1;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Itérer sur un vecteur sans référence (src/rust/exemples/vec.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut v = vec![1, 2, 3, 4, 5];

// itération directement sur le vecteur les éléments du vecteur
// sont « déplacés » dans i. v ne pourra plus être utilisé par la
// suite.
for i in v {
    println!("{}", i);
}

//v[0] = 15; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ERREUR : <em>borrow of moved value: `v`</em>. Nous verrons précisément ce point dans le cours sur le <em>Borrow Checker</em>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_généricité"><a class="anchor" href="#_généricité"></a><a class="link" href="#_généricité">3.1.3. Généricité</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type de <code>vec![1,2,3]</code> est <code>std::Vec&lt;i32&gt;</code></p>
</li>
<li>
<p>Le type de <code>vec!["a","b","c"]</code> est <code>std::Vec&lt;&amp;str&gt;</code></p>
</li>
<li>
<p><code>std::Vec&lt;T&gt;</code> est <a href="https://doc.rust-lang.org/book/ch10-01-syntax.html">générique de paramètre <code>T</code></a></p>
</li>
<li>
<p><code>T</code> peut être remplacé ici par tout autre type</p>
</li>
<li>
<p>Les méthodes de <code>std::Vec&lt;T&gt;</code> peuvent utiliser le type générique:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub fn push(&amp;mut self, value: T)   // empile un élément en fin de vecteur
pub fn pop(&amp;mut self) -&gt; Option&lt;T&gt; // dépile un élément</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_structures"><a class="anchor" href="#_structures"></a><a class="link" href="#_structures">3.1.4. Structures</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une structure est un type composite composé de membres</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/struct.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">struct Personne {
    nom: String,
    année_naissance: i32,
}

let mut ada = Personne {
    nom : String::from("Ada Lovelace"),
    année_naissance: 0,
};

println!("nom = {}", ada.nom);
ada.année_naissance = 1815;</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_constructeur"><a class="anchor" href="#_constructeur"></a><a class="link" href="#_constructeur">Constructeur</a></h5>
<div class="ulist">
<ul>
<li>
<p>On appelle <em>constructeur</em> une fonction qui retourne une instance de la structure.</p>
</li>
<li>
<p>Dans le cours suivant nous verrons comment associer directement des méthodes à une structure.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/struct.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn nouvelle_personne(nom: String, année: i32) -&gt; Personne {
    Personne {
        année_naissance: année,
        nom, // sucre syntaxique
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tuples"><a class="anchor" href="#_tuples"></a><a class="link" href="#_tuples">3.1.5. Tuples</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type primitif <a href="https://doc.rust-lang.org/std/primitive.tuple.html">tuples</a> regroupe un ensemble de valeurs de types hétérogènes</p>
<div class="listingblock">
<div class="title">src/rust/exemples/tuple.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let tuple = ("hello", 5, 'c'); <i class="conum" data-value="1"></i><b>(1)</b>

assert_eq!(tuple.0, "hello"); <i class="conum" data-value="2"></i><b>(2)</b>
assert_eq!(tuple.1, 5);
assert_eq!(tuple.2, 'c');

let (x, y, z) = tuple; <i class="conum" data-value="3"></i><b>(3)</b>
assert_eq!(z, 'c');</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>le type de <code>tuple</code> est <code>(&amp;'static str, i32, char)</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>accès aux champs par <code>.0</code>, <code>.1</code>, …</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><em>pattern matching</em> pour déconstruire le tuple</td>
</tr>
</table>
</div>
</li>
<li>
<p>Les <a href="https://doc.rust-lang.org/book/ch05-01-defining-structs.html#using-tuple-structs-without-named-fields-to-create-different-types">structures tuples</a> sont un cas particulier de structure où les membres ne sont pas nommés (similaires au type primitif tuple)</p>
<div class="listingblock">
<div class="title">src/rust/exemples/tuple.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">struct ColorRGB(u8, u8, u8);
let color = ColorRGB(255, 0, 0);

// On peut utiliser .0 .1 pour nommer les champs
println!("red channel = {}", color.0);

// On peut aussi déconstruire la structure avec du pattern matching
let ColorRGB(r, g, b) = color;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_enum"><a class="anchor" href="#_enum"></a><a class="link" href="#_enum">3.1.6. Enum</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les types <a href="https://doc.rust-lang.org/reference/items/enumerations.html"><code>Enum</code></a> sont des types disjoints.</p>
</li>
<li>
<p>Chaque instance ne peut avoir qu&#8217;un seul des types à la fois.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/enum.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">enum Variant { <i class="conum" data-value="1"></i><b>(1)</b>
    Rien,
    Nombre(i32),
    Texte(String),
}
    let v1: Variant = Variant::Rien;
    let v2: Variant = Variant::Nombre(42);
    let v3: Variant = Variant::Texte(String::from("Hello"));</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Variant</code> peut contenir au choix un entier signé, une chaîne ou rien du tout.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_pattern_matching"><a class="anchor" href="#_pattern_matching"></a><a class="link" href="#_pattern_matching">3.1.7. Pattern matching</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <a href="https://doc.rust-lang.org/book/ch06-02-match.html"><em>pattern matching</em></a> permet de</p>
<div class="ulist">
<ul>
<li>
<p>représenter un structure conditionnelle avec plusieurs branches</p>
</li>
<li>
<p>déconstruire les types composites</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le <em>pattern matching</em> est très pratique pour manipuler les types <code>Enum</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/enum.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn affiche(v: Variant) {
    match v {
        Variant::Rien =&gt; println!("Le variant est vide"),
        Variant::Nombre(n) =&gt; println!("Le variant contient le nombre {}", n),
        Variant::Texte(s) =&gt; println!("Le variant contient le texte {}", s),
    }
}
    affiche(v1);
    affiche(v2);
    affiche(v3);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_des_erreurs"><a class="anchor" href="#_gestion_des_erreurs"></a><a class="link" href="#_gestion_des_erreurs">3.1.8. Gestion des erreurs</a></h4>
<div class="ulist">
<ul>
<li>
<p>En C/C++, on représente souvent l&#8217;absence de valeur par un pointeur <a href="https://en.cppreference.com/w/cpp/language/nullptr"><code>nullptr</code></a>.</p>
<div class="ulist">
<ul>
<li>
<p>cet usage est cause de nombreuses erreurs difficiles à détecter, c&#8217;est pourquoi Rust interdit les références nulles.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Rust utilise le type <a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>Option&lt;T&gt;</code></a> avec deux variants</p>
<div class="ulist">
<ul>
<li>
<p><code>None</code> qui représente l&#8217;absence de valeur</p>
</li>
<li>
<p><code>Some(T)</code> qui représente une valeur de type <code>T</code> (<code>T</code> est un type générique)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn racine(n : f64) -&gt; Option&lt;f64&gt; {
    if n &gt; 0.0 {
        Some(n.sqrt())
    } else {
        None
    }
}
    racine(25.0);  // -&gt; Some(5.0)
    racine(-25.0); // -&gt; None
    
    if let Some(r) = racine(25.0) { <i class="conum" data-value="1"></i><b>(1)</b>
        println!("La racine est {}", r);
    } else {
        println!("Pas de racine réelle");
    }
    
    // panique si None
    let v : f64 = racine(25.0).unwrap(); 
    let v : f64 = racine(25.0).expect("erreur: racine d'un nombre négatif"); </code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/reference/expressions/if-expr.html#if-let-expressions"><code>if let</code></a> permet de déconstruire une valeur d&#8217;un type composite</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_stdresultte"><a class="anchor" href="#_stdresultte"></a><a class="link" href="#_stdresultte">std::Result&lt;T,E&gt;</a></h5>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/std/result/enum.Result.html"><code>Result</code></a> est semblable à une option mais permet d&#8217;encoder une erreur de type <code>E</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">enum Result&lt;T, E&gt; {
    Ok(T),
    Err(E)
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_erreurs_fatales"><a class="anchor" href="#_erreurs_fatales"></a><a class="link" href="#_erreurs_fatales">Erreurs fatales</a></h5>
<div class="ulist">
<ul>
<li>
<p>Souvent une fonction a intérêt à retourner un <code>Result</code> à l&#8217;appelant et lui laisser décider de la marche à suivre en cas d&#8217;erreur.</p>
</li>
<li>
<p>Parfois, cela n&#8217;a pas de sens et il vaut mieux arrêter le programme avec la macro <code>panic!()</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">panic!("This is not implemented yet.");</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_consommation_de_la_valeur_result"><a class="anchor" href="#_consommation_de_la_valeur_result"></a><a class="link" href="#_consommation_de_la_valeur_result">Consommation de la valeur <code>Result</code></a></h5>
<div class="ulist">
<ul>
<li>
<p>Contrairement à <code>Option`</code>, un <code>Result</code> doit toujours être utilisé.</p>
</li>
<li>
<p>Le compilateur génère un avertissement si un <code>Result</code> n&#8217;est pas consommé.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let r : Result&lt;File, std::io::Error&gt; = File::open("hello.txt");

let f : File = match r {
    Ok(fichier) =&gt; fichier,
    Err(erreur) =&gt; panic!("Erreur d'ouverture: {:?}", erreur),
};</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_conversions_entre_resultt_e_et_optiont"><a class="anchor" href="#_conversions_entre_resultt_e_et_optiont"></a><a class="link" href="#_conversions_entre_resultt_e_et_optiont">Conversions entre Result&lt;T, E&gt; et Option&lt;T&gt;</a></h5>
<div class="ulist">
<ul>
<li>
<p>Les types <code>Result</code> et <code>Option</code> sont proches.</p>
</li>
<li>
<p>Il est possible de convertir un <code>Result</code> en <code>Option</code> avec <code>res.ok()</code> et inversement avec <code>opt.ok_or(err)</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let x: Result&lt;u32, &amp;str&gt; = Ok(10);
assert_eq!(Some(10), x.ok());
let x: Result&lt;u32, &amp;str&gt; = Err("Erreur");
assert_eq!(None, x.ok());

assert_eq!(Ok(10), Some(10).ok_or("Erreur"));
let x : Option&lt;u32&gt; = None;
assert_eq!(Err("Erreur"), x.ok_or("Erreur"));</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_gestion_fine_derreurs"><a class="anchor" href="#_gestion_fine_derreurs"></a><a class="link" href="#_gestion_fine_derreurs">Gestion fine d&#8217;erreurs</a></h5>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let f = File::open("hello.txt");

let f = match f {
    Ok(fichier) =&gt; fichier,
    Err(erreur) =&gt; match erreur.kind() {
        ErrorKind::NotFound =&gt; match File::create("hello.txt") {
            Ok(fc) =&gt; fc,
            Err(e) =&gt; panic!("Erreur de création du fichier : {:?}", e),
        },
        autre_erreur =&gt; {
            panic!("Erreur d'ouverture du fichier : {:?}", autre_erreur)
        }
    },
};</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_raccourci_avec_expect"><a class="anchor" href="#_raccourci_avec_expect"></a><a class="link" href="#_raccourci_avec_expect">Raccourci avec expect</a></h5>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let f = File::open("hello.txt").expect("Échec à l'ouverture de hello.txt");</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_propagation_derreurs"><a class="anchor" href="#_propagation_derreurs"></a><a class="link" href="#_propagation_derreurs">Propagation d&#8217;Erreurs</a></h5>
<div class="ulist">
<ul>
<li>
<p>Vos propres fonctions peuvent retourner des erreurs</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn lire_fichier_1() -&gt; Result&lt;String, io::Error&gt; {
    let f = File::open("hello.txt");

    let mut f = match f {
        Ok(fichier) =&gt; fichier,
        Err(e) =&gt; return Err(e),
    };

    let mut s = String::new();

    match f.read_to_string(&amp;mut s) {
        Ok(_) =&gt; Ok(s),
        Err(e) =&gt; Err(e),
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_opérateur"><a class="anchor" href="#_opérateur"></a><a class="link" href="#_opérateur">Opérateur <code>?</code></a></h5>
<div class="ulist">
<ul>
<li>
<p>Écrire du code qui propage les erreurs est fastidieux</p>
</li>
<li>
<p>L&#8217;opérateur <code>?</code> peut-être utilisé dans les fonctions qui retournent <code>Result</code> pour en faciliter l&#8217;écriture</p>
<div class="ulist">
<ul>
<li>
<p>si le résultat est <code>Err</code>, l&#8217;opérateur <code>?</code> retourne l&#8217;erreur.</p>
</li>
<li>
<p>si le résultat est <code>Ok(x)</code>, l&#8217;opérateur <code>?</code> retourne <code>x</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/option.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn lire_fichier_2() -&gt; Result&lt;String, io::Error&gt; {
    let mut s = String::new();

    File::open("hello.txt")?.read_to_string(&amp;mut s)?; <i class="conum" data-value="1"></i><b>(1)</b>

    Ok(s)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>À chaque utilisation de ? si une erreur se produit, celle-ci est directement retournée et on sort de la fonction</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercice"><a class="anchor" href="#_exercice"></a><a class="link" href="#_exercice">3.1.9. Exercice</a></h4>
<div class="paragraph">
<p>Faire une somme de nombres imaginaires.</p>
</div>
<div class="listingblock">
<div class="title">src/rust/exemples/imag.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[derive(Debug,PartialEq)]
struct Imaginary {
    real: f64,
    im: f64,
}

fn sum(vs: &amp;Vec&lt;Imaginary&gt;) -&gt; Imaginary {
    let mut res = Imaginary {real:0.0, im: 0.0};
    for e in vs {
        res.real += e.real;
        res.im += e.im;
    }
    res
}

fn main() {
    let v = vec!(
        Imaginary{real:1.0, im:1.0}, Imaginary{real:2.0, im:2.0},
        Imaginary{real:3.0, im:3.0}, Imaginary{real:4.0, im:4.0},
        Imaginary{real:5.0, im:5.0});

    assert_eq!(Imaginary{real:15.0, im:15.0}, sum(&amp;v));
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_concepts_objet_en_rust"><a class="anchor" href="#_concepts_objet_en_rust"></a><a class="link" href="#_concepts_objet_en_rust">3.2. Concepts objet en Rust</a></h3>
<div class="sect3">
<h4 id="_introduction_4"><a class="anchor" href="#_introduction_4"></a><a class="link" href="#_introduction_4">3.2.1. Introduction</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les choix de conception du langage ne proposent pas formellement de notion d&#8217;objet</p>
</li>
<li>
<p>Selon les définitions, Rust supporte ou ne supporte pas la programmation objet</p>
</li>
<li>
<p>Les concepts du langage permettent d&#8217;implémenter les concepts objets de façon efficace et élégante</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_objet"><a class="anchor" href="#_objet"></a><a class="link" href="#_objet">3.2.2. Objet</a></h4>
<div class="ulist">
<ul>
<li>
<p>Lors de son exécution, un <em>système OO</em> est <strong>un ensemble d&#8217;objets qui interagissent</strong></p>
<div class="ulist">
<ul>
<li>
<p>les objets forment donc l'<em>aspect dynamique</em> (à l&#8217;exécution) d&#8217;un système OO</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un <em>objet</em> est formé de deux composants indissociables</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
son <em>état</em>
</td>
<td class="hdlist2">
<p>les valeurs prises par des variables le décrivant (<em>propriétés</em>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
son <em>comportement</em>
</td>
<td class="hdlist2">
<p>les opérations qui lui sont applicables</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Un objet est une <em>instance</em> d&#8217;une <em>classe</em></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Dans certains langages objet (<a href="https://selflanguage.org/">Self</a> ou les anciennes versions de <a href="https://fr.wikipedia.org/wiki/JavaScript">Javascript</a>), la notion de classe n&#8217;existe pas. Les objets sont alors créés à partir de modèles nommés <a href="https://fr.wikipedia.org/wiki/Programmation_orient%C3%A9e_prototype"><em>prototypes</em></a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Un objet peut avoir plusieurs types, i.e. supporter plusieurs interfaces</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_des_points_et_des_cercles"><a class="anchor" href="#_exemple_des_points_et_des_cercles"></a><a class="link" href="#_exemple_des_points_et_des_cercles">Exemple : des points et des cercles</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/points_and_circles.png" alt="points and circles" width="206" height="194">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Les objets <code>point1</code> et <code>point2</code> sont des points, <code>cercle1</code> est un cercle</p>
</li>
<li>
<p>L&#8217;état de chaque objet est représenté par la valeur de ses propriétés</p>
</li>
<li>
<p>Le centre du cercle est une référence sur un objet point</p>
</li>
<li>
<p>Le comportement n&#8217;est pas représenté au niveau des objets</p>
<div class="ulist">
<ul>
<li>
<p>une opération est invoquée par rapport à un objet</p>
</li>
<li>
<p>mais est rattachée à la classe (le code est partagé par tous les objets d&#8217;une classe)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les objets <code>point1</code> et <code>point2</code> sont égaux mais pas identiques</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_encapsulation_et_masquage_de_linformation"><a class="anchor" href="#_encapsulation_et_masquage_de_linformation"></a><a class="link" href="#_encapsulation_et_masquage_de_linformation">3.2.3. Encapsulation et masquage de l&#8217;information</a></h4>
<div class="ulist">
<ul>
<li>
<p>L'<em>encapsulation</em> consiste à regrouper au sein d&#8217;une unique entité des données et des routines les manipulant</p>
</li>
<li>
<p>Ce principe est souvent associé au <em>masquage de l&#8217;information</em> qui permet de cacher les détails d&#8217;implémentation</p>
</li>
<li>
<p>Ce sont des piliers de l&#8217;approche objet</p>
<div class="ulist">
<ul>
<li>
<p>isole les structures internes de leur utilisation et donc autorise leur modification sans impact sur l&#8217;interface</p>
</li>
<li>
<p>permet d&#8217;ajouter des règles de validation ou des contraintes d&#8217;intégrité sur les données</p>
</li>
<li>
<p>contrôle le <em>couplage</em> entre les modules</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_objets_en_rust"><a class="anchor" href="#_objets_en_rust"></a><a class="link" href="#_objets_en_rust">3.2.4. Objets en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust ne propose pas d&#8217;objet en tant que tel</p>
</li>
<li>
<p>Cependant, les valeurs d&#8217;un type se comportent de la même façon</p>
</li>
<li>
<p>De plus, par défaut, la structure interne des types Rust est privée</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let mut v : Vec&lt;i32&gt; = Vec::new();
    v.push(12);
    v.len = 15;
    println!("{:?}", v);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ rustc vec.rs
error[E0616]: field `len` of struct `Vec` is private
 --&gt; vec.rs:4:7
  |
4 |     v.len = 15;
  |       ^^^ private field

error: aborting due to previous error

For more information about this error, try `rustc --explain E0616`.</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_des_points_et_des_cercles_en_rust"><a class="anchor" href="#_exemple_des_points_et_des_cercles_en_rust"></a><a class="link" href="#_exemple_des_points_et_des_cercles_en_rust">Exemple : des points et des cercles en Rust</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let point1 = Point::from(1.0, 2.0);
assert_eq!(point1.abscissa(), 1.0);
assert_eq!(point1.ordinate(), 2.0);

let point2 = Point::from(1.0, 2.0);
assert_eq!(point2.abscissa(), 1.0);
assert_eq!(point2.ordinate(), 2.0);

let circle1 = Circle::from(point1, 2.0); <i class="conum" data-value="1"></i><b>(1)</b>
assert_eq!(circle1.center(), &amp;Point::from(1.0, 2.0));
assert_eq!(circle1.radius(), 2.0);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>la valeur de <code>point1</code> est déplacée et <code>point1</code> n&#8217;est donc plus valide</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_communication_par_messages"><a class="anchor" href="#_communication_par_messages"></a><a class="link" href="#_communication_par_messages">3.2.5. Communication par messages</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un objet solitaire n&#8217;a que peu d&#8217;intérêt ⇒ différents objets doivent pouvoir interagir</p>
</li>
<li>
<p>Un <em>message</em> est un moyen de communication (d&#8217;interaction) entre objets</p>
</li>
<li>
<p><strong>Les messages sont les seuls moyens d&#8217;interaction entre objets</strong></p>
<div class="ulist">
<ul>
<li>
<p>⇒ l&#8217;état interne ne doit pas être manipulé directement</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le (ou les) type(s) d&#8217;un objet détermine les messages qu&#8217;il peut recevoir</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_message"><a class="anchor" href="#_message"></a><a class="link" href="#_message">3.2.6. Message</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un message est une requête envoyée à un objet pour demander l&#8217;exécution d&#8217;une opération</p>
</li>
<li>
<p>Un message comporte trois composants:</p>
<div class="ulist">
<ul>
<li>
<p><strong>l&#8217;objet auquel il est envoyé</strong> (le destinataire du message),</p>
</li>
<li>
<p>le nom de l&#8217;opération à invoquer,</p>
</li>
<li>
<p>les paramètres effectifs.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_déplacer_un_cercle"><a class="anchor" href="#_exemple_déplacer_un_cercle"></a><a class="link" href="#_exemple_déplacer_un_cercle">Exemple : déplacer un cercle</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/moving_circle.png" alt="moving circle" width="347" height="297">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;utilisateur envoie un message à un objet (à une instance de) cercle</p>
</li>
<li>
<p>Le message se traduit par l&#8217;exécution de l&#8217;opération <code>translate(1.0, 2.0)</code> par l&#8217;objet cercle</p>
</li>
<li>
<p>Durant cette exécution, le cercle envoie un message à l&#8217;objet point (translater le cercle revient à translater son centre)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_méthodes_en_rust"><a class="anchor" href="#_méthodes_en_rust"></a><a class="link" href="#_méthodes_en_rust">3.2.7. Méthodes en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le concept de <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html"><em>méthode</em></a> implémente les messages</p>
</li>
<li>
<p>Une <em>méthode</em></p>
<div class="ulist">
<ul>
<li>
<p>est définie dans le contexte d&#8217;une structure, d&#8217;une énumération ou d&#8217;un trait,</p>
</li>
<li>
<p>possède toujours un premier paramètre nommé <code>self</code> et représentant l&#8217;instance sur laquelle la méthode est invoquée</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_le_rayon_du_cercle"><a class="anchor" href="#_exemple_le_rayon_du_cercle"></a><a class="link" href="#_exemple_le_rayon_du_cercle">Exemple : le rayon du cercle</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">impl Circle {
    /// Retourne le rayon du cercle.
    pub fn radius(&amp;self) -&gt; f64 {
        self.radius
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_déplacer_un_cercle_2"><a class="anchor" href="#_exemple_déplacer_un_cercle_2"></a><a class="link" href="#_exemple_déplacer_un_cercle_2">Exemple : déplacer un cercle</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let p = Point::from(6.0, 9.0);
let mut c = Circle::from(p, 5.0);

c.move_by(4.0, 1.0);
assert_eq!(c.center(), &amp;Point::from(10.0, 10.0));
assert_eq!(c.radius(), 5.0);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fonction_associée"><a class="anchor" href="#_fonction_associée"></a><a class="link" href="#_fonction_associée">3.2.8. Fonction associée</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html#associated-functions"><em>fonction associée</em></a> (<em>associated functions</em>) est une fonction définie dans le contexte d&#8217;une structure</p>
</li>
<li>
<p>Il est possible de définir une telle fonction sans le paramètre <code>self</code></p>
<div class="ulist">
<ul>
<li>
<p>invoquée par l&#8217;intermédiaire du nom de la structure (<code>Rectangle::square(3)</code>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cette notion est à rapprocher du concept de <em>méthode de classe</em></p>
</li>
<li>
<p>Une fonction qui retourne une instance d&#8217;une structure est dénommée <em>constructeur</em></p>
<div class="ulist">
<ul>
<li>
<p><code>Self</code> peut être utilisé pour référencer le type se trouvant après <code>impl</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">impl Point {
    /// Initialise un point à partir de coordonnées cartésiennes.
    pub fn from(x: f64, y: f64) -&gt; Self {
        Self {
            x,
            y,
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type"><a class="anchor" href="#_type"></a><a class="link" href="#_type">3.2.9. Type</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>type</em> est un modèle abstrait réunissant à un haut degré les traits essentiels de tous les êtres ou de tous les objets de même nature</p>
</li>
<li>
<p>En informatique, un <em>type (de donnée)</em> spécifie:</p>
<div class="ulist">
<ul>
<li>
<p>l&#8217;ensemble des valeurs possibles pour cette donnée (définition en <em>extension</em>),</p>
</li>
<li>
<p>l&#8217;ensemble des opérations applicables à cette donnée (définition en <em>intention</em>).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un type spécifie l'<em>interface</em> par laquelle une donnée peut être manipulée</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_un_type_déplaçable"><a class="anchor" href="#_exemple_un_type_déplaçable"></a><a class="link" href="#_exemple_un_type_déplaçable">Exemple : un type Déplaçable</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/deplacable.png" alt="deplacable" width="234" height="84">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_en_rust_les_traits"><a class="anchor" href="#_type_en_rust_les_traits"></a><a class="link" href="#_type_en_rust_les_traits">3.2.10. Type en Rust : les <em>traits</em></a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/book/ch10-02-traits.html"><em>trait</em></a> (<code>trait</code>) précise un ensemble d&#8217;opérations dont doit disposer un type</p>
</li>
<li>
<p>Une méthode d&#8217;un trait peut être abstraite ou disposer d&#8217;une implémentation par défaut</p>
</li>
<li>
<p>Un trait est proche de la notion d'<em>interface</em> ou de <em>classe abstraite</em> dans d&#8217;autres langages</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_le_trait_déplaçable"><a class="anchor" href="#_exemple_le_trait_déplaçable"></a><a class="link" href="#_exemple_le_trait_déplaçable">Exemple : le <em>trait</em> Déplaçable</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub trait Movable {
    /// Déplace l'élément d'un décalage donné
    fn move_by(&amp;mut self, dx: f64, dy: f64);

    /// Retourne true si l'élément se trouve à la position en paramètre.
    fn is_at(&amp;self, x: f64, y: f64) -&gt; bool;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_limplémentation_du_trait_déplaçable_dans_point"><a class="anchor" href="#_exemple_limplémentation_du_trait_déplaçable_dans_point"></a><a class="link" href="#_exemple_limplémentation_du_trait_déplaçable_dans_point">Exemple : l&#8217;implémentation du <em>trait</em> Déplaçable dans Point</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">impl Movable for Point {
    /// Déplace le point.
    /// # Examples
    /// 
    /// ```
    /// use shapes::movable::Movable;
    /// use shapes::point::Point;
    /// let mut point = Point::from(6.0, 9.0);
    /// 
    /// point.move_by(4.0, 1.0);
    /// assert_eq!(point.abscissa(), 10.0);
    /// assert_eq!(point.ordinate(), 10.0);
    /// ```
    fn move_by(&amp;mut self, dx: f64, dy: f64) {
        self.x += dx;
        self.y += dy;
    }

    /// Retourne true si le point est à la position en paramètre.
    fn is_at(&amp;self, x: f64, y: f64) -&gt; bool {
        self.x == x &amp;&amp; self.y == y
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe"><a class="anchor" href="#_classe"></a><a class="link" href="#_classe">3.2.11. Classe</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <em>classe</em> est un "modèle" (un "moule") pour une catégorie d&#8217;objets structurellement identiques</p>
</li>
<li>
<p>Une classe définit donc l&#8217;implémentation d&#8217;un objet (son état interne et le codage de ses opérations)</p>
</li>
<li>
<p>L&#8217;ensemble des classes décrit l'<em>aspect statique</em> d&#8217;un système OO</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_structure_dune_classe"><a class="anchor" href="#_structure_dune_classe"></a><a class="link" href="#_structure_dune_classe">Structure d&#8217;une classe</a></h5>
<div class="ulist">
<ul>
<li>
<p>Une classe comporte:</p>
<div class="ulist">
<ul>
<li>
<p>la définition des <em>attributs</em> (ou <em>variables d&#8217;instance</em>),</p>
</li>
<li>
<p>la <em>signature</em> des opérations (ou <em>méthodes</em>),</p>
</li>
<li>
<p>la <em>réalisation</em> (ou <em>définition</em>) des méthodes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Chaque instance aura sa propre copie des attributs (son état)</p>
</li>
<li>
<p>La signature d&#8217;une opération englobe son nom et le type de ses paramètres</p>
</li>
<li>
<p>L&#8217;ensemble des signatures de méthodes représente l&#8217;interface de la classe (publique)</p>
</li>
<li>
<p>L&#8217;ensemble des définitions d&#8217;attributs et de méthodes forme l&#8217;implémentation de la classe (privé)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_les_classes_cercle2d_et_point2d"><a class="anchor" href="#_exemple_les_classes_cercle2d_et_point2d"></a><a class="link" href="#_exemple_les_classes_cercle2d_et_point2d">Exemple : les classes <code>Cercle2D</code> et <code>Point2D</code></a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/classe_point_cercle.png" alt="classe point cercle" width="227" height="250">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Un rectangle représente une classe</p>
<div class="ulist">
<ul>
<li>
<p>1er pavé: nom de la classe</p>
</li>
<li>
<p>2ième pavé: attributs</p>
</li>
<li>
<p>3ième pavé: signature des méthodes</p>
</li>
</ul>
</div>
</li>
<li>
<p>en général, les attributs sont privés et les méthodes publiques</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_instanciation_dune_classe"><a class="anchor" href="#_instanciation_dune_classe"></a><a class="link" href="#_instanciation_dune_classe">Instanciation d&#8217;une classe</a></h5>
<div class="ulist">
<ul>
<li>
<p>Le mécanisme d'<em>instanciation</em> permet de créer des objets à partir d&#8217;une classe</p>
</li>
<li>
<p>Chaque objet est une instance d&#8217;une classe</p>
</li>
<li>
<p>Lors de l&#8217;instanciation,</p>
<div class="ulist">
<ul>
<li>
<p>de la mémoire est allouée pour l&#8217;objet,</p>
</li>
<li>
<p>l&#8217;objet est initialisé (appel du constructeur) afin de respecter l&#8217;invariant de la classe.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classes_en_rust"><a class="anchor" href="#_classes_en_rust"></a><a class="link" href="#_classes_en_rust">3.2.12. Classes en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les <a href="https://doc.rust-lang.org/book/ch05-01-defining-structs.html">structures</a> (<code>struct</code>) et les <a href="https://doc.rust-lang.org/book/ch06-01-defining-an-enum.html">énumérations</a> (<code>enum</code>) permettent de créer de nouveaux types de données</p>
</li>
<li>
<p>Les <em>champs</em> d&#8217;une structure ou les <em>variantes</em> d&#8217;une énumération peuvent être associés à des fonctions grâce à des <a href="https://doc.rust-lang.org/reference/items/implementations.html">blocs d&#8217;implémentation</a> (<code>impl</code>)</p>
</li>
<li>
<p>L&#8217;encapsulation est assurée par les différentes constructions du langage (fonctions, méthodes, structures, énumérations, modules, et constantes)</p>
<div class="ulist">
<ul>
<li>
<p>par défaut, tout est privé</p>
</li>
<li>
<p>le <a href="https://doc.rust-lang.org/book/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html#exposing-paths-with-the-pub-keyword">mot-clé <code>pub</code></a> permet d&#8217;exporter les constructions souhaitées</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_la_structure_cercle"><a class="anchor" href="#_exemple_la_structure_cercle"></a><a class="link" href="#_exemple_la_structure_cercle">Exemple : la structure Cercle</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use crate::movable::Movable;
use crate::point::Point;

pub struct Circle {
    center: Point,
    radius: f64,
}

/// Définit une structure pour un cercle en 2D.
/// # Examples
/// 
/// ```
/// use shapes::point::Point;
/// use shapes::circle::Circle;
/// 
/// let c = Circle::from(Point::from(6.0, 9.0), 5.0);
/// 
/// assert_eq!(c.center(), &amp;Point::from(6.0, 9.0));
/// assert_eq!(c.radius(), 5.0);
/// ```
/// 
impl Circle {
    /// Initialise un cercle à partir de son centre et de son rayon.
    pub fn from(center: Point, radius: f64) -&gt; Self {
        Self {
            center,
            radius,
        }
    }

    /// Retourne le centre du cercle.
    pub fn center(&amp;self) -&gt; &amp;Point {
        &amp;self.center
    }

    //tag::circle_radius[]
    /// Retourne le rayon du cercle.
    pub fn radius(&amp;self) -&gt; f64 {
        self.radius
    }
    //end::circle_radius[]
}

impl Movable for Circle {
    /// Déplace le cercle.
    /// # Examples
    /// 
    /// ```
    /// use shapes::movable::Movable;
    /// use shapes::point::Point;
    /// use shapes::circle::Circle;
    /// let mut p = Point::from(6.0, 9.0);
    /// let mut c = Circle::from(p, 5.0);
    /// 
    /// c.move_by(4.0, 1.0);
    /// assert_eq!(c.center(), &amp;Point::from(10.0, 10.0));
    /// assert_eq!(c.radius(), 5.0);
    /// ```
    fn move_by(&amp;mut self, dx: f64, dy: f64) {
        self.center.move_by(dx, dy);
    }

    /// Retourne true si le centre du cercle est à la position en paramètre.
    fn is_at(&amp;self, x: f64, y: f64) -&gt; bool {
        self.center.abscissa() == x &amp;&amp; self.center.ordinate() == y
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe_et_type"><a class="anchor" href="#_classe_et_type"></a><a class="link" href="#_classe_et_type">3.2.13. Classe et type</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une classe implémente un ou plusieurs types, i.e. respecte une ou plusieurs interfaces</p>
</li>
<li>
<p>Un objet peut avoir plusieurs types mais est une instance d&#8217;une seule classe</p>
</li>
<li>
<p>Des objets de classes différentes peuvent avoir le même type</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_cercles_et_points_sont_de_type_déplaçable"><a class="anchor" href="#_exemple_cercles_et_points_sont_de_type_déplaçable"></a><a class="link" href="#_exemple_cercles_et_points_sont_de_type_déplaçable">Exemple : cercles et points sont de type Déplaçable</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/classe_et_type.png" alt="classe et type" width="308" height="374">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sous_type"><a class="anchor" href="#_sous_type"></a><a class="link" href="#_sous_type">3.2.14. Sous-type</a></h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Un type T<sub>1</sub> est un <em>sous-type</em> d&#8217;un type T<sub>2</sub> si l&#8217;interface de T<sub>1</sub> contient l&#8217;interface de T<sub>2</sub>.</p>
</div>
<div class="paragraph">
<p>De façon duale, un type T<sub>1</sub> est un <em>sous-type</em> d&#8217;un type T<sub>2</sub> si l&#8217;ensemble des instances de T<sub>2</sub> inclut l&#8217;ensemble des instances de T<sub>1</sub>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Un sous-type possède une interface plus riche, i.e. au moins toutes les opérations du super-type</p>
</li>
<li>
<p>De manière équivalente, l&#8217;extension du super-type contient l&#8217;extension du sous-type, i.e. tout objet du sous-type est aussi instance du super-type</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_déplaçable_et_modifiable"><a class="anchor" href="#_exemple_déplaçable_et_modifiable"></a><a class="link" href="#_exemple_déplaçable_et_modifiable">Exemple : Déplaçable et Modifiable</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/deplacable_et_redimensionnable.png" alt="deplacable et redimensionnable" width="240" height="201">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_héritage"><a class="anchor" href="#_héritage"></a><a class="link" href="#_héritage">3.2.15. Héritage</a></h4>
<div class="ulist">
<ul>
<li>
<p>L'<em>héritage</em> permet de définir l&#8217;implémentation d&#8217;une classe à partir de l&#8217;implémentation d&#8217;une autre</p>
</li>
<li>
<p>Ce mécanisme permet, lors de la définition d&#8217;une nouvelle classe, de ne préciser que ce qui change par rapport à une classe existante</p>
</li>
<li>
<p>Une <em>hiérarchie de classes</em> permet de gérer la complexité, en ordonnant les classes au sein d&#8217;arborescences d&#8217;abstraction croissante</p>
</li>
<li>
<p>Si Y hérite de X, on dit que</p>
<div class="ulist">
<ul>
<li>
<p>Y est une classe <em>fille</em> (<em>sous-classe</em>, <em>classe dérivée</em>) et que</p>
</li>
<li>
<p>X est une classe <em>mère</em> (<em>super-classe</em>, <em>classe de base</em>)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_rectangle_et_rectangle_plein"><a class="anchor" href="#_exemple_rectangle_et_rectangle_plein"></a><a class="link" href="#_exemple_rectangle_et_rectangle_plein">Exemple : rectangle et rectangle plein</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/rectangle_et_rectangle_plein.png" alt="rectangle et rectangle plein" width="227" height="250">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_héritage_en_rust"><a class="anchor" href="#_héritage_en_rust"></a><a class="link" href="#_héritage_en_rust">3.2.16. Héritage en Rust</a></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Le langage Rust ne supporte pas l&#8217;héritage tel qu&#8217;il est décrit ci-dessus.</p>
</li>
<li>
<p>Le principe <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">Composition over inheritance</a> encourage l&#8217;utilisation de la composition par rapport à l&#8217;héritage pour la conception objet</p>
<div class="ulist">
<ul>
<li>
<p>ce principe est souvent utilisé dans les <em>Design Patterns</em></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Il est toutefois possible de manipuler des éléments sous la forme d'<em>objet trait</em> (<a href="https://doc.rust-lang.org/stable/book/ch17-02-trait-objects.html"><em>trait object</em></a>)</p>
</li>
<li>
<p>Un tel objet pointe vers une instance d&#8217;un type implémentant le trait concerné</p>
<div class="ulist">
<ul>
<li>
<p>la taille d&#8217;un objet trait ne peut pas être déterminée lors de la compilation</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le type d&#8217;un objet trait est construit à partir d&#8217;un type de pointeur (référence ou smart pointer), du mot-clé <code>dyn</code> et du nom du trait</p>
</li>
<li>
<p>Un objet trait dispose d&#8217;une <a href="https://en.wikipedia.org/wiki/Virtual_method_table"><em>table de méthodes virtuelles</em></a> (<em>vtable</em>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_objet_trait"><a class="anchor" href="#_exemple_objet_trait"></a><a class="link" href="#_exemple_objet_trait">Exemple : objet trait</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let c = Circle::from(Point::from(1.0, 1.0), 1.0);
let c_as_movable_ref : &amp;dyn Movable = &amp;c;
assert!(c_as_movable_ref.is_at(1.0, 1.0)); <i class="conum" data-value="1"></i><b>(1)</b>

let circle_as_movable_box : Box&lt;dyn Movable&gt; =
    Box::new(
        Circle::from(Point::from(1.0, 1.0), 1.0)
    );
assert!(circle_as_movable_box.is_at(1.0, 1.0)); <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Seules les méthodes du trait sont accessibles (typage statique)</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_héritage_et_sous_typage"><a class="anchor" href="#_héritage_et_sous_typage"></a><a class="link" href="#_héritage_et_sous_typage">3.2.17. Héritage et sous-typage</a></h4>
<div class="ulist">
<ul>
<li>
<p>L&#8217;héritage (ou <em>héritage d&#8217;implémentation</em>) est un mécanisme technique de réutilisation</p>
</li>
<li>
<p>Le sous-typage (ou <em>héritage d&#8217;interface</em>) décrit comment un objet peut être utilisé à la place d&#8217;un autre</p>
</li>
<li>
<p>Si Y est une sous-type de X, cela signifie que "Y est une sorte de X" (relation <em>IS-A</em>)</p>
</li>
<li>
<p>Dans un langage de programmation, les deux visions peuvent être représentées de la même façon:
le mécanisme d&#8217;héritage permet d&#8217;implémenter l&#8217;un ou l&#8217;autre</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_héritage_dimplémentation_et_dinterface"><a class="anchor" href="#_exemple_héritage_dimplémentation_et_dinterface"></a><a class="link" href="#_exemple_héritage_dimplémentation_et_dinterface">Exemple : héritage d&#8217;implémentation et d&#8217;interface</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/heritage_et_interface.png" alt="heritage et interface" width="491" height="374">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_polymorphisme"><a class="anchor" href="#_polymorphisme"></a><a class="link" href="#_polymorphisme">3.2.18. Polymorphisme</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le <em>polymorphisme</em> est l&#8217;aptitude qu&#8217;ont des objets à réagir différemment à un même message</p>
</li>
<li>
<p>L&#8217;intérêt est de pouvoir gérer une collection d&#8217;objets de façon homogène tout en conservant le comportement propre à chaque type d&#8217;objet</p>
</li>
<li>
<p>Une méthode commune à une hiérarchie de classe peut avoir plusieurs implémentations dans différentes classes</p>
</li>
<li>
<p>Une sous-classe peut <em>redéfinir</em> une méthode de sa super-classe pour spécialiser son comportement</p>
</li>
<li>
<p>Le choix de la méthode à appeler est retardé jusqu&#8217;à l&#8217;exécution du programme (<a href="https://en.wikipedia.org/wiki/Dynamic_dispatch"><em>dynamic dispatch</em></a>)</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_une_description_pour_les_rectangles"><a class="anchor" href="#_exemple_une_description_pour_les_rectangles"></a><a class="link" href="#_exemple_une_description_pour_les_rectangles">Exemple : une description pour les rectangles</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/description_des_rectangles.png" alt="description des rectangles" width="227" height="282">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_polymorphisme_en_rust"><a class="anchor" href="#_polymorphisme_en_rust"></a><a class="link" href="#_polymorphisme_en_rust">3.2.19. Polymorphisme en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>La <a href="https://en.wikipedia.org/wiki/Virtual_method_table">table des méthodes virtuelles</a> d&#8217;un objet trait permet de retarder le choix de la méthode à exécuter au moment de l&#8217;exécution</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Déplacer des formes</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut shapes : Vec&lt;Box&lt;dyn Movable&gt;&gt; = vec![
    Box::new(Point::from(1.0, 2.0)),
    Box::new(Circle::from(Point::from(3.0, 4.0), 5.0)),
    ];
for shape in shapes.iter_mut() {
    shape.move_by(1.0, 2.0);
}
assert!(shapes[0].is_at(2.0, 4.0));
assert!(shapes[1].is_at(4.0, 6.0));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe_abstraite"><a class="anchor" href="#_classe_abstraite"></a><a class="link" href="#_classe_abstraite">3.2.20. Classe abstraite</a></h4>
<div class="ulist">
<ul>
<li>
<p>Une <em>classe abstraite</em> représente un concept abstrait qui ne peux pas être instancié</p>
</li>
<li>
<p>En général, son comportement ne peut pas être intégralement implémenté à cause de son niveau de généralisation</p>
</li>
<li>
<p>Elle sera donc seulement utilisée comme classe de base dans une hiérarchie d&#8217;héritage</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_la_hiérarchie_dhéritage_des_figures"><a class="anchor" href="#_exemple_la_hiérarchie_dhéritage_des_figures"></a><a class="link" href="#_exemple_la_hiérarchie_dhéritage_des_figures">Exemple : La hiérarchie d&#8217;héritage des figures</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/hierarchie_heritage.png" alt="hierarchie heritage" width="477" height="201">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_classe_abstraite_en_rust"><a class="anchor" href="#_classe_abstraite_en_rust"></a><a class="link" href="#_classe_abstraite_en_rust">3.2.21. Classe abstraite en Rust</a></h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Rust ne comporte pas de notion aussi générale que celle de classe abstraite cependant les traits permettent d&#8217;approcher ce comportement dans certains contextes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_héritage_multiple_et_à_répétition"><a class="anchor" href="#_héritage_multiple_et_à_répétition"></a><a class="link" href="#_héritage_multiple_et_à_répétition">3.2.22. Héritage multiple et à répétition</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <em>héritage multiple</em> se produit lorsqu&#8217;une classe possède plusieurs super-classes</p>
</li>
<li>
<p>Un <em>héritage à répétition</em> se produit lorsqu&#8217;une classe hérite plusieurs fois d&#8217;une même super-classe</p>
</li>
<li>
<p>Ces types d&#8217;héritage peuvent provoquer des conflits aux niveaux des attributs et méthodes</p>
<div class="ulist">
<ul>
<li>
<p>deux classes de base peuvent posséder la même méthode,</p>
</li>
<li>
<p>un attribut peut être hérité selon plusieurs chemins dans le graphe d&#8217;héritage.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_exemple_une_hiérarchie_pour_les_véhicules"><a class="anchor" href="#_exemple_une_hiérarchie_pour_les_véhicules"></a><a class="link" href="#_exemple_une_hiérarchie_pour_les_véhicules">Exemple : une hiérarchie pour les véhicules</a></h5>
<div class="imageblock">
<div class="content">
<img src="figs/heritage_multiple.png" alt="heritage multiple" width="491" height="326">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Combien de numéros d&#8217;immatriculation possède la voiture amphibie ?</p>
</li>
<li>
<p>Quelle opération est invoquée quand une voiture amphibie reçoit le message <code>avance</code> ?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_modèles_mémoire"><a class="anchor" href="#_modèles_mémoire"></a><a class="link" href="#_modèles_mémoire">4. Modèles Mémoire</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_gestion_de_la_mémoire_2"><a class="anchor" href="#_gestion_de_la_mémoire_2"></a><a class="link" href="#_gestion_de_la_mémoire_2">4.1. Gestion de la mémoire</a></h3>
<div class="sect3">
<h4 id="_mémoire_physique_et_mémoire_virtuelle"><a class="anchor" href="#_mémoire_physique_et_mémoire_virtuelle"></a><a class="link" href="#_mémoire_physique_et_mémoire_virtuelle">4.1.1. Mémoire physique et mémoire virtuelle</a></h4>
<div class="imageblock right">
<div class="content">
<img src="figs/virtmem.svg" alt="Mémoire virtuelle" width="303" height="480">
</div>
<div class="title">Figure 1. Mémoire physique et mémoire virtuelle (source <span class="icon"><a class="image" href="https://commons.wikimedia.org/wiki/File:Memoire_virtuelle.svg?uselang=fr"><i class="fa fa-wikipedia-w"></i></a></span>)</div>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;accès à la mémoire physique d&#8217;un ordinateur est « simplifiée » par l&#8217;utilisation du mécanisme de <em>mémoire virtuelle</em></p>
<div class="ulist">
<ul>
<li>
<p>la mémoire virtuelle fournit une <strong>abstraction</strong> pour l&#8217;accès à la mémoire</p>
</li>
</ul>
</div>
</li>
<li>
<p>Ce mécanisme permet de</p>
<div class="ulist">
<ul>
<li>
<p>utiliser une mémoire de masse à la place de la mémoire vive</p>
</li>
<li>
<p>protéger les accès à la mémoire</p>
</li>
<li>
<p>partager des zones de mémoire entre processus</p>
</li>
</ul>
</div>
</li>
<li>
<p>La mémoire virtuelle repose sur de nombreux mécanismes pour son fonctionnement (<em>pagination</em> ou <em>segmentation</em>, <em>traduction d&#8217;adresses</em>, <em>Memory Management Unit</em> ou <em>MMU</em>, …)</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Références</div>
<ul>
<li>
<p>Article <span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/M%C3%A9moire_virtuelle"><i class="fa fa-wikipedia-w"></i></a></span> sur la mémoire virtuelle</p>
</li>
<li>
<p>Chapitre sur la <a href="https://fr.wikibooks.org/wiki/Fonctionnement_d%27un_ordinateur/La_m%C3%A9moire_virtuelle">mémoire virtuelle</a> du cours <a href="https://fr.wikibooks.org/wiki/Fonctionnement_d%27un_ordinateur">Fonctionnement d&#8217;un ordinateur</a></p>
</li>
<li>
<p>Présentation <a href="https://youtu.be/nXYXLuqsllY">Le processus de boot</a>, Samuel Ortiz, Devoxx FR, 2021</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mémoire_dun_processus"><a class="anchor" href="#_mémoire_dun_processus"></a><a class="link" href="#_mémoire_dun_processus">4.1.2. Mémoire d&#8217;un processus</a></h4>
<div class="imageblock right">
<div class="content">
<img src="figs/memlayout.png" alt="Mémoire d&#8217;un processus" width="201" height="597">
</div>
<div class="title">Figure 2. Mémoire d&#8217;un processus (source <span class="icon"><a class="image" href="https://commons.wikimedia.org/wiki/File:Typical_computer_data_memory_arrangement.png"><i class="fa fa-wikipedia-w"></i></a></span>)</div>
</div>
<div class="ulist">
<ul>
<li>
<p>L&#8217;OS et le matériel travaillent de concert pour que chaque processus ait l&#8217;impression</p>
<div class="ulist">
<ul>
<li>
<p>de disposer d&#8217;une vaste zone de mémoire contigüe</p>
</li>
<li>
<p>d&#8217;être seul à s&#8217;exécuter</p>
</li>
</ul>
</div>
</li>
<li>
<p>La zone du programme comprend</p>
<div class="ulist">
<ul>
<li>
<p>le segment <em>text</em> qui contient le code du programme</p>
</li>
<li>
<p>le segment des données non initialisées (<em>Block Stating Symbol</em> ou <em>BSS</em>)</p>
</li>
<li>
<p>le segment des données initialisées (<em>Data</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Le tas (<em>heap</em>) représente la mémoire allouée dynamiquement</p>
<div class="ulist">
<ul>
<li>
<p>croît vers les adresses hautes</p>
</li>
</ul>
</div>
</li>
<li>
<p>La mémoire libre sert de réserve</p>
</li>
<li>
<p>La pile (<em>Stack</em>) conserve les variables locales d&#8217;une fonction</p>
<div class="ulist">
<ul>
<li>
<p>débute à la plus haute adresse et croît vers les adresses basses</p>
</li>
<li>
<p>contient un cadre (<em>frame</em>) pour chaque fonction</p>
</li>
<li>
<p>lors d&#8217;un appel de fonction, sont empilés l&#8217;adresse de retour de la fonction, les paramètres, les variables locales de la fonction</p>
</li>
<li>
<p>lorsque l&#8217;on quitte une fonction, le cadre correspondant est supprimé</p>
</li>
<li>
<p>sa taille est réservée statiquement</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Référence</div>
<ul>
<li>
<p><a href="https://ilay.org/yann/articles/mem/">Gestion de la mémoire en C</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_problèmes_et_erreurs_liés_à_la_mémoire"><a class="anchor" href="#_problèmes_et_erreurs_liés_à_la_mémoire"></a><a class="link" href="#_problèmes_et_erreurs_liés_à_la_mémoire">4.1.3. Problèmes et erreurs liés à la mémoire</a></h4>
<div class="ulist">
<ul>
<li>
<p>De nombreuses erreurs peuvent conduire à des problèmes d&#8217;utilisation de la mémoire</p>
</li>
<li>
<p>Les exemples suivants sont en langage C</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Déréférencement d&#8217;un pointeur null ou invalide</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int *ptr; // pointeur non initialisé
int var = *ptr; // déréférencement invalide</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Références multiples à une même zone mémoire</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int* ptr = malloc(sizeof(int)); // alloue une zone mémoire pour un entier
int* ptr2 = ptr; // ptr2 pointe sur la même zone mémoire
*ptr = 5; // OK
free(ptr); // libère la zone
ptr = NULL;
// ...
*ptr2 = 10; // accès à la zone déjà libérée</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Fuite mémoire (allocation sans désallocation)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int* ptr = malloc(sizeof(int)); // alloue une zone mémoire pour un entier
ptr = malloc(sizeof(int)); // ptr est réutilisé (pas de free préalable =&gt; memory leak)
free(ptr); // libération du second malloc</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Passage d&#8217;un argument par valeur</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">void set(int i) {
    i = 3; // la variable locale est modifiée
}
int main(void) {
    int i = 2;
    set(i); // lors de l'appel, la valeur de i est copiée sur la pile
    // la valeur de i n'a pas changée
    return 0;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Adressage sur la pile</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">char *init_string() {
	char buff[16]; // le tableau est alloué sur la pile (variable locale)
    // ...
	return buff;
}
int main(void) {
	char *str = init_string(); // str pointe sur une zone invalide (frame de init_string)
	return 0;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Dépassement de l&#8217;espace alloué</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int[] ptr = malloc(10 * sizeof(int)); // alloue une zone pour 10 entier (ptr[0] à ptr[9])
int a = ptr[10]; // accès au-delà de la zone alloué</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Désallocation d&#8217;un zone non allouée (ou désallocations multiples)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">int *ptr; // pointeur non initialisé
free(ptr); // libération d'une zone non allouée</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_réduire_le_risque_derreurs_liées_à_la_mémoire"><a class="anchor" href="#_réduire_le_risque_derreurs_liées_à_la_mémoire"></a><a class="link" href="#_réduire_le_risque_derreurs_liées_à_la_mémoire">4.1.4. Réduire le risque d&#8217;erreurs liées à la mémoire</a></h4>
<div class="ulist">
<ul>
<li>
<p>Comme vu précédemment, les risques d&#8217;erreurs liées à l&#8217;utilisation de la mémoire sont nombreux</p>
</li>
<li>
<p>Il est donc raisonnable de vouloir simplifier la tâche du développeur</p>
</li>
<li>
<p>Deux approches sont possibles</p>
<div class="ulist">
<ul>
<li>
<p>proposer une gestion automatique de la mémoire (Java, Python, …)</p>
</li>
<li>
<p>proposer un modèle plus strict et des bibliothèques (Rust)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_gestion_automatique_de_la_mémoire"><a class="anchor" href="#_gestion_automatique_de_la_mémoire"></a><a class="link" href="#_gestion_automatique_de_la_mémoire">4.1.5. Gestion automatique de la mémoire</a></h4>
<div class="ulist">
<ul>
<li>
<p>La gestion automatique de la mémoire s&#8217;appuie sur un processus particulier dénommé <em>ramasse-miettes</em> (<em>garbage collector</em>)</p>
</li>
<li>
<p>Il est responsable de la libération de la mémoire allouée à des objets qui ne sont plus utiles</p>
<div class="ulist">
<ul>
<li>
<p>détermine quels objets ne peuvent plus être utilisés par le programme</p>
</li>
<li>
<p>récupère l&#8217;espace occupé par ces objets</p>
</li>
</ul>
</div>
</li>
<li>
<p>Différentes approches peuvent être utilisées</p>
<div class="ulist">
<ul>
<li>
<p>le comptage de références,</p>
</li>
<li>
<p>les algorithmes traversant,</p>
</li>
<li>
<p>les algorithmes générationnels</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un ramasse-miettes possède plusieurs avantages</p>
<div class="ulist">
<ul>
<li>
<p>élimine presque totalement les problèmes de désallocation de la mémoire</p>
</li>
<li>
<p>peut optimiser les allocations/désallocations (meilleures performances)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Un ramasse-miettes comporte plusieurs inconvénients</p>
<div class="ulist">
<ul>
<li>
<p>s&#8217;exécute en parallèle du programme (ralentissements)</p>
</li>
<li>
<p>s&#8217;exécute <em>de temps en temps</em> (peu prévisible, utilisation de plus de mémoire)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approches par comptage de références</div>
<ul>
<li>
<p>Chaque zone mémoire alloués est associée à un compteur qui matérialise le nombre de références à cette zone</p>
</li>
<li>
<p>Les zones ayant un compteur à zéro peuvent être supprimées</p>
</li>
<li>
<p>Permet la libération rapide des zones</p>
</li>
<li>
<p>La gestion des compteurs est coûteuse en temps de calcul et en espace mémoire</p>
</li>
<li>
<p>Les cycles dans le graphe des références ne sont pas gérés</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approches traversantes</div>
<ul>
<li>
<p>L&#8217;algorithme parcourt les objets en mémoires pour déterminer s&#8217;ils sont accessibles</p>
</li>
<li>
<p>Le parcours est initialisé à partir de références racines</p>
</li>
<li>
<p>Les objets qui n&#8217;ont pas été visités peuvent être éliminés</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Approches générationnelles</div>
<ul>
<li>
<p>L&#8217;idée est que la plupart des objets vont avoir une durée de vie courte</p>
</li>
<li>
<p>Les objets sont répartis en plusieurs générations (2 ou 3 en général)</p>
</li>
<li>
<p>Un objet passe à la génération supérieure s&#8217;il n&#8217;a pas été éliminé lors de l&#8217;exécution du ramasse-miette</p>
</li>
<li>
<p>Des algorithmes différents peuvent être appliqués aux différentes générations</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Références</div>
<ul>
<li>
<p>Article <span class="icon"><a class="image" href="https://fr.wikipedia.org/wiki/Ramasse-miettes_(informatique)"><i class="fa fa-wikipedia-w"></i></a></span> sur le ramasse-miette</p>
</li>
<li>
<p><a href="https://www.baeldung.com/jvm-garbage-collectors">JVM Garbage Collectors</a>, <em>Baeldung</em></p>
</li>
<li>
<p><a href="https://blogs.oracle.com/javamagazine/understanding-garbage-collectors">Understanding Garbage Collectors</a>, <em>Christine H. Flood</em>, Java Magazine</p>
</li>
<li>
<p><a href="https://blogs.oracle.com/javamagazine/understanding-the-jdks-new-superfast-garbage-collectors">Understanding the JDK’s New Superfast Garbage Collectors</a>, <em>Raoul-Gabriel Urma</em> &amp; <em>Richard Warburton</em>, Java Magazine</p>
</li>
<li>
<p><a href="https://blogs.oracle.com/javamagazine/epsilon-the-jdks-do-nothing-garbage-collector">Epsilon: The JDK’s Do-Nothing Garbage Collector</a>, <em>Andrew Binstock</em>, Java Magazine</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pointeurs_en_rust"><a class="anchor" href="#_pointeurs_en_rust"></a><a class="link" href="#_pointeurs_en_rust">4.1.6. Pointeurs en Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le type de pointeur le plus simple en Rust est la référence (symbole <code>&amp;</code>)</p>
<div class="ulist">
<ul>
<li>
<p>emprunte une valeur</p>
</li>
<li>
<p>pas de fonctionnalités supplémentaires</p>
</li>
<li>
<p>pas de surcoût (par rapport à un pointeur en C)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les <em>smart pointers</em> sont des structures (définies dans une bibliothèque)</p>
<div class="ulist">
<ul>
<li>
<p>se comportant comme des pointeurs</p>
</li>
<li>
<p>fournissant des fonctionnalités complémentaires</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointers_2"><a class="anchor" href="#_smart_pointers_2"></a><a class="link" href="#_smart_pointers_2">4.1.7. Smart pointers</a></h4>
<div class="ulist">
<ul>
<li>
<p>Plusieurs types de <a href="https://doc.rust-lang.org/book/ch15-00-smart-pointers.html">smart pointers</a> sont fournis par la bibliothèque standard</p>
</li>
<li>
<p>Ils sont en général implémentés avec des structures et possèdent la donnée qu&#8217;ils encapsulent</p>
</li>
<li>
<p>Chaque type de smart pointer propose des fonctionnalités spécifiques</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Box&lt;T&gt;</code>
</td>
<td class="hdlist2">
<p>alloue des valeurs sur le tas</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Rc&lt;T&gt;</code>
</td>
<td class="hdlist2">
<p>permet la propriété multiple par comptage de références</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>RefCell&lt;T&gt;</code>, <code>Ref&lt;T&gt;</code> et <code>RefMut&lt;T&gt;</code>
</td>
<td class="hdlist2">
<p>contrôle les règles d&#8217;emprunt à l&#8217;exécution plutôt qu&#8217;à la compilation</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Ils implémentent les traits <code>Deref</code> et <code>Drop</code></p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>Deref</code>
</td>
<td class="hdlist2">
<p>fait qu&#8217;une instance se comporte comme une référence</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Drop</code>
</td>
<td class="hdlist2">
<p>permet d&#8217;adapter le code exécuté quand le pointeur quitte sa portée</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>De nombreuses alternatives existent: <a href="https://doc.rust-lang.org/std/cell/struct.Cell.html"><code>Cell&lt;T&gt;</code></a>, <a href="https://doc.rust-lang.org/std/cell/struct.OnceCell.html"><code>OnceCell&lt;T&gt;</code></a>, <a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc&lt;T&gt;</code></a> , <a href="https://doc.rust-lang.org/std/sync/struct.Mutex.html"><code>Mutex</code></a>, <a href="https://doc.rust-lang.org/std/sync/struct.RwLock.html"><code>RwLock</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointer_boxt"><a class="anchor" href="#_smart_pointer_boxt"></a><a class="link" href="#_smart_pointer_boxt">4.1.8. Smart pointer <code>Box&lt;T&gt;</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Le smart pointer <a href="https://doc.rust-lang.org/std/boxed/index.html"><code>Box&lt;T&gt;</code></a> permet d&#8217;allouer une valeur sur le tas</p>
</li>
<li>
<p>Pas de coût supplémentaire</p>
</li>
<li>
<p>Pas d&#8217;autres capacités particulières</p>
</li>
<li>
<p>Utilité</p>
<div class="ulist">
<ul>
<li>
<p>quand la taille d&#8217;un type ne peut pas être connue à la compilation</p>
</li>
<li>
<p>pour éviter de copier une grande quantité de données lors du transfert de propriété</p>
</li>
<li>
<p>pour manipuler des objets traits</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_le_trait_deref"><a class="anchor" href="#_le_trait_deref"></a><a class="link" href="#_le_trait_deref">4.1.9. Le trait <code>Deref</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Le trait <a href="https://doc.rust-lang.org/std/ops/trait.Deref.html"><code>Deref</code></a> permet d&#8217;adapter l&#8217;opérateur de déréférencement <code>*</code></p>
</li>
<li>
<p>Un smart pointer peut de cette façon être manipulé comme une référence</p>
</li>
<li>
<p>Implémenter ce trait nécessite de</p>
<div class="ulist">
<ul>
<li>
<p>définir le type <code>Target</code></p>
</li>
<li>
<p>implémenter la fonction <code>fn deref(&amp;self) &#8594; &amp;Self::Target</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">use std::ops::Deref;

struct MyBox&lt;T&gt;(T);

impl&lt;T&gt; Deref for MyBox&lt;T&gt; {
    type Target = T;

    fn deref(&amp;self) -&gt; &amp;Self::Target {
        &amp;self.0
    }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;expression <code>*x</code> si <code>x</code> est une structure est réécrite <code>*(x.deref())</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_le_trait_drop"><a class="anchor" href="#_le_trait_drop"></a><a class="link" href="#_le_trait_drop">4.1.10. Le trait <code>Drop</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Le trait <a href="https://doc.rust-lang.org/std/ops/trait.Drop.html"><code>Drop</code></a> permet d&#8217;adapter le code exécuté lorsqu&#8217;un smart pointer sort de sa portée (<em>destructeur</em>)</p>
</li>
<li>
<p>Implémenter ce trait consiste à définir la fonction <code>fn drop(&amp;mut self)</code></p>
</li>
<li>
<p>Cette fonction ne peut pas être appelée explicitement mais l&#8217;est par le compilateur</p>
<div class="ulist">
<ul>
<li>
<p>il est toutefois possible de forcer l&#8217;appel en utilisant <a href="https://doc.rust-lang.org/std/mem/fn.drop.html"><code>std::mem::drop</code></a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointer_rct"><a class="anchor" href="#_smart_pointer_rct"></a><a class="link" href="#_smart_pointer_rct">4.1.11. Smart pointer <code>Rc&lt;T&gt;</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>La structure <a href="https://doc.rust-lang.org/std/rc/index.html"><code>Rc&lt;T&gt;</code></a> permet de partager la propriété d&#8217;une valeur allouée sur le tas entre plusieurs propriétaires</p>
<div class="ulist">
<ul>
<li>
<p>elle utilise un système de comptage de références (<em>Reference Counted</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>L&#8217;appel de <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#impl-Clone"><code>clone</code></a> crée un nouveau pointeur sur la même valeur</p>
<div class="ulist">
<ul>
<li>
<p>et incrémente le compteur de références</p>
</li>
<li>
<p>le compteur est consultable avec la méthode <a href="https://doc.rust-lang.org/std/rc/struct.Rc.html#method.strong_count"><code>Rc::strong_count</code></a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Quand le dernier pointeur <code>Rc</code> est détruit, la valeur est elle-même détruite</p>
</li>
<li>
<p>Cette structure ne peut pas être utilisée dans un contexte multi-thread</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">enum List {
    Cons(i32, Rc&lt;List&gt;), <i class="conum" data-value="1"></i><b>(1)</b>
    Nil,
}

use crate::List::{Cons, Nil};
use std::rc::Rc;

fn main() {
    let a = Rc::new(Cons(5, Rc::new(Cons(10, Rc::new(Nil)))));
    let b = Cons(3, Rc::clone(&amp;a)); <i class="conum" data-value="2"></i><b>(2)</b>
    let c = Cons(4, Rc::clone(&amp;a));
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Le type de smart pointer est <code>Rc</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>Rc::clone</code> incrémente le comptage des références</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_interior_mutability_pattern"><a class="anchor" href="#_interior_mutability_pattern"></a><a class="link" href="#_interior_mutability_pattern">4.1.12. Interior Mutability Pattern</a></h4>
<div class="ulist">
<ul>
<li>
<p>La vérification à la compilation du bon usage de la mémoire apporte une grande fiabilité</p>
</li>
<li>
<p>Cependant, dans certaines circonstances, il est utile de pouvoir affaiblir ces contraintes pour une plus grande flexibilité</p>
</li>
<li>
<p>Le pattern <a href="https://doc.rust-lang.org/std/cell/index.html"><em>Interior Mutability</em></a> permet d&#8217;obtenir plusieurs références sur un objet tout en permettant sa modification</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/struct.Cell.html"><code>Cell&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>permet de déplacer la valeur depuis et vers le container</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html"><code>RefCell&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>contrôle les règles d&#8217;emprunt à l&#8217;exécution plutôt qu&#8217;à la compilation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://doc.rust-lang.org/std/cell/struct.OnceCell.html"><code>OnceCell&lt;T&gt;</code></a>
</td>
<td class="hdlist2">
<p>pour des valeurs qui ne doivent être fixées qu&#8217;une unique fois</p>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_smart_pointer_refcellt"><a class="anchor" href="#_smart_pointer_refcellt"></a><a class="link" href="#_smart_pointer_refcellt">4.1.13. Smart pointer <code>RefCell&lt;T&gt;</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>La structure <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html"><code>RefCell&lt;T&gt;</code></a> permet de retarder la vérification des règles d&#8217;emprunt <strong>au moment de l&#8217;exécution</strong> (<em>dynamic borrowing</em>)</p>
<div class="ulist">
<ul>
<li>
<p>est propriétaire de la donnée qu&#8217;il contient</p>
</li>
<li>
<p>panique si la vérification échoue</p>
</li>
</ul>
</div>
</li>
<li>
<p>Les méthode <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html#method.borrow"><code>borrow</code></a> et <a href="https://doc.rust-lang.org/std/cell/struct.RefCell.html#method.borrow_mut"><code>borrow_mut</code></a> permettent de récupérer une référence sur l&#8217;objet encapsulé</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[derive(Debug)]
enum List {
    Cons(Rc&lt;RefCell&lt;i32&gt;&gt;, Rc&lt;List&gt;),
    Nil,
}

use crate::List::{Cons, Nil};
use std::cell::RefCell;
use std::rc::Rc;

fn main() {
    let value = Rc::new(RefCell::new(5));

    let a = Rc::new(Cons(Rc::clone(&amp;value), Rc::new(Nil)));

    let b = Cons(Rc::new(RefCell::new(3)), Rc::clone(&amp;a));
    let c = Cons(Rc::new(RefCell::new(4)), Rc::clone(&amp;a));

    *value.borrow_mut() += 10;

    println!("a after = {a:?}"); // a after = Cons(RefCell { value: 15 }, Nil)
    println!("b after = {b:?}"); // b after = Cons(RefCell { value: 3 }, Cons(RefCell { value: 15 }, Nil))
    println!("c after = {c:?}"); // c after = Cons(RefCell { value: 4 }, Cons(RefCell { value: 15 }, Nil))
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cas_dutilisation_de_quelques_smart_pointers"><a class="anchor" href="#_cas_dutilisation_de_quelques_smart_pointers"></a><a class="link" href="#_cas_dutilisation_de_quelques_smart_pointers">4.1.14. Cas d&#8217;utilisation de quelques smart pointers</a></h4>
<div class="ulist">
<ul>
<li>
<p><code>Rc&lt;T&gt;</code> permet d&#8217;avoir <strong>plusieurs propriétaires</strong> pour une même donnée;
<code>Box&lt;T&gt;</code> et <code>RefCell&lt;T&gt;</code> n&#8217;ont qu'<strong>un seul propriétaire</strong>.</p>
</li>
<li>
<p><code>Box&lt;T&gt;</code> permet des <strong>emprunts immuables ou mutables à la compilation</strong>;
Rc&lt;T&gt; permet uniquement des <strong>emprunts immuables, vérifiés à la compilation</strong>;
RefCell&lt;T&gt; permet des <strong>emprunts immuables ou mutables, vérifiés à l&#8217;exécution</strong>.</p>
</li>
<li>
<p>Comme <code>RefCell&lt;T&gt;</code> permet des emprunts mutables, vérifiés à l&#8217;exécution, vous pouvez muter la valeur à l&#8217;intérieur du <code>RefCell&lt;T&gt;</code> même si le <code>RefCell&lt;T&gt;</code> est immuable.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_unsafe_rust"><a class="anchor" href="#_unsafe_rust"></a><a class="link" href="#_unsafe_rust">4.1.15. Unsafe Rust</a></h4>
<div class="ulist">
<ul>
<li>
<p>Cette <a href="https://doc.rust-lang.org/reference/unsafety.html">partie du langage</a> permet de contourner l&#8217;analyse statique quand elle est trop conservative</p>
</li>
<li>
<p>Un bloc <code>unsafe</code> donne accès à cinq <em>super-pouvoirs</em></p>
<div class="ulist">
<ul>
<li>
<p>déréférencer un pointeur brut</p>
</li>
<li>
<p>faire appel à une fonction ou une méthode non sécurisée</p>
</li>
<li>
<p>lire ou modifier une variable statique mutable</p>
</li>
<li>
<p>implémenter un trait non sécurisé</p>
</li>
<li>
<p>accéder aux champs des union</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let mut nombre = 5;

let r1 = &amp;nombre as *const i32;
let r2 = &amp;mut nombre as *mut i32;

unsafe {
    println!("r1 vaut : {}", *r1);
    println!("r2 vaut : {}", *r2);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modèle_mémoire_rust_propriété_et_emprunts"><a class="anchor" href="#_modèle_mémoire_rust_propriété_et_emprunts"></a><a class="link" href="#_modèle_mémoire_rust_propriété_et_emprunts">4.2. Modèle mémoire Rust: propriété et emprunts</a></h3>
<div class="sect3">
<h4 id="_objectifs"><a class="anchor" href="#_objectifs"></a><a class="link" href="#_objectifs">4.2.1. Objectifs</a></h4>
<div class="paragraph">
<p>L&#8217;innovation majeure de Rust est son modèle mémoire qui combine:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>des vérifications statiques qui permettent de détecter les problèmes mémoire</p>
</li>
<li>
<p>des abstractions à coût nul qui permettent de générer un code efficace</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Nous allons étudier les notions que Rust introduit pour garantir que les programmes sont corrects en mémoire, en particulier les notions de <em>Propriété</em> (Ownership) et <em>Emprunt</em> (Borrow).</p>
</div>
</div>
<div class="sect3">
<h4 id="_mutabilité"><a class="anchor" href="#_mutabilité"></a><a class="link" href="#_mutabilité">4.2.2. Mutabilité</a></h4>
<div class="ulist">
<ul>
<li>
<p>Par défaut les variables sont immutables</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">    let a = 1;
    let mut b = 1;
    a = 2; // erreur: Cannot assign twice to immutable variable a
    b = 2; // ok</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_les_variables_locales_sont_allouées_sur_la_pile"><a class="anchor" href="#_les_variables_locales_sont_allouées_sur_la_pile"></a><a class="link" href="#_les_variables_locales_sont_allouées_sur_la_pile">4.2.3. Les variables locales sont allouées sur la pile</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let a : u32 = 1;
    let b : f32 = 3.1415;
    let c : [u32; 3] = [1, 2, 3];
    let d = [0; 1 &lt;&lt; 30]; // tableau avec 2^30 zéros =&gt; débordement de pile
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Les types primitifs de Rust sont alloués sur la pile.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_allocation_sur_le_tas"><a class="anchor" href="#_allocation_sur_le_tas"></a><a class="link" href="#_allocation_sur_le_tas">4.2.4. Allocation sur le tas</a></h4>
<div class="ulist">
<ul>
<li>
<p>Rust permet aussi d&#8217;allouer dynamiquement des objets sur le tas.</p>
</li>
<li>
<p>Par exemple, les vecteurs de type <a href="https://doc.rust-lang.org/std/vec/struct.Vec.html"><code>Vec&lt;T&gt;</code></a> sont alloués sur le tas.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">let v : Vec&lt;u32&gt; = vec![1,2,3]; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Ici <code>v</code> est une variable locale (sur la pile) qui contient un pointeur vers une adresse du tas où l&#8217;objet de type <code>Vec&lt;u32&gt;</code> est alloué.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_propriétaire"><a class="anchor" href="#_propriétaire"></a><a class="link" href="#_propriétaire">4.2.5. Propriétaire</a></h4>
<div class="paragraph">
<p>Pour toute donnée, rust définit une variable <a href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html"><em>propriétaire</em></a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>Chaque valeur a un propriétaire.</p>
</li>
<li>
<p>À tout moment il ne peut y avoir qu&#8217;un et un seul propriétaire.</p>
</li>
<li>
<p>Quand le propriétaire devient <em>hors-portée</em>, la valeur est supprimée.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn test() {
    let a = 1.0; <i class="conum" data-value="1"></i><b>(1)</b>
    let v = vec![1,2,3]; <i class="conum" data-value="2"></i><b>(2)</b>
    // fin du bloc <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>a</code> est propriétaire du scalaire</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>v</code> est propriétaire du vecteur</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>En fin de bloc <code>a</code> et <code>v</code> sont <em>hors-portée</em>. Leur mémoire est automatiquement libérée par rust. Le flottant <code>1.0</code> est dépilé et le vecteur désalloué avec un appel à <code>`drop()</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_trait_copy"><a class="anchor" href="#_trait_copy"></a><a class="link" href="#_trait_copy">4.2.6. Trait <code>Copy</code></a></h4>
<div class="ulist">
<ul>
<li>
<p>Les types primitifs (alloués sur la pile) implémentent le trait <a href="https://doc.rust-lang.org/core/marker/trait.Copy.html"><code>Copy</code></a>.</p>
</li>
<li>
<p>Lors d&#8217;une affectation, les données d&#8217;un type avec le trait <code>Copy</code> sont copiés.</p>
</li>
<li>
<p>Chaque variable est l&#8217;unique propriétaire de sa propre copie. L&#8217;invariant de « propriété unique » est satisfait.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let a = [1, 2, 3];
    let mut b = a; // les trois cases du tableau sont copiées
    b[1] = 5;
    assert_eq!(a[1], 2); // a n'est pas modifié
    assert_eq!(b[1], 5); // seul b est modifié
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_passage_par_valeur"><a class="anchor" href="#_passage_par_valeur"></a><a class="link" href="#_passage_par_valeur">4.2.7. Passage par valeur</a></h4>
<div class="ulist">
<ul>
<li>
<p>De même lors d&#8217;un appel de fonction, les types primitifs sont copiés.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn modify(mut tab : [u32; 3]) {
    tab[1] = 4; // c'est la copie locale tab qui est modifiée
}

fn main() {
    let mut a = [1, 2, 3]; // (a n'a pas besoin d'être mutable)
    modify(a); //l'argument passé par valeur (copie)
    assert_eq!(a[1], 2); // a n'est pas modifié
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_transfert_de_propriétaire_affectation"><a class="anchor" href="#_transfert_de_propriétaire_affectation"></a><a class="link" href="#_transfert_de_propriétaire_affectation">4.2.8. Transfert de propriétaire (affectation)</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour les types qui n&#8217;implémentent pas le trait <code>Copy</code>, une affectation déplace la propriété vers une nouvelle variable.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriétaire du vecteur
    let v2 = v1; // la propriété est transférée à v2
    println!("{}", v1[0]); // erreur: ne peut plus être utilisé
    // erreur: borrow of moved value v1</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tranfert_de_propriétaire_appel_de_fonction"><a class="anchor" href="#_tranfert_de_propriétaire_appel_de_fonction"></a><a class="link" href="#_tranfert_de_propriétaire_appel_de_fonction">4.2.9. Tranfert de propriétaire (appel de fonction)</a></h4>
<div class="ulist">
<ul>
<li>
<p>Même problème lors d&#8217;un appel de fonction, la propriété est transférée.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun(v : Vec&lt;u32&gt;) { ... }

fn main() {
    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriétaire du vecteur
    fun(v1); // la propriété est transférée à l'argument v
    println!("{}", v1[0]); // erreur: borrow of moved value v1
}</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_erreurs_mémoire_évitées_par_le_transfert"><a class="anchor" href="#_erreurs_mémoire_évitées_par_le_transfert"></a><a class="link" href="#_erreurs_mémoire_évitées_par_le_transfert">Erreurs mémoire évitées par le transfert</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c hljs" data-lang="c">#include &lt;stdlib.h&gt;
void fun(char * v) {
  free(v);
}

int main() {
  char * v1 = malloc(3);
  fun(v1);
  free(v1); <i class="conum" data-value="1"></i><b>(1)</b>
}
// free(): double free detected in tcache 2
// Aborted (core dumped)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Erreur en C à l&#8217;exécution. Impossible en Rust, car <code>v1</code> n&#8217;est plus propriétaire de la mémoire.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comment_appeler_une_fonction_sans_perdre_la_propriété"><a class="anchor" href="#_comment_appeler_une_fonction_sans_perdre_la_propriété"></a><a class="link" href="#_comment_appeler_une_fonction_sans_perdre_la_propriété">4.2.10. Comment appeler une fonction sans perdre la propriété ?</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn print(v: Vec&lt;u32&gt;) -&gt; Vec&lt;u32&gt; {
    println!("{:?}", v);
    v // on retourne l'objet v pour transférer la propriété en retour
}

fn main() {
    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriétaire du vecteur
    let v1 = print(v1); // l'appel cède puis récupère la propriété.
    assert_eq!(v1[0], 1); // l'accès à v1[0] est possible
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Le code ci-dessus est correct mais pas idiomatique. C&#8217;est fastidieux de devoir passer la propriété en retour pour de nombreuses variables.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_emprunts"><a class="anchor" href="#_emprunts"></a><a class="link" href="#_emprunts">4.2.11. Emprunts</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un <a href="https://doc.rust-lang.org/book/ch04-02-references-and-borrowing.html">emprunt</a> permet de passer une référence à un objet sans en céder la propriété.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn print(v: &amp;Vec&lt;u32&gt;) { // la fonction travaille sur un emprunt elle n'est
    println!("{:?}", v); // pas propriétaire du vecteur.
}

fn main() {
    let v1: Vec&lt;u32&gt; = vec![1, 2, 3]; // v1 est propriétaire du vecteur
    print(&amp;v1); // on emprunte une référence sur le vecteur
    assert_eq!(v1[0], 1);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_emprunts_mutables"><a class="anchor" href="#_emprunts_mutables"></a><a class="link" href="#_emprunts_mutables">4.2.12. Emprunts mutables</a></h4>
<div class="ulist">
<ul>
<li>
<p>Par défaut les emprunts sont immutables. Pour pouvoir modifier l&#8217;objet emprunté, il nous faut un type <code>&amp; mut</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun(v: &amp;mut Vec&lt;u32&gt;) {
    v.push(4);
}

fn replace(v: &amp;mut Vec&lt;u32&gt;) {
    *v = vec![4,5]; <i class="conum" data-value="1"></i><b>(1)</b>
}

fn main() {
    let mut v1: Vec&lt;u32&gt; = vec![1, 2, 3];
    fun(&amp;mut v1); // on emprunte une référence mutable sur le vecteur
    assert_eq!(v1[3], 4);
    replace(&amp;mut v1);
    assert_eq!(v1.len(), 2);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Pour modifier le contenu, il faut utiliser l&#8217;<a href="https://doc.rust-lang.org/book/ch15-02-deref.html">opérateur <code>*</code></a> qui permet d&#8217;accéder à la valeur référencée.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_emprunts_mutables_transfert_de_propriété"><a class="anchor" href="#_emprunts_mutables_transfert_de_propriété"></a><a class="link" href="#_emprunts_mutables_transfert_de_propriété">4.2.13. Emprunts mutables ≠ Transfert de propriété</a></h4>
<div class="ulist">
<ul>
<li>
<p>Un emprunt mutable n&#8217;est pas équivalent à un transfert de propriété</p>
</li>
<li>
<p>Par exemple, il n&#8217;est pas possible de désallouer une référence mutable 😊</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun(v: &amp;mut Vec&lt;u32&gt;) {
    drop(*v); // erreur: cannot move out of *v which is behind a mutable reference
}
fn main() {
    let mut v1: Vec&lt;u32&gt; = vec![1, 2, 3];
    fun(&amp;mut v1); // on emprunte une référence mutable sur le vecteur
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_les_trois_règles_des_emprunts"><a class="anchor" href="#_les_trois_règles_des_emprunts"></a><a class="link" href="#_les_trois_règles_des_emprunts">4.2.14. Les trois règles des emprunts</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Les emprunts ne peuvent pas avoir une durée de vie plus longue que celle du propriétaire.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>À un point dans le programme, il est possible d&#8217;emprunter:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>une ou plusieurs références <code>&amp;T</code></p>
</li>
<li>
<p>exactement une seule référence mutable <code>&amp;mut T</code></p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="_exemple_erreur_évitée_avec_la_règle_1"><a class="anchor" href="#_exemple_erreur_évitée_avec_la_règle_1"></a><a class="link" href="#_exemple_erreur_évitée_avec_la_règle_1">Exemple: erreur évitée avec la règle (1)</a></h5>
<div class="ulist">
<ul>
<li>
<p>Rust nous interdit de retourner une référence sur <code>x</code> car il ne peut pas garantir que sa durée de vie est suffisante.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn fun() -&gt; &amp;u32 { // erreur: missing lifetime specifier
    let x = 1;
    &amp;x
}

fn main() {
    let y : &amp;u32 = fun();
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>En effet la mémoire de <code>x</code>, sur la pile, est libérée en sortie de fonction</p>
</li>
<li>
<p>En C, ceci est une source d&#8217;erreurs classique !</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_exemple_erreur_évitée_avec_les_règles_2_et_3"><a class="anchor" href="#_exemple_erreur_évitée_avec_les_règles_2_et_3"></a><a class="link" href="#_exemple_erreur_évitée_avec_les_règles_2_et_3">Exemple: erreur évitée avec les règles (2) et (3)</a></h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">fn main() {
    let mut v = vec![1, 2, 3, 4];

    rayon::join( // on lance deux threads concurrents
        || {
            v[0] = 5; // premier thread
        },
        // erreur: cannot borrow `v` as mutable more than once at a time
        || {
            v[0] = 4; // deuxième thread
        },
    );
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Évite les problèmes d&#8217;accès concurrents. Ici les deux threads voudraient modifier le même tableau.</p>
</li>
<li>
<p>Rust l&#8217;interdit car v est emprunté deux fois de manière mutable.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_exercice_un_type_stack"><a class="anchor" href="#_exercice_un_type_stack"></a><a class="link" href="#_exercice_un_type_stack">4.2.15. Exercice : un type Stack</a></h4>
<div class="ulist">
<ul>
<li>
<p>Le but de l&#8217;exercice est de définir une structure de pile (<em>Stack</em>) en Rust</p>
<div class="ulist">
<ul>
<li>
<p>pour simplifier, la pile contiendra des entiers (<em>i32</em>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Une pile peut être définie de manière récursive (comme une liste) de la façon suivante</p>
<div class="ulist">
<ul>
<li>
<p>une pile peut être soit la <em>pile vide</em>, soit un <em>élément au sommet d&#8217;une pile</em></p>
</li>
<li>
<p>un type disjoint est représenté en Rust par un <code>enum</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_étape_1_première_tentative_avec_un_enum"><a class="anchor" href="#_étape_1_première_tentative_avec_un_enum"></a><a class="link" href="#_étape_1_première_tentative_avec_un_enum">Étape 1 : première tentative avec un <code>enum</code></a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_0.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile définie récursivement.
/// 
/// Problème à la compilation
/// error[E0072]: recursive type `Stack` has infinite size
/// 
pub enum Stack { <i class="conum" data-value="1"></i><b>(1)</b>
    Empty,
    Elem(i32, Stack) // recursive without indirection
                     // help: insert some indirection (e.g., a `Box`, `Rc`, or `&amp;`) to make `Stack` representable
                     //     Elem(i32, Box&lt;Stack&gt;)
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>La définition étant récursive, Rust ne peut pas déterminer la taille du type <code>Stack</code></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_2_un_enum_avec_de_lallocation_dynamique"><a class="anchor" href="#_étape_2_un_enum_avec_de_lallocation_dynamique"></a><a class="link" href="#_étape_2_un_enum_avec_de_lallocation_dynamique">Étape 2 : un <code>enum</code> avec de l&#8217;allocation dynamique</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_1.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile définie récursivement.
/// 
/// Problème
/// Le premier élément se trouve sur la pile, les autres sur le tas
/// =&gt; les manipulations seront plus complexes
/// 
#[derive(Debug,PartialEq)]
pub enum Stack {
    Empty,
    Elem(i32, Box&lt;Stack&gt;)
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tests (src/modeles-memoire/exemples/stack_1.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test]
fn should_create_an_empty_stack() {
    let s = empty_stack();
    assert_eq!(Stack::Empty, s);
}

#[test]
fn should_return_the_top_of_an_empty_stack() {
    let s = empty_stack();
    assert_eq!(Option::None, top(&amp;s));
}

#[test]
fn should_return_the_top_of_the_stack() {
    let s = Stack::Elem(1, Box::new(Stack::Empty));
    assert_eq!(1, top(&amp;s).unwrap());
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Opérations (src/modeles-memoire/exemples/stack_1.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub fn empty_stack() -&gt; Stack {
    Stack::Empty
}

pub fn top(s: &amp;Stack) -&gt; Option&lt;i32&gt; {
    match s {
        Stack::Empty =&gt; None,
        Stack::Elem(n, _) =&gt; Some(*n),
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_étape_3_première_tentative_avec_tous_les_éléments_sur_le_tas"><a class="anchor" href="#_étape_3_première_tentative_avec_tous_les_éléments_sur_le_tas"></a><a class="link" href="#_étape_3_première_tentative_avec_tous_les_éléments_sur_le_tas">Étape 3 : première tentative avec tous les éléments sur le tas</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_2.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile définie récursivement.
/// 
/// Problème de compilation
/// error[E0446]: private type `Node` in public interface
/// 
#[derive(Debug,PartialEq)]
pub enum Stack {
    Empty,
    Elem(Box&lt;Node&gt;) // can't leak private type
                    // struct Node {
                    // ----------- `Node` declared as private

}

#[derive(Debug,PartialEq)]
struct Node { <i class="conum" data-value="1"></i><b>(1)</b>
    elem: i32,
    next: Stack,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Node</code> est privé et doit le rester</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_4_deuxième_tentative_pour_tous_les_éléments_sur_le_tas"><a class="anchor" href="#_étape_4_deuxième_tentative_pour_tous_les_éléments_sur_le_tas"></a><a class="link" href="#_étape_4_deuxième_tentative_pour_tous_les_éléments_sur_le_tas">Étape 4 : deuxième tentative pour tous les éléments sur le tas</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_3.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile définie récursivement.
#[derive(Debug,PartialEq)]
pub struct Stack {
    head: Link,
}

#[derive(Debug,PartialEq)]
enum Link {
    Empty,
    Elem(Box&lt;Node&gt;)
}

#[derive(Debug,PartialEq)]
struct Node {
    elem: i32,
    next: Link,
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Tests (src/modeles-memoire/exemples/stack_3.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test]
fn should_push_an_element_on_the_stack() {
    let mut s = empty_stack();
    push(&amp;mut s, 1);
    assert_eq!(1, top(&amp;s).unwrap());
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Opérations (src/modeles-memoire/exemples/stack_3.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Empile un élément
/// Problème de compilation :
/// error[E0507]: cannot move out of `*next` which is behind a shared reference
/// 
pub fn push(s: &amp;mut Stack, elem: i32) {
    let next = &amp;mut s.head;
    let newtop = Box::new(Node{elem, next: *next});  <i class="conum" data-value="1"></i><b>(1)</b>
                                                     // move occurs because `*next` has type `Link`, which does not implement the `Copy` trait
    *s = Stack{head: Link::Elem(newtop)};
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>Link</code> n&#8217;implémente pas le <em>trait</em> <code>Copy</code> donc Rust interdit le déplacement du sommet de la pile</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_5_tous_les_éléments_sur_le_tas"><a class="anchor" href="#_étape_5_tous_les_éléments_sur_le_tas"></a><a class="link" href="#_étape_5_tous_les_éléments_sur_le_tas">Étape 5 : tous les éléments sur le tas</a></h5>
<div class="listingblock">
<div class="title">Opérations (src/modeles-memoire/exemples/stack_4.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Empile un élément
pub fn push(s: &amp;mut Stack, elem: i32) {
    let next = std::mem::replace(&amp;mut s.head, Link::Empty); <i class="conum" data-value="1"></i><b>(1)</b>
    let newtop = Box::new(Node{elem, next});
    s.head = Link::Elem(newtop);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/std/mem/fn.replace.html"><code>std::mem::replace</code></a> déplace le sommet de la pile dans <code>next</code> et le remplace par la valeur <code>Link::Empty</code></td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_5_une_petite_amélioration"><a class="anchor" href="#_étape_5_une_petite_amélioration"></a><a class="link" href="#_étape_5_une_petite_amélioration">Étape 5 : une petite amélioration</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_4.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile définie récursivement.
#[derive(Debug,PartialEq)]
pub struct Stack {
    head: Link,
}

/// Le type Link est identique à un type de la bibliothèque standard
/// Lequel ?
/// 
#[derive(Debug,PartialEq)]
enum Link { <i class="conum" data-value="1"></i><b>(1)</b>
    Empty,
    Elem(Box&lt;Node&gt;)
}

#[derive(Debug,PartialEq)]
struct Node {
    elem: i32,
    next: Link,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Quel type de la bibliothèque standard pourrait remplacer <code>Link</code> ?</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_6_en_utilisant_option"><a class="anchor" href="#_étape_6_en_utilisant_option"></a><a class="link" href="#_étape_6_en_utilisant_option">Étape 6 : en utilisant Option</a></h5>
<div class="listingblock">
<div class="title">src/modeles-memoire/exemples/stack_5.rs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Une pile définie récursivement.
#[derive(Debug,PartialEq)]
pub struct Stack {
    head: Option&lt;Box&lt;Node&gt;&gt;, <i class="conum" data-value="1"></i><b>(1)</b>
}

#[derive(Debug,PartialEq)]
struct Node {
    elem: i32,
    next: Option&lt;Box&lt;Node&gt;&gt;,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/std/option/enum.Option.html"><code>std::option::Option</code></a> remplace avantageusement <code>Link</code></td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Opérations (src/modeles-memoire/exemples/stack_5.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Empile un élément
pub fn push(s: &amp;mut Stack, elem: i32) {
    let next = std::mem::take(&amp;mut s.head); <i class="conum" data-value="1"></i><b>(1)</b>
                                            // OU plus simple let next = s.head.take();
    let newtop = Box::new(Node{elem, next});
    s.head = Some(newtop);
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/std/mem/fn.take.html"><code>std::mem::take</code></a> déplace le sommet de la pile dans <code>next</code> et le remplace par la valeur par défaut du type <code>Option</code> (trait <a href="https://doc.rust-lang.org/std/default/trait.Default.html"><code>std::default::Default</code></a>)</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_7_ajouter_la_méthode_pop_dépiler"><a class="anchor" href="#_étape_7_ajouter_la_méthode_pop_dépiler"></a><a class="link" href="#_étape_7_ajouter_la_méthode_pop_dépiler">Étape 7 : ajouter la méthode <em>pop</em> (dépiler)</a></h5>
<div class="listingblock">
<div class="title">Tests (src/modeles-memoire/exemples/stack_6.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">#[test]
fn should_pop_the_empty_stack() {
    let mut s = empty_stack();
    let top_of_stack = pop(&amp;mut s);
    assert_eq!(None, top_of_stack);
    assert_eq!(None, top(&amp;s));
}

#[test]
fn should_pop_an_element_from_the_stack() {
    let mut s = Stack {head: Some(Box::new(Node{elem: 1, next: None}))};
    let top_of_stack = pop(&amp;mut s);
    assert_eq!(1, top_of_stack.unwrap());
    assert_eq!(None, top(&amp;s));
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Opérations (src/modeles-memoire/exemples/stack_6.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Dépile un élément
/// 
/// Problème de compilation
/// error[E0507]: cannot move out of `n.next` which is behind a shared reference
pub fn pop(s: &amp;mut Stack) -&gt; Option&lt;i32&gt; {
    if let Some(n) = &amp;s.head { <i class="conum" data-value="1"></i><b>(1)</b>
        let value = n.elem;
        s.head = n.next; <i class="conum" data-value="2"></i><b>(2)</b>
                         // move occurs because `n.next` has type `Option&lt;Box&lt;Node&gt;&gt;`, which does not implement the `Copy` trait
                         // help: consider borrowing the `Option`'s content: `n.next.as_ref()`
        return Some(value);
    }
    None
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://doc.rust-lang.org/reference/expressions/if-expr.html#if-let-expressions"><code>if let</code></a> déconstruit la valeur de type <code>Option</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>le même problème que pour <code>push</code> se pose</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_étape_8_la_méthode_pop_dépiler"><a class="anchor" href="#_étape_8_la_méthode_pop_dépiler"></a><a class="link" href="#_étape_8_la_méthode_pop_dépiler">Étape 8 : la méthode <em>pop</em> (dépiler)</a></h5>
<div class="listingblock">
<div class="title">Opérations (src/modeles-memoire/exemples/stack_7.rs)</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">/// Dépile un élément
pub fn pop(s: &amp;mut Stack) -&gt; Option&lt;i32&gt; {
    if let Some(ref mut n) = &amp;mut s.head {
        let value = n.elem;
        s.head = n.next.take();
        return Some(value);
    }
    None
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_références_4"><a class="anchor" href="#_références_4"></a><a class="link" href="#_références_4">4.2.16. Références</a></h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://doc.rust-lang.org/1.22.0/book/second-edition/">The Rust book, first and second editions</a></p>
</li>
<li>
<p><a href="http://cis198-2016s.github.io/">CIS 198 U. Pennsylvania: Rust programming lectures</a></p>
</li>
<li>
<p><a href="https://stanford-cs242.github.io/f18/lectures/05-1-rust-memory-safety.html">Memory safety in Rust</a></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Expérimentez</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Propriété (<a href="https://github.com/rust-lang/rustlings/tree/main/exercises/move_semantics">rustlings</a>, <a href="https://practice.course.rs//ownership/ownership.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/scope/move.html">Rust by Example</a>)</p>
</li>
<li>
<p>Emprunt (<a href="https://practice.course.rs//ownership/borrowing.html">Rust By Practice</a>, <a href="https://doc.rust-lang.org/stable/rust-by-example/scope/borrow.html">Rust by Example</a>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_consommation_énergétique"><a class="anchor" href="#_consommation_énergétique"></a><a class="link" href="#_consommation_énergétique">5. Consommation Énergétique</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_consommation_énergétique_des_ordinateurs"><a class="anchor" href="#_consommation_énergétique_des_ordinateurs"></a><a class="link" href="#_consommation_énergétique_des_ordinateurs">5.1. Consommation énergétique des ordinateurs</a></h3>
<div class="sect3">
<h4 id="_puissance_et_énergie"><a class="anchor" href="#_puissance_et_énergie"></a><a class="link" href="#_puissance_et_énergie">5.1.1. Puissance et Énergie</a></h4>
<div class="ulist">
<ul>
<li>
<p><strong>Énergie</strong>: capacité d&#8217;un système à modifier un état en produisant un travail, exprimé en Joules \(J (N.m)\)</p>
</li>
<li>
<p><strong>Puissance</strong>: débit d&#8217;énergie (énergie par unité de temps), exprimé en Watts \(W (J/s)\)</p>
</li>
<li>
<p>L&#8217;énergie est l&#8217;intégrale de la puissance sur le temps,</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>\(E = \int P(t).dt\)</p>
</div>
</div>
<div class="sect3">
<h4 id="_échelle_dénergies"><a class="anchor" href="#_échelle_dénergies"></a><a class="link" href="#_échelle_dénergies">5.1.2. Échelle d&#8217;énergies</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/echelle-energie.png" alt="Échelle d&#8217;énergies" width="500">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_architecture_générale_dun_ordinateur"><a class="anchor" href="#_architecture_générale_dun_ordinateur"></a><a class="link" href="#_architecture_générale_dun_ordinateur">5.1.3. Architecture générale d&#8217;un ordinateur</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/arch.svg" alt="Architecture d&#8217;un ordinateur" width="500">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_zoom_sur_le_cpu_intel_nehalem"><a class="anchor" href="#_zoom_sur_le_cpu_intel_nehalem"></a><a class="link" href="#_zoom_sur_le_cpu_intel_nehalem">5.1.4. Zoom sur le CPU (Intel Nehalem)</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/Nehalem_Die_callout.png" alt="Intel Nehalem" width="500">
</div>
</div>
<div class="paragraph">
<p>Les cœurs, les caches et la mémoire sont constitués à partir de millions de transistors qui implémentent des portes logiques.</p>
</div>
<div class="paragraph">
<p>L&#8217;architecture Nehalem comporte 731M de transistors et chaque porte fait 35nm.</p>
</div>
</div>
<div class="sect3">
<h4 id="_répartition_du_budget_énergie"><a class="anchor" href="#_répartition_du_budget_énergie"></a><a class="link" href="#_répartition_du_budget_énergie">5.1.5. Répartition du budget énergie</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Composant</th>
<th class="tableblock halign-left valign-top">Puissance [W]</th>
<th class="tableblock halign-left valign-top">%</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disques</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Périphériques</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Carte mère</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ventilateurs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fuites</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">38</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Total</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>251</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>100</strong></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><em>Source: A. Tisserand, ECOFAC 2010</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_portes_mos"><a class="anchor" href="#_portes_mos"></a><a class="link" href="#_portes_mos">5.1.6. Portes MOS</a></h4>
<div class="paragraph">
<p>Les circuits logiques récents sont construits à partir de transistors MOS (Metal Oxyde Semiconductor).</p>
</div>
<div class="paragraph">
<p>Un transistor MOS possède trois broches: la source, le drain et la grille.</p>
</div>
<div class="paragraph">
<p>Il existe deux types de transistors MOS: le type P et le type N.</p>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;on applique une tension sur la grille, le transistor devient soit passant (type N), soit bloquant (type P).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/pmos-nmos.svg" alt="PMOS-NMOS" width="400">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_consommation_mos"><a class="anchor" href="#_consommation_mos"></a><a class="link" href="#_consommation_mos">5.1.7. Consommation MOS</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les transistors MOS consomment en permanence lorsqu&#8217;ils sont passants.</p>
</li>
<li>
<p>Est-il possible de fabriquer des portes qui ne consomment que lors des changements d&#8217;état ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_porte_cmos"><a class="anchor" href="#_porte_cmos"></a><a class="link" href="#_porte_cmos">5.1.8. Porte CMOS</a></h4>
<div class="paragraph">
<p>Les portes logiques utilisent la technologie CMOS (Complementary Oxide Semiconductor) qui combine un P-MOS et un N-MOS.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="figs/CMOS-Inverter.png" alt="Porte NON" width="300">
</div>
</div>
<div class="paragraph">
<p>Par exemple, ici on implémente une porte logique NON: \(Y = \bar{A}\).</p>
</div>
<div class="paragraph">
<p>Lorsque l&#8217;entrée vaut 1, la porte NMOS (bas) est passante et la porte PMOS (haut) est bloquante, ainsi Y est relié à la masse (GND).</p>
</div>
</div>
<div class="sect3">
<h4 id="_avantage_cmos"><a class="anchor" href="#_avantage_cmos"></a><a class="link" href="#_avantage_cmos">5.1.9. Avantage CMOS</a></h4>
<div class="paragraph">
<p>Dans une porte CMOS, un des deux transistors est toujours bloquant et il n&#8217;y a (presque) pas de courant qui passe entre VDD et GND.</p>
</div>
<div class="paragraph">
<p>La consommation énergétique se produit donc uniquement lors des transitions d&#8217;état.</p>
</div>
</div>
<div class="sect3">
<h4 id="_puissance_dynamique"><a class="anchor" href="#_puissance_dynamique"></a><a class="link" href="#_puissance_dynamique">5.1.10. Puissance dynamique</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/porte-non.svg" alt="Capacité équivalente" width="200">
</div>
</div>
<div class="paragraph">
<p>Lors d&#8217;une transition la consommation d&#8217;une porte est \(P_{dyn} = \frac{1}{2}.C.V_{DD}^2.f\) où</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(C\) capacité de charge équivalente</p>
</li>
<li>
<p>\(V_{DD}\) tension</p>
</li>
<li>
<p>\(f\) fréquence des doubles-transitions (montantes + descendantes)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_amélioration_des_techniques_de_fabrication_des_cmos"><a class="anchor" href="#_amélioration_des_techniques_de_fabrication_des_cmos"></a><a class="link" href="#_amélioration_des_techniques_de_fabrication_des_cmos">5.1.11. Amélioration des techniques de fabrication des CMOS</a></h4>
<div class="ulist">
<ul>
<li>
<p>Dennard observe que à chaque nouvelle génération les transistors peuvent être réduits de ~30% (0.7)</p>
<div class="ulist">
<ul>
<li>
<p>Le voltage diminue de 30% car l&#8217;épaisseur diminue</p>
</li>
<li>
<p>La capacitance diminue de 30% car l&#8217;épaisseur diminue</p>
</li>
<li>
<p>Le temps de propagation diminue de 30% car la distance diminue</p>
</li>
<li>
<p>La surface diminue de 50% (\(0.7 \times 0.7\))</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cela entraine:</p>
<div class="ulist">
<ul>
<li>
<p>Une augmentation de la fréquence de 50% (car inverse du temps de propagation)</p>
</li>
<li>
<p>Une diminution de 50% de la consommation énergétique d&#8217;une porte</p>
</li>
<li>
<p>\(\Delta P = \Delta C.\Delta V_{DD}^2.\Delta f = 0.7\times 0.7^2 \times \frac{1}{0.7} \approx 0.5\)</p>
</li>
</ul>
</div>
</li>
<li>
<p>La dissipation thermique par unité de surface reste constante.</p>
</li>
<li>
<p>Mais à chaque génération les CPUs deviennent plus complexes.
Moore, 1966: Le nombre de transistors double tous les 1.5 ans à coûts constants.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_puissance_statique"><a class="anchor" href="#_puissance_statique"></a><a class="link" href="#_puissance_statique">5.1.12. Puissance statique</a></h4>
<div class="paragraph">
<p>La technologie CMOS est bloquante sauf lors de transitions.
Mais un faible courant de fuite \(I_{fuite}\) traverse un transistor bloquant.</p>
</div>
<div class="paragraph">
<p>\(P_{sta} = V_{DD}.I_{fuite}\)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>\(I_{fuite}\) dépends de la température dissipée et du voltage seuil sur les transistors.</p>
</li>
<li>
<p>\(P_{sta}\) augmente exponentiellement (Borkar et Chien, 2011) avec la miniaturisation et met un frein à la loi de Moore.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_fin_de_la_loi_de_dennard"><a class="anchor" href="#_fin_de_la_loi_de_dennard"></a><a class="link" href="#_fin_de_la_loi_de_dennard">5.1.13. Fin de la loi de Dennard</a></h4>
<div class="ulist">
<ul>
<li>
<p>Avec l&#8217;augmentation des courants de fuite, la dissipation thermique par unité de surface augmente</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/end-of-dennards.png" alt="Fin de la loi de Dennard (S. Gai)" width="600"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Avec la miniaturisation, on a aussi une limite sur l&#8217;augmentation de fréquence et une limite sur la réduction du voltage de seuil.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_limites_sur_la_conception_des_processeurs"><a class="anchor" href="#_limites_sur_la_conception_des_processeurs"></a><a class="link" href="#_limites_sur_la_conception_des_processeurs">5.1.14. Limites sur la conception des processeurs</a></h4>
<div class="paragraph">
<p>\(P = P_{dyn} + P_{sta} = \frac{1}{2}.C.V_{DD}^2.f + V_{DD}.I_{fuite}\)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Jusqu&#8217;aux années 2000, pour augmenter les capacités de calcul les constructeurs ont augmenté la fréquence et le nombre de processeurs.</p>
</li>
<li>
<p>Avec l&#8217;augmentation des courants de fuite, la dissipation énergétique devient trop importante.</p>
</li>
<li>
<p>Dorénavant pour augmenter les capacités de calcul, on multiplie le nombre de cœurs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/clock-rate.png" alt="Évolution de la fréquence nominale" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Phénomène du <em>Dark Silicon</em>: pour limiter la dissipation thermique on n'«allume» pas l&#8217;ensemble du CPU en même temps.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Source: Hennessy-Patterson</em></p>
</div>
</div>
<div class="sect3">
<h4 id="_comment_mesurer_lénergie_consommée"><a class="anchor" href="#_comment_mesurer_lénergie_consommée"></a><a class="link" href="#_comment_mesurer_lénergie_consommée">5.1.15. Comment mesurer l&#8217;énergie consommée</a></h4>
<div class="paragraph">
<p><strong>Wattmètre</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>combine un capteur d&#8217;intensité et de tension</p>
</li>
<li>
<p>mesure précise mais basse résolution d&#8217;échantillonage (peu précis sur des temps petits)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/yoko.png" alt="Wattmètre Yokogawa WT210" width="200"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_compteur_matériel_rapl"><a class="anchor" href="#_compteur_matériel_rapl"></a><a class="link" href="#_compteur_matériel_rapl">5.1.16. Compteur matériel RAPL</a></h4>
<div class="ulist">
<ul>
<li>
<p>Intel implémente les compteurs RAPL (Running Average Power Limit)</p>
</li>
<li>
<p>Ne mesure pas vraiment la puissance</p>
</li>
<li>
<p>Compte le nombre et le type d&#8217;instructions exécutées</p>
</li>
<li>
<p>Utilise un modèle de prédiction de consommation</p>
</li>
<li>
<p>Résolution élevée d&#8217;échantillonage</p>
</li>
<li>
<p>Ne mesure pas les composants en dehors du CPU/GPU</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_comparaison_rapl_vs_wattmètre_haswell"><a class="anchor" href="#_comparaison_rapl_vs_wattmètre_haswell"></a><a class="link" href="#_comparaison_rapl_vs_wattmètre_haswell">5.1.17. Comparaison RAPL vs. Wattmètre (Haswell)</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/calib-yoko.svg" alt="RAPL vs. Wattmètre" width="600"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>2 compteurs RAPL: pkg (CPU+caches) et ram (mémoire)</p>
</li>
<li>
<p>prédiction corrélée avec la mesure du wattmètre sauf &#8230;&#8203;</p>
</li>
<li>
<p>&#8230;&#8203; décalage constant: consommation idle (ventilation, alimentation, carte mère)&#8201;&#8212;&#8201;environ 30W</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_techniques_pour_réduire_la_consommation"><a class="anchor" href="#_techniques_pour_réduire_la_consommation"></a><a class="link" href="#_techniques_pour_réduire_la_consommation">5.1.18. Techniques pour réduire la consommation</a></h4>
<div class="ulist">
<ul>
<li>
<p>Meilleure conception technologique (réduire capacitance et courants de fuite)</p>
</li>
<li>
<p>Gate-clocking: extinction sélective des parties inactives du CPU.</p>
</li>
<li>
<p>Sleep-modes (P-state and C-state) &amp; DVFS (Dynamic Voltage Frequency Scaling)</p>
</li>
<li>
<p>Power gating (désactivation d&#8217;un cœur complet)</p>
</li>
<li>
<p>Consolidation de charge et extinction de nœuds inactifs dans un cluster</p>
</li>
<li>
<p>Optimisations logicielles</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sleep_mode_dvfs"><a class="anchor" href="#_sleep_mode_dvfs"></a><a class="link" href="#_sleep_mode_dvfs">5.1.19. Sleep-mode &amp; DVFS</a></h4>
<div class="ulist">
<ul>
<li>
<p>DVFS: change dynamiquement le couple voltage-fréquence du processeur.</p>
</li>
<li>
<p>Sur une architecture Haswell on a une variation quadratique de P.</p>
</li>
<li>
<p>Sur Intel: P-state (CPU qui calcule), C-state (Idle et mise en veille d&#8217;une partie des composants)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/DVFS-levels-and-Intel-P-states.png" alt="Intel P-states" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Un gouverneur système choisit le point de fonctionnement optimal.</p>
</li>
<li>
<p>Par exemple pour un système peu chargé on choisira la fréquence la plus basse.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_race_to_idle"><a class="anchor" href="#_race_to_idle"></a><a class="link" href="#_race_to_idle">5.1.20. Race to Idle</a></h4>
<div class="ulist">
<ul>
<li>
<p>En raison de courants de fuite importants et de la consommation statique d&#8217;autres composants, une très bonne stratégie en pratique est le <em>Race to Idle</em> (ou course jusqu&#8217;au repos).</p>
</li>
<li>
<p>On fait notre calcul le plus rapidement possible, de manière à pouvoir mettre le système en veille pour limiter la consommation statique.</p>
</li>
<li>
<p>Dans ce cas, optimiser l&#8217;énergie et le temps de calcul sont liés.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Racing and Pacing to Idle</em>, Kim, Ines, Hoffmann, 2005.</p>
</div>
</div>
<div class="sect3">
<h4 id="_embarqué_vs_serveur"><a class="anchor" href="#_embarqué_vs_serveur"></a><a class="link" href="#_embarqué_vs_serveur">5.1.21. Embarqué vs. Serveur</a></h4>
<div class="ulist">
<ul>
<li>
<p>Les politiques énergétiques ne vont pas être les mêmes sur des calculateurs embarqués et des serveurs.</p>
</li>
<li>
<p>Serveur (très contraint en charge de travail)</p>
<div class="ulist">
<ul>
<li>
<p>On cherche à avoir des fréquences élevées.</p>
</li>
<li>
<p>Race to Idle est souvent une bonne stratégie.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Embarqué (très contraint en énergie)</p>
<div class="ulist">
<ul>
<li>
<p>Souvent on limite la fréquence pour pouvoir baisser VDD et conserver le budget énergie.</p>
</li>
<li>
<p>On utilise des stratégies de limitation de puissance fines.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dvfs_selon_les_phases_de_calcul"><a class="anchor" href="#_dvfs_selon_les_phases_de_calcul"></a><a class="link" href="#_dvfs_selon_les_phases_de_calcul">5.1.22. DVFS selon les phases de calcul</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/dvfs-phases.png" alt="DVFS pendant les phases de communication d&#8217;un programme parallele" width="600"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Il peut-être intéressant d&#8217;appliquer DVFS aux phases de communications d&#8217;un programme.</p>
</li>
<li>
<p>Si les communications sont synchrones, durant ces phases le CPU travaille peu.</p>
</li>
<li>
<p>DVFS sur le processeur permet donc d&#8217;économiser de l&#8217;énergie sans ralentir le programme.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_effet_rebond"><a class="anchor" href="#_effet_rebond"></a><a class="link" href="#_effet_rebond">5.1.23. Effet rebond</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/koomey.png" alt="Efficacité Énergétique des PC - Koomey 2011" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Éfficacité énergétique doublée tous les 1.5 ans</p>
</li>
<li>
<p>Puissance de calcul doublée tous les 1.5 ans</p>
</li>
<li>
<p>Nombre de PCs utilisés double tous les trois ans (entre 1980 et 2008).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Optimiser la consommation ne réduit pas l&#8217;impact total du calcul. On observe un « effet rebond » où l&#8217;efficacité gagnée est utilisée pour calculer plus.</p>
</div>
</div>
<div class="sect3">
<h4 id="_effet_rebond_2"><a class="anchor" href="#_effet_rebond_2"></a><a class="link" href="#_effet_rebond_2">5.1.24. Effet rebond</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/top500.png" alt="Évolution des 100 premières machines HPC - Koomey 2011" width="400"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Malgré d&#8217;importantes améliorations de l&#8217;efficacité, l&#8217;empreinte énergétique totale augmente avec la demande en calcul.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_simulation_numérique_vers_un_calcul_sobre"><a class="anchor" href="#_simulation_numérique_vers_un_calcul_sobre"></a><a class="link" href="#_simulation_numérique_vers_un_calcul_sobre">5.1.25. Simulation numérique: vers un calcul sobre ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>Compromis entre justesse du modèle et coût énergétique. Exemple: Réseaux de Neuronnes (Resnet), Green AI, Schwartz 2019.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/resnet.png" alt="FPO (Milliards d&#8217;Opérations Flottantes) vs. Justesse" width="Schwartz Green AI 2019" height="300"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Pour une augmentation linéaire du coût en calcul, on a une augmentation logarithmique de la justesse.</p>
</li>
<li>
<p>Phénomène similaire observé aussi dans la simulation numérique (Masson &amp; Knutti 2011).</p>
</li>
<li>
<p>« Loi » des Retours Décroissants ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bibliographie"><a class="anchor" href="#_bibliographie"></a><a class="link" href="#_bibliographie">5.1.26. Bibliographie</a></h4>
<div class="ulist">
<ul>
<li>
<p>Computer Architecture: A Quantitative Approach, Henessy, Patterson.</p>
</li>
<li>
<p>Introduction to Power Consumption in Dig. Int. Circuits, Tisserand, ECOFAC 2010.</p>
</li>
<li>
<p>Design Challenges of Technology Scaling. Borkar. IEEE. 1999.</p>
</li>
<li>
<p>The future of microprocessors. Borkar et Chien. ACM. 2011.</p>
</li>
<li>
<p>Dennard Scaling and other Power considerations, S. Gai 2020.</p>
</li>
<li>
<p>Benefits in Relaxing the Power Capping Constraint, C. Daniele et al. 2017.</p>
</li>
<li>
<p>Racing and Pacing to Idle: Theoretical and Empirical Analysis of Energy Optimization Heuristics, Kim, Ines, Hoffmann. IEEE 2015.</p>
</li>
<li>
<p>Adaptive, Transparent Frequency and Voltage Scaling of
Communication Phases in MPI Programs, Lim, Freeh, Lowenthal. ACM/IEEE SC 2006.</p>
</li>
<li>
<p>Green AI, Schwartz et al, 2019.</p>
</li>
<li>
<p>Speed Scale Depdence of Climate Model Performance in the CMPI3 Ensemble, Masson &amp; Knutti, 2011.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_optimisations_de_code"><a class="anchor" href="#_optimisations_de_code"></a><a class="link" href="#_optimisations_de_code">5.2. Optimisations de code</a></h3>
<div class="sect3">
<h4 id="_mesure_de_performance"><a class="anchor" href="#_mesure_de_performance"></a><a class="link" href="#_mesure_de_performance">5.2.1. Mesure de performance</a></h4>
<div class="ulist">
<ul>
<li>
<p>On ne peut pas optimiser ce que l&#8217;on ne peut pas mesurer.</p>
</li>
<li>
<p>On peut mesurer le temps, l&#8217;énergie, la mémoire, la qualité du code.</p>
</li>
<li>
<p>Souvent énergie et temps de calcul sont liés: <em>race to idle</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mesurer_la_performance"><a class="anchor" href="#_mesurer_la_performance"></a><a class="link" href="#_mesurer_la_performance">5.2.2. Mesurer la performance</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/performance1.png" alt="Mesure de performance" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>CPI: Cycles par Instruction. Plus les CPI sont bas plus le code est rapide.</p>
</li>
<li>
<p>Impact de la taille d&#8217;un tableau pour un accès mémoire.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mesurer_la_performance_2"><a class="anchor" href="#_mesurer_la_performance_2"></a><a class="link" href="#_mesurer_la_performance_2">5.2.3. Mesurer la performance</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/performance2.png" alt="Mesure de performance" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Importance d&#8217;explorer différents paramètres en entrée</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_exemple_3"><a class="anchor" href="#_exemple_3"></a><a class="link" href="#_exemple_3">5.2.4. Exemple</a></h4>
<div class="ulist">
<ul>
<li>
<p>On mesure deux codes:</p>
<div class="ulist">
<ul>
<li>
<p>code 1 : 8.56 secondes</p>
</li>
<li>
<p>code 2 : 8.94 secondes</p>
</li>
</ul>
</div>
</li>
<li>
<p>Accélération (<em>speedup</em>) (8.94-8.56)/8.94 = 4.2% ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_attention_au_bruit_de_mesure"><a class="anchor" href="#_attention_au_bruit_de_mesure"></a><a class="link" href="#_attention_au_bruit_de_mesure">5.2.5. Attention au bruit de mesure</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/dispersion.png" alt="Bruit de mesure" width="500">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Pas de différence significative avec 30 mesures</p>
</li>
<li>
<p>Répéter les mesures et étudier leur dispersion.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_bruit_de_mesure"><a class="anchor" href="#_bruit_de_mesure"></a><a class="link" href="#_bruit_de_mesure">5.2.6. Bruit de mesure</a></h4>
<div class="ulist">
<ul>
<li>
<p>Importance de prendre en compte le bruit de mesure.</p>
</li>
<li>
<p>Sources d&#8217;indéterminisme:</p>
<div class="ulist">
<ul>
<li>
<p>Hiérarchie mémoire: Caches, TLB, Buffers E/S, Disque dur, swap</p>
</li>
<li>
<p>Pipeline d&#8217;instructions</p>
</li>
<li>
<p>Entrelacement des threads</p>
</li>
<li>
<p>DVFS / C-States et P-States</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pour_stabiliser_les_mesures"><a class="anchor" href="#_pour_stabiliser_les_mesures"></a><a class="link" href="#_pour_stabiliser_les_mesures">5.2.7. Pour stabiliser les mesures</a></h4>
<div class="ulist">
<ul>
<li>
<p>Exécutez une première fois votre programme pour charger les données dans le buffer E/S (sauf si vous souhaitez en mesurer l&#8217;effet).</p>
</li>
<li>
<p>Utiliser le <em>pinning</em> de processus (évite que les threads soient migrés en cours d&#8217;exécution).</p>
</li>
<li>
<p>Désactivez le DVFS de votre processeur (gouverneur performance)</p>
</li>
<li>
<p>Évitez de faire tourner d&#8217;autres processus et augmentez la priorité du processus mesuré avec <code>nice -20</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_comment_mesurer"><a class="anchor" href="#_comment_mesurer"></a><a class="link" href="#_comment_mesurer">5.2.8. Comment mesurer ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>Insertion de sondes directement dans le code. Pour Rust, vous pouvez utiliser le crate <a href="https://doc.rust-lang.org/1.4.0/book/benchmark-tests.html"><code>Bencher</code></a>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">pub fn add_two(a: i32) -&gt; i32 {
    a + 2
}

#[cfg(test)]
mod tests {
    use super::*;
    use test::Bencher;

    #[bench]
    fn bench_add_two(b: &amp;mut Bencher) {
        b.iter(|| add_two(2));
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cargo bench
   Compiling adder v0.0.1 (file:///home/steve/tmp/adder)
     Running target/release/adder-91b3e234d4ed382a

running 2 tests
test tests::bench_add_two ... bench:         1 ns/iter (+/- 0)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_comment_mesurer_2"><a class="anchor" href="#_comment_mesurer_2"></a><a class="link" href="#_comment_mesurer_2">5.2.9. Comment mesurer ?</a></h4>
<div class="ulist">
<ul>
<li>
<p>Utiliser un outil externe. Par exemple pour mesurer des compteurs de performance: RAPL, cache misses, cycles, etc.</p>
</li>
<li>
<p>De nombreux outils disponibles (<strong>Perf</strong>, Likwid, MAQAO, PAPI, VTune, &#8230;&#8203;)</p>
</li>
<li>
<p>Sous Linux, l&#8217;outil <a href="https://perf.wiki.kernel.org/index.php/Tutorial">perf</a> permet d&#8217;interroger directement le noyau pour accéder à ces compteurs.</p>
</li>
<li>
<p>Exemple: pour mesurer les cycles, le nombre d&#8217;instructions, ainsi que les cache misses:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">perf stat -e cycles,instructions,cache-misses ./programme</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_hiérarchie_mémoire"><a class="anchor" href="#_hiérarchie_mémoire"></a><a class="link" href="#_hiérarchie_mémoire">5.2.10. Hiérarchie Mémoire</a></h4>
<div class="imageblock">
<div class="content">
<img src="figs/arch.svg" alt="Architecture d&#8217;un ordinateur" width="500">
</div>
</div>
<div class="paragraph">
<p>Trois niveaux de cache (architectures serveur)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>L3 (partagé)</p>
</li>
<li>
<p>L2 (par cœur)</p>
</li>
<li>
<p>L1 données et instruction</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_latences_nehalem"><a class="anchor" href="#_latences_nehalem"></a><a class="link" href="#_latences_nehalem">5.2.11. Latences (Nehalem)</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Niveau</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Latence</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L1 (hit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~4 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L2 (hit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~10 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L3 (non partagée)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~40 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">L3 (partagée)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">65-75 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 120 cycles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~300 000 cycles</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_fonctionnement_basique_dun_cache"><a class="anchor" href="#_fonctionnement_basique_dun_cache"></a><a class="link" href="#_fonctionnement_basique_dun_cache">5.2.12. Fonctionnement basique d&#8217;un Cache</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Le CPU demande une adresse mémoire au L1.</p>
</li>
<li>
<p>Si l&#8217;adresse est disponible dans le L1, c&#8217;est un <strong>hit</strong>.</p>
</li>
<li>
<p>Sinon c&#8217;est un <strong>miss</strong>, le L1 demande au niveau supérieur, ici le L2, de lui transmettre la donnée.</p>
</li>
<li>
<p>La demande remonte la hiérarchie mémoire jusqu&#8217;à ce que la donnée soit trouvée.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_fonctionnement_basique_dun_cache_2"><a class="anchor" href="#_fonctionnement_basique_dun_cache_2"></a><a class="link" href="#_fonctionnement_basique_dun_cache_2">5.2.13. Fonctionnement basique d&#8217;un Cache</a></h4>
<div class="ulist">
<ul>
<li>
<p>Pour être efficace les données sont déplacées par paquets, les <strong>lignes de cache</strong> (typiquement 64 octets).</p>
</li>
<li>
<p>Le bus mémoire détecte les accès linéaires à la mémoire et récupère les données en avance (<em>prefetcher</em>).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
    a[i] += 1;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/prefetch.png" alt="Prefetcher" width="200"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_politique_de_remplacement"><a class="anchor" href="#_politique_de_remplacement"></a><a class="link" href="#_politique_de_remplacement">5.2.14. Politique de remplacement</a></h4>
<div class="ulist">
<ul>
<li>
<p>LRU (Last Recently Used)</p>
</li>
<li>
<p>Les données les plus anciennement utilisées sont remplacées en premier.</p>
</li>
<li>
<p>Des politiques complexes permettent d&#8217;assurer la cohérence des données partagées en L3.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_problème_de_capacité"><a class="anchor" href="#_problème_de_capacité"></a><a class="link" href="#_problème_de_capacité">5.2.15. Problème de capacité</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
  for j in 0..n {
    a[j][i] += 1;  // a[j][i] =&gt; a[j*n+i]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="image"><img src="figs/capacity.png" alt="Capacity" width="600"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_importance_de_la_localité"><a class="anchor" href="#_importance_de_la_localité"></a><a class="link" href="#_importance_de_la_localité">5.2.16. Importance de la localité</a></h4>
<div class="paragraph">
<p>Pour optimiser l&#8217;accès à la mémoire, on conçoit notre algorithme pour maximiser</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Localité spatiale: on accède aux données dans l&#8217;ordre des adresses mémoire</p>
</li>
<li>
<p>Localité temporelle: si des données sont réutilisées, on diminue le temps entre deux réutilisations pour éviter qu&#8217;elles soient remplacées entre temps dans le cache.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_un_exemple_doptimisation_transformations_de_boucles"><a class="anchor" href="#_un_exemple_doptimisation_transformations_de_boucles"></a><a class="link" href="#_un_exemple_doptimisation_transformations_de_boucles">5.2.17. Un exemple d&#8217;optimisation: transformations de boucles</a></h4>
<div class="ulist">
<ul>
<li>
<p>Transformations de boucles: souvent effectuées automatiquement par le compilateur.</p>
</li>
<li>
<p>Pour que la transformation soit faite, le compilateur doit prouver que la sémantique du code ne change pas.</p>
</li>
<li>
<p>Dans certains cas, le compilateur n&#8217;arrive pas à faire tout seul la transformation.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_interchange"><a class="anchor" href="#_loop_interchange"></a><a class="link" href="#_loop_interchange">5.2.18. Loop interchange</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
	for j in 0..n {
		a[j][i] = a[j][i]*a[j][i];
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_interchange_2"><a class="anchor" href="#_loop_interchange_2"></a><a class="link" href="#_loop_interchange_2">5.2.19. Loop interchange</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-interchange.png" alt="Loop interchange"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_invariant_code_motion"><a class="anchor" href="#_loop_invariant_code_motion"></a><a class="link" href="#_loop_invariant_code_motion">5.2.20. Loop-invariant code motion</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
	for j in 0..n {
		a[i][j] = c[i] + b[i][j]
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_invariant_code_motion_2"><a class="anchor" href="#_loop_invariant_code_motion_2"></a><a class="link" href="#_loop_invariant_code_motion_2">5.2.21. Loop-invariant code motion</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-invariant-cm.png" alt="Loop invariant code motion"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_if_hoisting"><a class="anchor" href="#_if_hoisting"></a><a class="link" href="#_if_hoisting">5.2.22. If hoisting</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 1..n {
  a[i] = a[i] + 1 ;
  if i&lt;3 {
    b[i] = a[i]*c[i];
  } else {
    b[i] = a[i-1]*b[i-1];
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_if_hoisting_2"><a class="anchor" href="#_if_hoisting_2"></a><a class="link" href="#_if_hoisting_2">5.2.23. If hoisting</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/if-hoisting.png" alt="If hoisting"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_fusion_fission"><a class="anchor" href="#_loop_fusion_fission"></a><a class="link" href="#_loop_fusion_fission">5.2.24. Loop fusion / fission</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-fusion-fission.png" alt="Loop fusion - fission"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Comment choisir ? Cela dépend de l&#8217;architecture. Les compilateurs utilisent des modèles de coût.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_peeling"><a class="anchor" href="#_loop_peeling"></a><a class="link" href="#_loop_peeling">5.2.25. Loop peeling</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
	a[i] = a[i] + 2;
}
for i in 2..n {
	a[i] = a[i] * 2;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_peeling_2"><a class="anchor" href="#_loop_peeling_2"></a><a class="link" href="#_loop_peeling_2">5.2.26. Loop peeling</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-peeling.png" alt="Loop Peeling"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_unroll"><a class="anchor" href="#_loop_unroll"></a><a class="link" href="#_loop_unroll">5.2.27. Loop unroll</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">for i in 0..n {
    c[i] += b[i] + a[i];
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comment optimiser ce code ?</p>
</div>
</div>
<div class="sect3">
<h4 id="_loop_unroll_2"><a class="anchor" href="#_loop_unroll_2"></a><a class="link" href="#_loop_unroll_2">5.2.28. Loop unroll</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-unroll.png" alt="Loop Unroll"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Réduit le surcoût de contrôle.</p>
</li>
<li>
<p>Parfois, permet de vectoriser le code.</p>
</li>
<li>
<p>Parfois, fait apparaître des simplifications.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_blocking_ou_tiling"><a class="anchor" href="#_loop_blocking_ou_tiling"></a><a class="link" href="#_loop_blocking_ou_tiling">5.2.29. Loop blocking ou tiling</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-blocking.png" alt="Loop Blocking"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>n</code> grand: <code>b[]</code> ne rentre pas dans le cache.</p>
</li>
<li>
<p>Localité spatiale: ok.</p>
</li>
<li>
<p>Localité temporelle: problème sur <code>b[j]</code>.</p>
</li>
<li>
<p>Comment optimiser ce code ?</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_loop_blocking_ou_tiling_2"><a class="anchor" href="#_loop_blocking_ou_tiling_2"></a><a class="link" href="#_loop_blocking_ou_tiling_2">5.2.30. Loop blocking ou tiling</a></h4>
<div class="paragraph">
<p><span class="image"><img src="figs/loop-blocking2.png" alt="Loop Blocking"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_un_mot_rapide_sur_la_parallélisation"><a class="anchor" href="#_un_mot_rapide_sur_la_parallélisation"></a><a class="link" href="#_un_mot_rapide_sur_la_parallélisation">5.2.31. Un mot rapide sur la parallélisation</a></h4>
<div class="paragraph">
<p>Les architectures récentes sont multicœurs, pour en tirer parti les programmes peuvent être <em>parallélisés</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Décomposer le travail en parties indépendantes. Chaque partie sera effectuée par un <em>thread</em> dans un cœur différent.</p>
</li>
<li>
<p>Limiter au maximum les communications et synchronisations entre threads (coûteuses).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_exemple_de_parallélisation_en_rust"><a class="anchor" href="#_exemple_de_parallélisation_en_rust"></a><a class="link" href="#_exemple_de_parallélisation_en_rust">5.2.32. Exemple de parallélisation en rust</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-rust hljs" data-lang="rust">extern crate rayon;
use rayon::prelude::*;
fn main() {
    let mut v = vec![1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    v.par_chunks_mut(3).for_each(|chunk| {
        for x in chunk { *x *= 2; }
    });
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>par_chunks</code> et <code>par_chunks_mut</code> décomposent un itérateur en morceaux (<code>chunks</code>) indépendants.</p>
</li>
<li>
<p>la méthode <code>for_each</code> va exécuter un traitement parallèle sur chaque morceau.</p>
</li>
<li>
<p><code>|chunk| { &#8230;&#8203; }</code> est une clôture. C&#8217;est une fonction anonyme qui peut capturer les variables de l&#8217;environnement où elle est déclarée.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2025-2026<br>
Last updated 2025-09-08 13:57:54 UTC
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code[data-lang]')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
})
MathJax.Hub.Register.StartupHook("AsciiMath Jax Ready", function () {
  MathJax.InputJax.AsciiMath.postfilterHooks.Add(function (data, node) {
    if ((node = data.script.parentNode) && (node = node.parentNode) && node.classList.contains("stemblock")) {
      data.math.root.display = "block"
    }
    return data
  })
})
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>